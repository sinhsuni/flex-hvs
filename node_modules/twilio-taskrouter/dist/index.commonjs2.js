// [AIV_SHORT]  Build version: 0.5.4 - Friday, April 30th, 2021, 6:39:17 PM  
 module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.w={},r(r.s=36)}([function(e,t,r){(function(e){var n;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="__lodash_hash_undefined__",c=500,l="__lodash_placeholder__",f=1,h=2,d=4,p=1,_=2,g=1,v=2,m=4,w=8,y=16,k=32,E=64,b=128,S=256,T=512,R=30,x="...",C=800,A=16,O=1,I=2,N=1/0,L=9007199254740991,F=1.7976931348623157e308,j=NaN,P=4294967295,U=P-1,W=P>>>1,q=[["ary",b],["bind",g],["bindKey",v],["curry",w],["curryRight",y],["flip",T],["partial",k],["partialRight",E],["rearg",S]],D="[object Arguments]",B="[object Array]",$="[object AsyncFunction]",M="[object Boolean]",z="[object Date]",V="[object DOMException]",G="[object Error]",H="[object Function]",J="[object GeneratorFunction]",Z="[object Map]",Q="[object Number]",K="[object Null]",Y="[object Object]",X="[object Proxy]",ee="[object RegExp]",te="[object Set]",re="[object String]",ne="[object Symbol]",ie="[object Undefined]",se="[object WeakMap]",oe="[object WeakSet]",ae="[object ArrayBuffer]",ue="[object DataView]",ce="[object Float32Array]",le="[object Float64Array]",fe="[object Int8Array]",he="[object Int16Array]",de="[object Int32Array]",pe="[object Uint8Array]",_e="[object Uint8ClampedArray]",ge="[object Uint16Array]",ve="[object Uint32Array]",me=/\b__p \+= '';/g,we=/\b(__p \+=) '' \+/g,ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ke=/&(?:amp|lt|gt|quot|#39);/g,Ee=/[&<>"']/g,be=RegExp(ke.source),Se=RegExp(Ee.source),Te=/<%-([\s\S]+?)%>/g,Re=/<%([\s\S]+?)%>/g,xe=/<%=([\s\S]+?)%>/g,Ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ie=/[\\^$.*+?()[\]{}|]/g,Ne=RegExp(Ie.source),Le=/^\s+|\s+$/g,Fe=/^\s+/,je=/\s+$/,Pe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,We=/,? & /,qe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,De=/\\(\\)?/g,Be=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$e=/\w*$/,Me=/^[-+]0x[0-9a-f]+$/i,ze=/^0b[01]+$/i,Ve=/^\[object .+?Constructor\]$/,Ge=/^0o[0-7]+$/i,He=/^(?:0|[1-9]\d*)$/,Je=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ze=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,Ke="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ye="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xe="[\\ud800-\\udfff]",et="["+Ye+"]",tt="["+Ke+"]",rt="\\d+",nt="[\\u2700-\\u27bf]",it="[a-z\\xdf-\\xf6\\xf8-\\xff]",st="[^\\ud800-\\udfff"+Ye+rt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ot="\\ud83c[\\udffb-\\udfff]",at="[^\\ud800-\\udfff]",ut="(?:\\ud83c[\\udde6-\\uddff]){2}",ct="[\\ud800-\\udbff][\\udc00-\\udfff]",lt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ft="(?:"+it+"|"+st+")",ht="(?:"+lt+"|"+st+")",dt="(?:"+tt+"|"+ot+")"+"?",pt="[\\ufe0e\\ufe0f]?"+dt+("(?:\\u200d(?:"+[at,ut,ct].join("|")+")[\\ufe0e\\ufe0f]?"+dt+")*"),_t="(?:"+[nt,ut,ct].join("|")+")"+pt,gt="(?:"+[at+tt+"?",tt,ut,ct,Xe].join("|")+")",vt=RegExp("['’]","g"),mt=RegExp(tt,"g"),wt=RegExp(ot+"(?="+ot+")|"+gt+pt,"g"),yt=RegExp([lt+"?"+it+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[et,lt,"$"].join("|")+")",ht+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[et,lt+ft,"$"].join("|")+")",lt+"?"+ft+"+(?:['’](?:d|ll|m|re|s|t|ve))?",lt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rt,_t].join("|"),"g"),kt=RegExp("[\\u200d\\ud800-\\udfff"+Ke+"\\ufe0e\\ufe0f]"),Et=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],St=-1,Tt={};Tt[ce]=Tt[le]=Tt[fe]=Tt[he]=Tt[de]=Tt[pe]=Tt[_e]=Tt[ge]=Tt[ve]=!0,Tt[D]=Tt[B]=Tt[ae]=Tt[M]=Tt[ue]=Tt[z]=Tt[G]=Tt[H]=Tt[Z]=Tt[Q]=Tt[Y]=Tt[ee]=Tt[te]=Tt[re]=Tt[se]=!1;var Rt={};Rt[D]=Rt[B]=Rt[ae]=Rt[ue]=Rt[M]=Rt[z]=Rt[ce]=Rt[le]=Rt[fe]=Rt[he]=Rt[de]=Rt[Z]=Rt[Q]=Rt[Y]=Rt[ee]=Rt[te]=Rt[re]=Rt[ne]=Rt[pe]=Rt[_e]=Rt[ge]=Rt[ve]=!0,Rt[G]=Rt[H]=Rt[se]=!1;var xt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ct=parseFloat,At=parseInt,Ot="object"==typeof global&&global&&global.Object===Object&&global,It="object"==typeof self&&self&&self.Object===Object&&self,Nt=Ot||It||Function("return this")(),Lt="object"==typeof t&&t&&!t.nodeType&&t,Ft=Lt&&"object"==typeof e&&e&&!e.nodeType&&e,jt=Ft&&Ft.exports===Lt,Pt=jt&&Ot.process,Ut=function(){try{return Pt&&Pt.binding&&Pt.binding("util")}catch(e){}}(),Wt=Ut&&Ut.isArrayBuffer,qt=Ut&&Ut.isDate,Dt=Ut&&Ut.isMap,Bt=Ut&&Ut.isRegExp,$t=Ut&&Ut.isSet,Mt=Ut&&Ut.isTypedArray;function zt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Vt(e,t,r,n){for(var i=-1,s=null==e?0:e.length;++i<s;){var o=e[i];t(n,o,r(o),e)}return n}function Gt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Ht(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Jt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Zt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}function Qt(e,t){return!!(null==e?0:e.length)&&or(e,t,0)>-1}function Kt(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function Yt(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Xt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function er(e,t,r,n){var i=-1,s=null==e?0:e.length;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r}function tr(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function rr(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var nr=lr("length");function ir(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}function sr(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function or(e,t,r){return t==t?function(e,t,r){var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):sr(e,ur,r)}function ar(e,t,r,n){for(var i=r-1,s=e.length;++i<s;)if(n(e[i],t))return i;return-1}function ur(e){return e!=e}function cr(e,t){var r=null==e?0:e.length;return r?dr(e,t)/r:j}function lr(e){return function(t){return null==t?i:t[e]}}function fr(e){return function(t){return null==e?i:e[t]}}function hr(e,t,r,n,i){return i(e,function(e,i,s){r=n?(n=!1,e):t(r,e,i,s)}),r}function dr(e,t){for(var r,n=-1,s=e.length;++n<s;){var o=t(e[n]);o!==i&&(r=r===i?o:r+o)}return r}function pr(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function _r(e){return function(t){return e(t)}}function gr(e,t){return Yt(t,function(t){return e[t]})}function vr(e,t){return e.has(t)}function mr(e,t){for(var r=-1,n=e.length;++r<n&&or(t,e[r],0)>-1;);return r}function wr(e,t){for(var r=e.length;r--&&or(t,e[r],0)>-1;);return r}var yr=fr({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),kr=fr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Er(e){return"\\"+xt[e]}function br(e){return kt.test(e)}function Sr(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function Tr(e,t){return function(r){return e(t(r))}}function Rr(e,t){for(var r=-1,n=e.length,i=0,s=[];++r<n;){var o=e[r];o!==t&&o!==l||(e[r]=l,s[i++]=r)}return s}function xr(e,t){return"__proto__"==t?i:e[t]}function Cr(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function Ar(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function Or(e){return br(e)?function(e){var t=wt.lastIndex=0;for(;wt.test(e);)++t;return t}(e):nr(e)}function Ir(e){return br(e)?function(e){return e.match(wt)||[]}(e):function(e){return e.split("")}(e)}var Nr=fr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Lr=function e(t){var r,n=(t=null==t?Nt:Lr.defaults(Nt.Object(),t,Lr.pick(Nt,bt))).Array,Ke=t.Date,Ye=t.Error,Xe=t.Function,et=t.Math,tt=t.Object,rt=t.RegExp,nt=t.String,it=t.TypeError,st=n.prototype,ot=Xe.prototype,at=tt.prototype,ut=t["__core-js_shared__"],ct=ot.toString,lt=at.hasOwnProperty,ft=0,ht=(r=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",dt=at.toString,pt=ct.call(tt),_t=Nt._,gt=rt("^"+ct.call(lt).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=jt?t.Buffer:i,kt=t.Symbol,xt=t.Uint8Array,Ot=wt?wt.allocUnsafe:i,It=Tr(tt.getPrototypeOf,tt),Lt=tt.create,Ft=at.propertyIsEnumerable,Pt=st.splice,Ut=kt?kt.isConcatSpreadable:i,nr=kt?kt.iterator:i,fr=kt?kt.toStringTag:i,Fr=function(){try{var e=qs(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),jr=t.clearTimeout!==Nt.clearTimeout&&t.clearTimeout,Pr=Ke&&Ke.now!==Nt.Date.now&&Ke.now,Ur=t.setTimeout!==Nt.setTimeout&&t.setTimeout,Wr=et.ceil,qr=et.floor,Dr=tt.getOwnPropertySymbols,Br=wt?wt.isBuffer:i,$r=t.isFinite,Mr=st.join,zr=Tr(tt.keys,tt),Vr=et.max,Gr=et.min,Hr=Ke.now,Jr=t.parseInt,Zr=et.random,Qr=st.reverse,Kr=qs(t,"DataView"),Yr=qs(t,"Map"),Xr=qs(t,"Promise"),en=qs(t,"Set"),tn=qs(t,"WeakMap"),rn=qs(tt,"create"),nn=tn&&new tn,sn={},on=lo(Kr),an=lo(Yr),un=lo(Xr),cn=lo(en),ln=lo(tn),fn=kt?kt.prototype:i,hn=fn?fn.valueOf:i,dn=fn?fn.toString:i;function pn(e){if(Ca(e)&&!va(e)&&!(e instanceof mn)){if(e instanceof vn)return e;if(lt.call(e,"__wrapped__"))return fo(e)}return new vn(e)}var _n=function(){function e(){}return function(t){if(!xa(t))return{};if(Lt)return Lt(t);e.prototype=t;var r=new e;return e.prototype=i,r}}();function gn(){}function vn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function mn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=P,this.__views__=[]}function wn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function yn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function kn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function En(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new kn;++t<r;)this.add(e[t])}function bn(e){var t=this.__data__=new yn(e);this.size=t.size}function Sn(e,t){var r=va(e),n=!r&&ga(e),i=!r&&!n&&ka(e),s=!r&&!n&&!i&&Pa(e),o=r||n||i||s,a=o?pr(e.length,nt):[],u=a.length;for(var c in e)!t&&!lt.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Gs(c,u))||a.push(c);return a}function Tn(e){var t=e.length;return t?e[Ei(0,t-1)]:i}function Rn(e,t){return ao(ns(e),jn(t,0,e.length))}function xn(e){return ao(ns(e))}function Cn(e,t,r){(r===i||da(e[t],r))&&(r!==i||t in e)||Ln(e,t,r)}function An(e,t,r){var n=e[t];lt.call(e,t)&&da(n,r)&&(r!==i||t in e)||Ln(e,t,r)}function On(e,t){for(var r=e.length;r--;)if(da(e[r][0],t))return r;return-1}function In(e,t,r,n){return Dn(e,function(e,i,s){t(n,e,r(e),s)}),n}function Nn(e,t){return e&&is(t,iu(t),e)}function Ln(e,t,r){"__proto__"==t&&Fr?Fr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Fn(e,t){for(var r=-1,s=t.length,o=n(s),a=null==e;++r<s;)o[r]=a?i:Xa(e,t[r]);return o}function jn(e,t,r){return e==e&&(r!==i&&(e=e<=r?e:r),t!==i&&(e=e>=t?e:t)),e}function Pn(e,t,r,n,s,o){var a,u=t&f,c=t&h,l=t&d;if(r&&(a=s?r(e,n,s,o):r(e)),a!==i)return a;if(!xa(e))return e;var p=va(e);if(p){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&lt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!u)return ns(e,a)}else{var _=$s(e),g=_==H||_==J;if(ka(e))return Ki(e,u);if(_==Y||_==D||g&&!s){if(a=c||g?{}:zs(e),!u)return c?function(e,t){return is(e,Bs(e),t)}(e,function(e,t){return e&&is(t,su(t),e)}(a,e)):function(e,t){return is(e,Ds(e),t)}(e,Nn(a,e))}else{if(!Rt[_])return s?e:{};a=function(e,t,r){var n,i,s,o=e.constructor;switch(t){case ae:return Yi(e);case M:case z:return new o(+e);case ue:return function(e,t){var r=t?Yi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case ce:case le:case fe:case he:case de:case pe:case _e:case ge:case ve:return Xi(e,r);case Z:return new o;case Q:case re:return new o(e);case ee:return(s=new(i=e).constructor(i.source,$e.exec(i))).lastIndex=i.lastIndex,s;case te:return new o;case ne:return n=e,hn?tt(hn.call(n)):{}}}(e,_,u)}}o||(o=new bn);var v=o.get(e);if(v)return v;if(o.set(e,a),La(e))return e.forEach(function(n){a.add(Pn(n,t,r,n,e,o))}),a;if(Aa(e))return e.forEach(function(n,i){a.set(i,Pn(n,t,r,i,e,o))}),a;var m=p?i:(l?c?Ns:Is:c?su:iu)(e);return Gt(m||e,function(n,i){m&&(n=e[i=n]),An(a,i,Pn(n,t,r,i,e,o))}),a}function Un(e,t,r){var n=r.length;if(null==e)return!n;for(e=tt(e);n--;){var s=r[n],o=t[s],a=e[s];if(a===i&&!(s in e)||!o(a))return!1}return!0}function Wn(e,t,r){if("function"!=typeof e)throw new it(a);return no(function(){e.apply(i,r)},t)}function qn(e,t,r,n){var i=-1,o=Qt,a=!0,u=e.length,c=[],l=t.length;if(!u)return c;r&&(t=Yt(t,_r(r))),n?(o=Kt,a=!1):t.length>=s&&(o=vr,a=!1,t=new En(t));e:for(;++i<u;){var f=e[i],h=null==r?f:r(f);if(f=n||0!==f?f:0,a&&h==h){for(var d=l;d--;)if(t[d]===h)continue e;c.push(f)}else o(t,h,n)||c.push(f)}return c}pn.templateSettings={escape:Te,evaluate:Re,interpolate:xe,variable:"",imports:{_:pn}},pn.prototype=gn.prototype,pn.prototype.constructor=pn,vn.prototype=_n(gn.prototype),vn.prototype.constructor=vn,mn.prototype=_n(gn.prototype),mn.prototype.constructor=mn,wn.prototype.clear=function(){this.__data__=rn?rn(null):{},this.size=0},wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},wn.prototype.get=function(e){var t=this.__data__;if(rn){var r=t[e];return r===u?i:r}return lt.call(t,e)?t[e]:i},wn.prototype.has=function(e){var t=this.__data__;return rn?t[e]!==i:lt.call(t,e)},wn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rn&&t===i?u:t,this},yn.prototype.clear=function(){this.__data__=[],this.size=0},yn.prototype.delete=function(e){var t=this.__data__,r=On(t,e);return!(r<0||(r==t.length-1?t.pop():Pt.call(t,r,1),--this.size,0))},yn.prototype.get=function(e){var t=this.__data__,r=On(t,e);return r<0?i:t[r][1]},yn.prototype.has=function(e){return On(this.__data__,e)>-1},yn.prototype.set=function(e,t){var r=this.__data__,n=On(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},kn.prototype.clear=function(){this.size=0,this.__data__={hash:new wn,map:new(Yr||yn),string:new wn}},kn.prototype.delete=function(e){var t=Us(this,e).delete(e);return this.size-=t?1:0,t},kn.prototype.get=function(e){return Us(this,e).get(e)},kn.prototype.has=function(e){return Us(this,e).has(e)},kn.prototype.set=function(e,t){var r=Us(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},En.prototype.add=En.prototype.push=function(e){return this.__data__.set(e,u),this},En.prototype.has=function(e){return this.__data__.has(e)},bn.prototype.clear=function(){this.__data__=new yn,this.size=0},bn.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},bn.prototype.get=function(e){return this.__data__.get(e)},bn.prototype.has=function(e){return this.__data__.has(e)},bn.prototype.set=function(e,t){var r=this.__data__;if(r instanceof yn){var n=r.__data__;if(!Yr||n.length<s-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new kn(n)}return r.set(e,t),this.size=r.size,this};var Dn=as(Jn),Bn=as(Zn,!0);function $n(e,t){var r=!0;return Dn(e,function(e,n,i){return r=!!t(e,n,i)}),r}function Mn(e,t,r){for(var n=-1,s=e.length;++n<s;){var o=e[n],a=t(o);if(null!=a&&(u===i?a==a&&!ja(a):r(a,u)))var u=a,c=o}return c}function zn(e,t){var r=[];return Dn(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function Vn(e,t,r,n,i){var s=-1,o=e.length;for(r||(r=Vs),i||(i=[]);++s<o;){var a=e[s];t>0&&r(a)?t>1?Vn(a,t-1,r,n,i):Xt(i,a):n||(i[i.length]=a)}return i}var Gn=us(),Hn=us(!0);function Jn(e,t){return e&&Gn(e,t,iu)}function Zn(e,t){return e&&Hn(e,t,iu)}function Qn(e,t){return Zt(t,function(t){return Sa(e[t])})}function Kn(e,t){for(var r=0,n=(t=Hi(t,e)).length;null!=e&&r<n;)e=e[co(t[r++])];return r&&r==n?e:i}function Yn(e,t,r){var n=t(e);return va(e)?n:Xt(n,r(e))}function Xn(e){return null==e?e===i?ie:K:fr&&fr in tt(e)?function(e){var t=lt.call(e,fr),r=e[fr];try{e[fr]=i;var n=!0}catch(e){}var s=dt.call(e);return n&&(t?e[fr]=r:delete e[fr]),s}(e):function(e){return dt.call(e)}(e)}function ei(e,t){return e>t}function ti(e,t){return null!=e&&lt.call(e,t)}function ri(e,t){return null!=e&&t in tt(e)}function ni(e,t,r){for(var s=r?Kt:Qt,o=e[0].length,a=e.length,u=a,c=n(a),l=1/0,f=[];u--;){var h=e[u];u&&t&&(h=Yt(h,_r(t))),l=Gr(h.length,l),c[u]=!r&&(t||o>=120&&h.length>=120)?new En(u&&h):i}h=e[0];var d=-1,p=c[0];e:for(;++d<o&&f.length<l;){var _=h[d],g=t?t(_):_;if(_=r||0!==_?_:0,!(p?vr(p,g):s(f,g,r))){for(u=a;--u;){var v=c[u];if(!(v?vr(v,g):s(e[u],g,r)))continue e}p&&p.push(g),f.push(_)}}return f}function ii(e,t,r){var n=null==(e=to(e,t=Hi(t,e)))?e:e[co(bo(t))];return null==n?i:zt(n,e,r)}function si(e){return Ca(e)&&Xn(e)==D}function oi(e,t,r,n,s){return e===t||(null==e||null==t||!Ca(e)&&!Ca(t)?e!=e&&t!=t:function(e,t,r,n,s,o){var a=va(e),u=va(t),c=a?B:$s(e),l=u?B:$s(t),f=(c=c==D?Y:c)==Y,h=(l=l==D?Y:l)==Y,d=c==l;if(d&&ka(e)){if(!ka(t))return!1;a=!0,f=!1}if(d&&!f)return o||(o=new bn),a||Pa(e)?As(e,t,r,n,s,o):function(e,t,r,n,i,s,o){switch(r){case ue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ae:return!(e.byteLength!=t.byteLength||!s(new xt(e),new xt(t)));case M:case z:case Q:return da(+e,+t);case G:return e.name==t.name&&e.message==t.message;case ee:case re:return e==t+"";case Z:var a=Sr;case te:var u=n&p;if(a||(a=Cr),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;n|=_,o.set(e,t);var l=As(a(e),a(t),n,i,s,o);return o.delete(e),l;case ne:if(hn)return hn.call(e)==hn.call(t)}return!1}(e,t,c,r,n,s,o);if(!(r&p)){var g=f&&lt.call(e,"__wrapped__"),v=h&&lt.call(t,"__wrapped__");if(g||v){var m=g?e.value():e,w=v?t.value():t;return o||(o=new bn),s(m,w,r,n,o)}}return!!d&&(o||(o=new bn),function(e,t,r,n,s,o){var a=r&p,u=Is(e),c=u.length,l=Is(t).length;if(c!=l&&!a)return!1;for(var f=c;f--;){var h=u[f];if(!(a?h in t:lt.call(t,h)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var _=!0;o.set(e,t),o.set(t,e);for(var g=a;++f<c;){h=u[f];var v=e[h],m=t[h];if(n)var w=a?n(m,v,h,t,e,o):n(v,m,h,e,t,o);if(!(w===i?v===m||s(v,m,r,n,o):w)){_=!1;break}g||(g="constructor"==h)}if(_&&!g){var y=e.constructor,k=t.constructor;y!=k&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof k&&k instanceof k)&&(_=!1)}return o.delete(e),o.delete(t),_}(e,t,r,n,s,o))}(e,t,r,n,oi,s))}function ai(e,t,r,n){var s=r.length,o=s,a=!n;if(null==e)return!o;for(e=tt(e);s--;){var u=r[s];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++s<o;){var c=(u=r[s])[0],l=e[c],f=u[1];if(a&&u[2]){if(l===i&&!(c in e))return!1}else{var h=new bn;if(n)var d=n(l,f,c,e,t,h);if(!(d===i?oi(f,l,p|_,n,h):d))return!1}}return!0}function ui(e){return!(!xa(e)||ht&&ht in e)&&(Sa(e)?gt:Ve).test(lo(e))}function ci(e){return"function"==typeof e?e:null==e?Ou:"object"==typeof e?va(e)?_i(e[0],e[1]):pi(e):qu(e)}function li(e){if(!Ks(e))return zr(e);var t=[];for(var r in tt(e))lt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function fi(e){if(!xa(e))return function(e){var t=[];if(null!=e)for(var r in tt(e))t.push(r);return t}(e);var t=Ks(e),r=[];for(var n in e)("constructor"!=n||!t&&lt.call(e,n))&&r.push(n);return r}function hi(e,t){return e<t}function di(e,t){var r=-1,i=wa(e)?n(e.length):[];return Dn(e,function(e,n,s){i[++r]=t(e,n,s)}),i}function pi(e){var t=Ws(e);return 1==t.length&&t[0][2]?Xs(t[0][0],t[0][1]):function(r){return r===e||ai(r,e,t)}}function _i(e,t){return Js(e)&&Ys(t)?Xs(co(e),t):function(r){var n=Xa(r,e);return n===i&&n===t?eu(r,e):oi(t,n,p|_)}}function gi(e,t,r,n,s){e!==t&&Gn(t,function(o,a){if(xa(o))s||(s=new bn),function(e,t,r,n,s,o,a){var u=xr(e,r),c=xr(t,r),l=a.get(c);if(l)Cn(e,r,l);else{var f=o?o(u,c,r+"",e,t,a):i,h=f===i;if(h){var d=va(c),p=!d&&ka(c),_=!d&&!p&&Pa(c);f=c,d||p||_?va(u)?f=u:ya(u)?f=ns(u):p?(h=!1,f=Ki(c,!0)):_?(h=!1,f=Xi(c,!0)):f=[]:Ia(c)||ga(c)?(f=u,ga(u)?f=za(u):(!xa(u)||n&&Sa(u))&&(f=zs(c))):h=!1}h&&(a.set(c,f),s(f,c,n,o,a),a.delete(c)),Cn(e,r,f)}}(e,t,a,r,gi,n,s);else{var u=n?n(xr(e,a),o,a+"",e,t,s):i;u===i&&(u=o),Cn(e,a,u)}},su)}function vi(e,t){var r=e.length;if(r)return Gs(t+=t<0?r:0,r)?e[t]:i}function mi(e,t,r){var n=-1;return t=Yt(t.length?t:[Ou],_r(Ps())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(di(e,function(e,r,i){return{criteria:Yt(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,s=t.criteria,o=i.length,a=r.length;++n<o;){var u=es(i[n],s[n]);if(u){if(n>=a)return u;var c=r[n];return u*("desc"==c?-1:1)}}return e.index-t.index}(e,t,r)})}function wi(e,t,r){for(var n=-1,i=t.length,s={};++n<i;){var o=t[n],a=Kn(e,o);r(a,o)&&xi(s,Hi(o,e),a)}return s}function yi(e,t,r,n){var i=n?ar:or,s=-1,o=t.length,a=e;for(e===t&&(t=ns(t)),r&&(a=Yt(e,_r(r)));++s<o;)for(var u=0,c=t[s],l=r?r(c):c;(u=i(a,l,u,n))>-1;)a!==e&&Pt.call(a,u,1),Pt.call(e,u,1);return e}function ki(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==s){var s=i;Gs(i)?Pt.call(e,i,1):qi(e,i)}}return e}function Ei(e,t){return e+qr(Zr()*(t-e+1))}function bi(e,t){var r="";if(!e||t<1||t>L)return r;do{t%2&&(r+=e),(t=qr(t/2))&&(e+=e)}while(t);return r}function Si(e,t){return io(eo(e,t,Ou),e+"")}function Ti(e){return Tn(du(e))}function Ri(e,t){var r=du(e);return ao(r,jn(t,0,r.length))}function xi(e,t,r,n){if(!xa(e))return e;for(var s=-1,o=(t=Hi(t,e)).length,a=o-1,u=e;null!=u&&++s<o;){var c=co(t[s]),l=r;if(s!=a){var f=u[c];(l=n?n(f,c,u):i)===i&&(l=xa(f)?f:Gs(t[s+1])?[]:{})}An(u,c,l),u=u[c]}return e}var Ci=nn?function(e,t){return nn.set(e,t),e}:Ou,Ai=Fr?function(e,t){return Fr(e,"toString",{configurable:!0,enumerable:!1,value:xu(t),writable:!0})}:Ou;function Oi(e){return ao(du(e))}function Ii(e,t,r){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var o=n(s);++i<s;)o[i]=e[i+t];return o}function Ni(e,t){var r;return Dn(e,function(e,n,i){return!(r=t(e,n,i))}),!!r}function Li(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=W){for(;n<i;){var s=n+i>>>1,o=e[s];null!==o&&!ja(o)&&(r?o<=t:o<t)?n=s+1:i=s}return i}return Fi(e,t,Ou,r)}function Fi(e,t,r,n){t=r(t);for(var s=0,o=null==e?0:e.length,a=t!=t,u=null===t,c=ja(t),l=t===i;s<o;){var f=qr((s+o)/2),h=r(e[f]),d=h!==i,p=null===h,_=h==h,g=ja(h);if(a)var v=n||_;else v=l?_&&(n||d):u?_&&d&&(n||!p):c?_&&d&&!p&&(n||!g):!p&&!g&&(n?h<=t:h<t);v?s=f+1:o=f}return Gr(o,U)}function ji(e,t){for(var r=-1,n=e.length,i=0,s=[];++r<n;){var o=e[r],a=t?t(o):o;if(!r||!da(a,u)){var u=a;s[i++]=0===o?0:o}}return s}function Pi(e){return"number"==typeof e?e:ja(e)?j:+e}function Ui(e){if("string"==typeof e)return e;if(va(e))return Yt(e,Ui)+"";if(ja(e))return dn?dn.call(e):"";var t=e+"";return"0"==t&&1/e==-N?"-0":t}function Wi(e,t,r){var n=-1,i=Qt,o=e.length,a=!0,u=[],c=u;if(r)a=!1,i=Kt;else if(o>=s){var l=t?null:bs(e);if(l)return Cr(l);a=!1,i=vr,c=new En}else c=t?[]:u;e:for(;++n<o;){var f=e[n],h=t?t(f):f;if(f=r||0!==f?f:0,a&&h==h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),u.push(f)}else i(c,h,r)||(c!==u&&c.push(h),u.push(f))}return u}function qi(e,t){return null==(e=to(e,t=Hi(t,e)))||delete e[co(bo(t))]}function Di(e,t,r,n){return xi(e,t,r(Kn(e,t)),n)}function Bi(e,t,r,n){for(var i=e.length,s=n?i:-1;(n?s--:++s<i)&&t(e[s],s,e););return r?Ii(e,n?0:s,n?s+1:i):Ii(e,n?s+1:0,n?i:s)}function $i(e,t){var r=e;return r instanceof mn&&(r=r.value()),er(t,function(e,t){return t.func.apply(t.thisArg,Xt([e],t.args))},r)}function Mi(e,t,r){var i=e.length;if(i<2)return i?Wi(e[0]):[];for(var s=-1,o=n(i);++s<i;)for(var a=e[s],u=-1;++u<i;)u!=s&&(o[s]=qn(o[s]||a,e[u],t,r));return Wi(Vn(o,1),t,r)}function zi(e,t,r){for(var n=-1,s=e.length,o=t.length,a={};++n<s;){var u=n<o?t[n]:i;r(a,e[n],u)}return a}function Vi(e){return ya(e)?e:[]}function Gi(e){return"function"==typeof e?e:Ou}function Hi(e,t){return va(e)?e:Js(e,t)?[e]:uo(Va(e))}var Ji=Si;function Zi(e,t,r){var n=e.length;return r=r===i?n:r,!t&&r>=n?e:Ii(e,t,r)}var Qi=jr||function(e){return Nt.clearTimeout(e)};function Ki(e,t){if(t)return e.slice();var r=e.length,n=Ot?Ot(r):new e.constructor(r);return e.copy(n),n}function Yi(e){var t=new e.constructor(e.byteLength);return new xt(t).set(new xt(e)),t}function Xi(e,t){var r=t?Yi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function es(e,t){if(e!==t){var r=e!==i,n=null===e,s=e==e,o=ja(e),a=t!==i,u=null===t,c=t==t,l=ja(t);if(!u&&!l&&!o&&e>t||o&&a&&c&&!u&&!l||n&&a&&c||!r&&c||!s)return 1;if(!n&&!o&&!l&&e<t||l&&r&&s&&!n&&!o||u&&r&&s||!a&&s||!c)return-1}return 0}function ts(e,t,r,i){for(var s=-1,o=e.length,a=r.length,u=-1,c=t.length,l=Vr(o-a,0),f=n(c+l),h=!i;++u<c;)f[u]=t[u];for(;++s<a;)(h||s<o)&&(f[r[s]]=e[s]);for(;l--;)f[u++]=e[s++];return f}function rs(e,t,r,i){for(var s=-1,o=e.length,a=-1,u=r.length,c=-1,l=t.length,f=Vr(o-u,0),h=n(f+l),d=!i;++s<f;)h[s]=e[s];for(var p=s;++c<l;)h[p+c]=t[c];for(;++a<u;)(d||s<o)&&(h[p+r[a]]=e[s++]);return h}function ns(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function is(e,t,r,n){var s=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var u=t[o],c=n?n(r[u],e[u],u,r,e):i;c===i&&(c=e[u]),s?Ln(r,u,c):An(r,u,c)}return r}function ss(e,t){return function(r,n){var i=va(r)?Vt:In,s=t?t():{};return i(r,e,Ps(n,2),s)}}function os(e){return Si(function(t,r){var n=-1,s=r.length,o=s>1?r[s-1]:i,a=s>2?r[2]:i;for(o=e.length>3&&"function"==typeof o?(s--,o):i,a&&Hs(r[0],r[1],a)&&(o=s<3?i:o,s=1),t=tt(t);++n<s;){var u=r[n];u&&e(t,u,n,o)}return t})}function as(e,t){return function(r,n){if(null==r)return r;if(!wa(r))return e(r,n);for(var i=r.length,s=t?i:-1,o=tt(r);(t?s--:++s<i)&&!1!==n(o[s],s,o););return r}}function us(e){return function(t,r,n){for(var i=-1,s=tt(t),o=n(t),a=o.length;a--;){var u=o[e?a:++i];if(!1===r(s[u],u,s))break}return t}}function cs(e){return function(t){var r=br(t=Va(t))?Ir(t):i,n=r?r[0]:t.charAt(0),s=r?Zi(r,1).join(""):t.slice(1);return n[e]()+s}}function ls(e){return function(t){return er(Su(gu(t).replace(vt,"")),e,"")}}function fs(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=_n(e.prototype),n=e.apply(r,t);return xa(n)?n:r}}function hs(e){return function(t,r,n){var s=tt(t);if(!wa(t)){var o=Ps(r,3);t=iu(t),r=function(e){return o(s[e],e,s)}}var a=e(t,r,n);return a>-1?s[o?t[a]:a]:i}}function ds(e){return Os(function(t){var r=t.length,n=r,s=vn.prototype.thru;for(e&&t.reverse();n--;){var o=t[n];if("function"!=typeof o)throw new it(a);if(s&&!u&&"wrapper"==Fs(o))var u=new vn([],!0)}for(n=u?n:r;++n<r;){var c=Fs(o=t[n]),l="wrapper"==c?Ls(o):i;u=l&&Zs(l[0])&&l[1]==(b|w|k|S)&&!l[4].length&&1==l[9]?u[Fs(l[0])].apply(u,l[3]):1==o.length&&Zs(o)?u[c]():u.thru(o)}return function(){var e=arguments,n=e[0];if(u&&1==e.length&&va(n))return u.plant(n).value();for(var i=0,s=r?t[i].apply(this,e):n;++i<r;)s=t[i].call(this,s);return s}})}function ps(e,t,r,s,o,a,u,c,l,f){var h=t&b,d=t&g,p=t&v,_=t&(w|y),m=t&T,k=p?i:fs(e);return function g(){for(var v=arguments.length,w=n(v),y=v;y--;)w[y]=arguments[y];if(_)var E=js(g),b=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(w,E);if(s&&(w=ts(w,s,o,_)),a&&(w=rs(w,a,u,_)),v-=b,_&&v<f){var S=Rr(w,E);return ks(e,t,ps,g.placeholder,r,w,S,c,l,f-v)}var T=d?r:this,R=p?T[e]:e;return v=w.length,c?w=function(e,t){for(var r=e.length,n=Gr(t.length,r),s=ns(e);n--;){var o=t[n];e[n]=Gs(o,r)?s[o]:i}return e}(w,c):m&&v>1&&w.reverse(),h&&l<v&&(w.length=l),this&&this!==Nt&&this instanceof g&&(R=k||fs(R)),R.apply(T,w)}}function _s(e,t){return function(r,n){return function(e,t,r,n){return Jn(e,function(e,i,s){t(n,r(e),i,s)}),n}(r,e,t(n),{})}}function gs(e,t){return function(r,n){var s;if(r===i&&n===i)return t;if(r!==i&&(s=r),n!==i){if(s===i)return n;"string"==typeof r||"string"==typeof n?(r=Ui(r),n=Ui(n)):(r=Pi(r),n=Pi(n)),s=e(r,n)}return s}}function vs(e){return Os(function(t){return t=Yt(t,_r(Ps())),Si(function(r){var n=this;return e(t,function(e){return zt(e,n,r)})})})}function ms(e,t){var r=(t=t===i?" ":Ui(t)).length;if(r<2)return r?bi(t,e):t;var n=bi(t,Wr(e/Or(t)));return br(t)?Zi(Ir(n),0,e).join(""):n.slice(0,e)}function ws(e){return function(t,r,s){return s&&"number"!=typeof s&&Hs(t,r,s)&&(r=s=i),t=Da(t),r===i?(r=t,t=0):r=Da(r),function(e,t,r,i){for(var s=-1,o=Vr(Wr((t-e)/(r||1)),0),a=n(o);o--;)a[i?o:++s]=e,e+=r;return a}(t,r,s=s===i?t<r?1:-1:Da(s),e)}}function ys(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Ma(t),r=Ma(r)),e(t,r)}}function ks(e,t,r,n,s,o,a,u,c,l){var f=t&w;t|=f?k:E,(t&=~(f?E:k))&m||(t&=~(g|v));var h=[e,t,s,f?o:i,f?a:i,f?i:o,f?i:a,u,c,l],d=r.apply(i,h);return Zs(e)&&ro(d,h),d.placeholder=n,so(d,e,t)}function Es(e){var t=et[e];return function(e,r){if(e=Ma(e),r=null==r?0:Gr(Ba(r),292)){var n=(Va(e)+"e").split("e");return+((n=(Va(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var bs=en&&1/Cr(new en([,-0]))[1]==N?function(e){return new en(e)}:ju;function Ss(e){return function(t){var r=$s(t);return r==Z?Sr(t):r==te?Ar(t):function(e,t){return Yt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ts(e,t,r,s,o,u,c,f){var h=t&v;if(!h&&"function"!=typeof e)throw new it(a);var d=s?s.length:0;if(d||(t&=~(k|E),s=o=i),c=c===i?c:Vr(Ba(c),0),f=f===i?f:Ba(f),d-=o?o.length:0,t&E){var p=s,_=o;s=o=i}var T=h?i:Ls(e),R=[e,t,r,s,o,p,_,u,c,f];if(T&&function(e,t){var r=e[1],n=t[1],i=r|n,s=i<(g|v|b),o=n==b&&r==w||n==b&&r==S&&e[7].length<=t[8]||n==(b|S)&&t[7].length<=t[8]&&r==w;if(!s&&!o)return e;n&g&&(e[2]=t[2],i|=r&g?0:m);var a=t[3];if(a){var u=e[3];e[3]=u?ts(u,a,t[4]):a,e[4]=u?Rr(e[3],l):t[4]}(a=t[5])&&(u=e[5],e[5]=u?rs(u,a,t[6]):a,e[6]=u?Rr(e[5],l):t[6]),(a=t[7])&&(e[7]=a),n&b&&(e[8]=null==e[8]?t[8]:Gr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(R,T),e=R[0],t=R[1],r=R[2],s=R[3],o=R[4],!(f=R[9]=R[9]===i?h?0:e.length:Vr(R[9]-d,0))&&t&(w|y)&&(t&=~(w|y)),t&&t!=g)x=t==w||t==y?function(e,t,r){var s=fs(e);return function o(){for(var a=arguments.length,u=n(a),c=a,l=js(o);c--;)u[c]=arguments[c];var f=a<3&&u[0]!==l&&u[a-1]!==l?[]:Rr(u,l);return(a-=f.length)<r?ks(e,t,ps,o.placeholder,i,u,f,i,i,r-a):zt(this&&this!==Nt&&this instanceof o?s:e,this,u)}}(e,t,f):t!=k&&t!=(g|k)||o.length?ps.apply(i,R):function(e,t,r,i){var s=t&g,o=fs(e);return function t(){for(var a=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),h=this&&this!==Nt&&this instanceof t?o:e;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++a];return zt(h,s?r:this,f)}}(e,t,r,s);else var x=function(e,t,r){var n=t&g,i=fs(e);return function t(){return(this&&this!==Nt&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return so((T?Ci:ro)(x,R),e,t)}function Rs(e,t,r,n){return e===i||da(e,at[r])&&!lt.call(n,r)?t:e}function xs(e,t,r,n,s,o){return xa(e)&&xa(t)&&(o.set(t,e),gi(e,t,i,xs,o),o.delete(t)),e}function Cs(e){return Ia(e)?i:e}function As(e,t,r,n,s,o){var a=r&p,u=e.length,c=t.length;if(u!=c&&!(a&&c>u))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var f=-1,h=!0,d=r&_?new En:i;for(o.set(e,t),o.set(t,e);++f<u;){var g=e[f],v=t[f];if(n)var m=a?n(v,g,f,t,e,o):n(g,v,f,e,t,o);if(m!==i){if(m)continue;h=!1;break}if(d){if(!rr(t,function(e,t){if(!vr(d,t)&&(g===e||s(g,e,r,n,o)))return d.push(t)})){h=!1;break}}else if(g!==v&&!s(g,v,r,n,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Os(e){return io(eo(e,i,mo),e+"")}function Is(e){return Yn(e,iu,Ds)}function Ns(e){return Yn(e,su,Bs)}var Ls=nn?function(e){return nn.get(e)}:ju;function Fs(e){for(var t=e.name+"",r=sn[t],n=lt.call(sn,t)?r.length:0;n--;){var i=r[n],s=i.func;if(null==s||s==e)return i.name}return t}function js(e){return(lt.call(pn,"placeholder")?pn:e).placeholder}function Ps(){var e=pn.iteratee||Iu;return e=e===Iu?ci:e,arguments.length?e(arguments[0],arguments[1]):e}function Us(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Ws(e){for(var t=iu(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Ys(i)]}return t}function qs(e,t){var r=function(e,t){return null==e?i:e[t]}(e,t);return ui(r)?r:i}var Ds=Dr?function(e){return null==e?[]:(e=tt(e),Zt(Dr(e),function(t){return Ft.call(e,t)}))}:$u,Bs=Dr?function(e){for(var t=[];e;)Xt(t,Ds(e)),e=It(e);return t}:$u,$s=Xn;function Ms(e,t,r){for(var n=-1,i=(t=Hi(t,e)).length,s=!1;++n<i;){var o=co(t[n]);if(!(s=null!=e&&r(e,o)))break;e=e[o]}return s||++n!=i?s:!!(i=null==e?0:e.length)&&Ra(i)&&Gs(o,i)&&(va(e)||ga(e))}function zs(e){return"function"!=typeof e.constructor||Ks(e)?{}:_n(It(e))}function Vs(e){return va(e)||ga(e)||!!(Ut&&e&&e[Ut])}function Gs(e,t){var r=typeof e;return!!(t=null==t?L:t)&&("number"==r||"symbol"!=r&&He.test(e))&&e>-1&&e%1==0&&e<t}function Hs(e,t,r){if(!xa(r))return!1;var n=typeof t;return!!("number"==n?wa(r)&&Gs(t,r.length):"string"==n&&t in r)&&da(r[t],e)}function Js(e,t){if(va(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ja(e))||Ae.test(e)||!Ce.test(e)||null!=t&&e in tt(t)}function Zs(e){var t=Fs(e),r=pn[t];if("function"!=typeof r||!(t in mn.prototype))return!1;if(e===r)return!0;var n=Ls(r);return!!n&&e===n[0]}(Kr&&$s(new Kr(new ArrayBuffer(1)))!=ue||Yr&&$s(new Yr)!=Z||Xr&&"[object Promise]"!=$s(Xr.resolve())||en&&$s(new en)!=te||tn&&$s(new tn)!=se)&&($s=function(e){var t=Xn(e),r=t==Y?e.constructor:i,n=r?lo(r):"";if(n)switch(n){case on:return ue;case an:return Z;case un:return"[object Promise]";case cn:return te;case ln:return se}return t});var Qs=ut?Sa:Mu;function Ks(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||at)}function Ys(e){return e==e&&!xa(e)}function Xs(e,t){return function(r){return null!=r&&r[e]===t&&(t!==i||e in tt(r))}}function eo(e,t,r){return t=Vr(t===i?e.length-1:t,0),function(){for(var i=arguments,s=-1,o=Vr(i.length-t,0),a=n(o);++s<o;)a[s]=i[t+s];s=-1;for(var u=n(t+1);++s<t;)u[s]=i[s];return u[t]=r(a),zt(e,this,u)}}function to(e,t){return t.length<2?e:Kn(e,Ii(t,0,-1))}var ro=oo(Ci),no=Ur||function(e,t){return Nt.setTimeout(e,t)},io=oo(Ai);function so(e,t,r){var n=t+"";return io(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Pe,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Gt(q,function(r){var n="_."+r[0];t&r[1]&&!Qt(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match(Ue);return t?t[1].split(We):[]}(n),r)))}function oo(e){var t=0,r=0;return function(){var n=Hr(),s=A-(n-r);if(r=n,s>0){if(++t>=C)return arguments[0]}else t=0;return e.apply(i,arguments)}}function ao(e,t){var r=-1,n=e.length,s=n-1;for(t=t===i?n:t;++r<t;){var o=Ei(r,s),a=e[o];e[o]=e[r],e[r]=a}return e.length=t,e}var uo=function(e){var t=aa(e,function(e){return r.size===c&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Oe,function(e,r,n,i){t.push(n?i.replace(De,"$1"):r||e)}),t});function co(e){if("string"==typeof e||ja(e))return e;var t=e+"";return"0"==t&&1/e==-N?"-0":t}function lo(e){if(null!=e){try{return ct.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function fo(e){if(e instanceof mn)return e.clone();var t=new vn(e.__wrapped__,e.__chain__);return t.__actions__=ns(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ho=Si(function(e,t){return ya(e)?qn(e,Vn(t,1,ya,!0)):[]}),po=Si(function(e,t){var r=bo(t);return ya(r)&&(r=i),ya(e)?qn(e,Vn(t,1,ya,!0),Ps(r,2)):[]}),_o=Si(function(e,t){var r=bo(t);return ya(r)&&(r=i),ya(e)?qn(e,Vn(t,1,ya,!0),i,r):[]});function go(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:Ba(r);return i<0&&(i=Vr(n+i,0)),sr(e,Ps(t,3),i)}function vo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=n-1;return r!==i&&(s=Ba(r),s=r<0?Vr(n+s,0):Gr(s,n-1)),sr(e,Ps(t,3),s,!0)}function mo(e){return null!=e&&e.length?Vn(e,1):[]}function wo(e){return e&&e.length?e[0]:i}var yo=Si(function(e){var t=Yt(e,Vi);return t.length&&t[0]===e[0]?ni(t):[]}),ko=Si(function(e){var t=bo(e),r=Yt(e,Vi);return t===bo(r)?t=i:r.pop(),r.length&&r[0]===e[0]?ni(r,Ps(t,2)):[]}),Eo=Si(function(e){var t=bo(e),r=Yt(e,Vi);return(t="function"==typeof t?t:i)&&r.pop(),r.length&&r[0]===e[0]?ni(r,i,t):[]});function bo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var So=Si(To);function To(e,t){return e&&e.length&&t&&t.length?yi(e,t):e}var Ro=Os(function(e,t){var r=null==e?0:e.length,n=Fn(e,t);return ki(e,Yt(t,function(e){return Gs(e,r)?+e:e}).sort(es)),n});function xo(e){return null==e?e:Qr.call(e)}var Co=Si(function(e){return Wi(Vn(e,1,ya,!0))}),Ao=Si(function(e){var t=bo(e);return ya(t)&&(t=i),Wi(Vn(e,1,ya,!0),Ps(t,2))}),Oo=Si(function(e){var t=bo(e);return t="function"==typeof t?t:i,Wi(Vn(e,1,ya,!0),i,t)});function Io(e){if(!e||!e.length)return[];var t=0;return e=Zt(e,function(e){if(ya(e))return t=Vr(e.length,t),!0}),pr(t,function(t){return Yt(e,lr(t))})}function No(e,t){if(!e||!e.length)return[];var r=Io(e);return null==t?r:Yt(r,function(e){return zt(t,i,e)})}var Lo=Si(function(e,t){return ya(e)?qn(e,t):[]}),Fo=Si(function(e){return Mi(Zt(e,ya))}),jo=Si(function(e){var t=bo(e);return ya(t)&&(t=i),Mi(Zt(e,ya),Ps(t,2))}),Po=Si(function(e){var t=bo(e);return t="function"==typeof t?t:i,Mi(Zt(e,ya),i,t)}),Uo=Si(Io);var Wo=Si(function(e){var t=e.length,r=t>1?e[t-1]:i;return No(e,r="function"==typeof r?(e.pop(),r):i)});function qo(e){var t=pn(e);return t.__chain__=!0,t}function Do(e,t){return t(e)}var Bo=Os(function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,s=function(t){return Fn(t,e)};return!(t>1||this.__actions__.length)&&n instanceof mn&&Gs(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:Do,args:[s],thisArg:i}),new vn(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(s)});var $o=ss(function(e,t,r){lt.call(e,r)?++e[r]:Ln(e,r,1)});var Mo=hs(go),zo=hs(vo);function Vo(e,t){return(va(e)?Gt:Dn)(e,Ps(t,3))}function Go(e,t){return(va(e)?Ht:Bn)(e,Ps(t,3))}var Ho=ss(function(e,t,r){lt.call(e,r)?e[r].push(t):Ln(e,r,[t])});var Jo=Si(function(e,t,r){var i=-1,s="function"==typeof t,o=wa(e)?n(e.length):[];return Dn(e,function(e){o[++i]=s?zt(t,e,r):ii(e,t,r)}),o}),Zo=ss(function(e,t,r){Ln(e,r,t)});function Qo(e,t){return(va(e)?Yt:di)(e,Ps(t,3))}var Ko=ss(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});var Yo=Si(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Hs(e,t[0],t[1])?t=[]:r>2&&Hs(t[0],t[1],t[2])&&(t=[t[0]]),mi(e,Vn(t,1),[])}),Xo=Pr||function(){return Nt.Date.now()};function ea(e,t,r){return t=r?i:t,t=e&&null==t?e.length:t,Ts(e,b,i,i,i,i,t)}function ta(e,t){var r;if("function"!=typeof t)throw new it(a);return e=Ba(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=i),r}}var ra=Si(function(e,t,r){var n=g;if(r.length){var i=Rr(r,js(ra));n|=k}return Ts(e,n,t,r,i)}),na=Si(function(e,t,r){var n=g|v;if(r.length){var i=Rr(r,js(na));n|=k}return Ts(t,n,e,r,i)});function ia(e,t,r){var n,s,o,u,c,l,f=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new it(a);function _(t){var r=n,o=s;return n=s=i,f=t,u=e.apply(o,r)}function g(e){var r=e-l;return l===i||r>=t||r<0||d&&e-f>=o}function v(){var e=Xo();if(g(e))return m(e);c=no(v,function(e){var r=t-(e-l);return d?Gr(r,o-(e-f)):r}(e))}function m(e){return c=i,p&&n?_(e):(n=s=i,u)}function w(){var e=Xo(),r=g(e);if(n=arguments,s=this,l=e,r){if(c===i)return function(e){return f=e,c=no(v,t),h?_(e):u}(l);if(d)return c=no(v,t),_(l)}return c===i&&(c=no(v,t)),u}return t=Ma(t)||0,xa(r)&&(h=!!r.leading,o=(d="maxWait"in r)?Vr(Ma(r.maxWait)||0,t):o,p="trailing"in r?!!r.trailing:p),w.cancel=function(){c!==i&&Qi(c),f=0,n=l=s=c=i},w.flush=function(){return c===i?u:m(Xo())},w}var sa=Si(function(e,t){return Wn(e,1,t)}),oa=Si(function(e,t,r){return Wn(e,Ma(t)||0,r)});function aa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new it(a);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(aa.Cache||kn),r}function ua(e){if("function"!=typeof e)throw new it(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}aa.Cache=kn;var ca=Ji(function(e,t){var r=(t=1==t.length&&va(t[0])?Yt(t[0],_r(Ps())):Yt(Vn(t,1),_r(Ps()))).length;return Si(function(n){for(var i=-1,s=Gr(n.length,r);++i<s;)n[i]=t[i].call(this,n[i]);return zt(e,this,n)})}),la=Si(function(e,t){var r=Rr(t,js(la));return Ts(e,k,i,t,r)}),fa=Si(function(e,t){var r=Rr(t,js(fa));return Ts(e,E,i,t,r)}),ha=Os(function(e,t){return Ts(e,S,i,i,i,t)});function da(e,t){return e===t||e!=e&&t!=t}var pa=ys(ei),_a=ys(function(e,t){return e>=t}),ga=si(function(){return arguments}())?si:function(e){return Ca(e)&&lt.call(e,"callee")&&!Ft.call(e,"callee")},va=n.isArray,ma=Wt?_r(Wt):function(e){return Ca(e)&&Xn(e)==ae};function wa(e){return null!=e&&Ra(e.length)&&!Sa(e)}function ya(e){return Ca(e)&&wa(e)}var ka=Br||Mu,Ea=qt?_r(qt):function(e){return Ca(e)&&Xn(e)==z};function ba(e){if(!Ca(e))return!1;var t=Xn(e);return t==G||t==V||"string"==typeof e.message&&"string"==typeof e.name&&!Ia(e)}function Sa(e){if(!xa(e))return!1;var t=Xn(e);return t==H||t==J||t==$||t==X}function Ta(e){return"number"==typeof e&&e==Ba(e)}function Ra(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=L}function xa(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ca(e){return null!=e&&"object"==typeof e}var Aa=Dt?_r(Dt):function(e){return Ca(e)&&$s(e)==Z};function Oa(e){return"number"==typeof e||Ca(e)&&Xn(e)==Q}function Ia(e){if(!Ca(e)||Xn(e)!=Y)return!1;var t=It(e);if(null===t)return!0;var r=lt.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&ct.call(r)==pt}var Na=Bt?_r(Bt):function(e){return Ca(e)&&Xn(e)==ee};var La=$t?_r($t):function(e){return Ca(e)&&$s(e)==te};function Fa(e){return"string"==typeof e||!va(e)&&Ca(e)&&Xn(e)==re}function ja(e){return"symbol"==typeof e||Ca(e)&&Xn(e)==ne}var Pa=Mt?_r(Mt):function(e){return Ca(e)&&Ra(e.length)&&!!Tt[Xn(e)]};var Ua=ys(hi),Wa=ys(function(e,t){return e<=t});function qa(e){if(!e)return[];if(wa(e))return Fa(e)?Ir(e):ns(e);if(nr&&e[nr])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[nr]());var t=$s(e);return(t==Z?Sr:t==te?Cr:du)(e)}function Da(e){return e?(e=Ma(e))===N||e===-N?(e<0?-1:1)*F:e==e?e:0:0===e?e:0}function Ba(e){var t=Da(e),r=t%1;return t==t?r?t-r:t:0}function $a(e){return e?jn(Ba(e),0,P):0}function Ma(e){if("number"==typeof e)return e;if(ja(e))return j;if(xa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=xa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Le,"");var r=ze.test(e);return r||Ge.test(e)?At(e.slice(2),r?2:8):Me.test(e)?j:+e}function za(e){return is(e,su(e))}function Va(e){return null==e?"":Ui(e)}var Ga=os(function(e,t){if(Ks(t)||wa(t))is(t,iu(t),e);else for(var r in t)lt.call(t,r)&&An(e,r,t[r])}),Ha=os(function(e,t){is(t,su(t),e)}),Ja=os(function(e,t,r,n){is(t,su(t),e,n)}),Za=os(function(e,t,r,n){is(t,iu(t),e,n)}),Qa=Os(Fn);var Ka=Si(function(e,t){e=tt(e);var r=-1,n=t.length,s=n>2?t[2]:i;for(s&&Hs(t[0],t[1],s)&&(n=1);++r<n;)for(var o=t[r],a=su(o),u=-1,c=a.length;++u<c;){var l=a[u],f=e[l];(f===i||da(f,at[l])&&!lt.call(e,l))&&(e[l]=o[l])}return e}),Ya=Si(function(e){return e.push(i,xs),zt(au,i,e)});function Xa(e,t,r){var n=null==e?i:Kn(e,t);return n===i?r:n}function eu(e,t){return null!=e&&Ms(e,t,ri)}var tu=_s(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),e[t]=r},xu(Ou)),ru=_s(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),lt.call(e,t)?e[t].push(r):e[t]=[r]},Ps),nu=Si(ii);function iu(e){return wa(e)?Sn(e):li(e)}function su(e){return wa(e)?Sn(e,!0):fi(e)}var ou=os(function(e,t,r){gi(e,t,r)}),au=os(function(e,t,r,n){gi(e,t,r,n)}),uu=Os(function(e,t){var r={};if(null==e)return r;var n=!1;t=Yt(t,function(t){return t=Hi(t,e),n||(n=t.length>1),t}),is(e,Ns(e),r),n&&(r=Pn(r,f|h|d,Cs));for(var i=t.length;i--;)qi(r,t[i]);return r});var cu=Os(function(e,t){return null==e?{}:function(e,t){return wi(e,t,function(t,r){return eu(e,r)})}(e,t)});function lu(e,t){if(null==e)return{};var r=Yt(Ns(e),function(e){return[e]});return t=Ps(t),wi(e,r,function(e,r){return t(e,r[0])})}var fu=Ss(iu),hu=Ss(su);function du(e){return null==e?[]:gr(e,iu(e))}var pu=ls(function(e,t,r){return t=t.toLowerCase(),e+(r?_u(t):t)});function _u(e){return bu(Va(e).toLowerCase())}function gu(e){return(e=Va(e))&&e.replace(Je,yr).replace(mt,"")}var vu=ls(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),mu=ls(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),wu=cs("toLowerCase");var yu=ls(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});var ku=ls(function(e,t,r){return e+(r?" ":"")+bu(t)});var Eu=ls(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),bu=cs("toUpperCase");function Su(e,t,r){return e=Va(e),(t=r?i:t)===i?function(e){return Et.test(e)}(e)?function(e){return e.match(yt)||[]}(e):function(e){return e.match(qe)||[]}(e):e.match(t)||[]}var Tu=Si(function(e,t){try{return zt(e,i,t)}catch(e){return ba(e)?e:new Ye(e)}}),Ru=Os(function(e,t){return Gt(t,function(t){t=co(t),Ln(e,t,ra(e[t],e))}),e});function xu(e){return function(){return e}}var Cu=ds(),Au=ds(!0);function Ou(e){return e}function Iu(e){return ci("function"==typeof e?e:Pn(e,f))}var Nu=Si(function(e,t){return function(r){return ii(r,e,t)}}),Lu=Si(function(e,t){return function(r){return ii(e,r,t)}});function Fu(e,t,r){var n=iu(t),i=Qn(t,n);null!=r||xa(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=Qn(t,iu(t)));var s=!(xa(r)&&"chain"in r&&!r.chain),o=Sa(e);return Gt(i,function(r){var n=t[r];e[r]=n,o&&(e.prototype[r]=function(){var t=this.__chain__;if(s||t){var r=e(this.__wrapped__);return(r.__actions__=ns(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Xt([this.value()],arguments))})}),e}function ju(){}var Pu=vs(Yt),Uu=vs(Jt),Wu=vs(rr);function qu(e){return Js(e)?lr(co(e)):function(e){return function(t){return Kn(t,e)}}(e)}var Du=ws(),Bu=ws(!0);function $u(){return[]}function Mu(){return!1}var zu=gs(function(e,t){return e+t},0),Vu=Es("ceil"),Gu=gs(function(e,t){return e/t},1),Hu=Es("floor");var Ju,Zu=gs(function(e,t){return e*t},1),Qu=Es("round"),Ku=gs(function(e,t){return e-t},0);return pn.after=function(e,t){if("function"!=typeof t)throw new it(a);return e=Ba(e),function(){if(--e<1)return t.apply(this,arguments)}},pn.ary=ea,pn.assign=Ga,pn.assignIn=Ha,pn.assignInWith=Ja,pn.assignWith=Za,pn.at=Qa,pn.before=ta,pn.bind=ra,pn.bindAll=Ru,pn.bindKey=na,pn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return va(e)?e:[e]},pn.chain=qo,pn.chunk=function(e,t,r){t=(r?Hs(e,t,r):t===i)?1:Vr(Ba(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var o=0,a=0,u=n(Wr(s/t));o<s;)u[a++]=Ii(e,o,o+=t);return u},pn.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var s=e[t];s&&(i[n++]=s)}return i},pn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Xt(va(r)?ns(r):[r],Vn(t,1))},pn.cond=function(e){var t=null==e?0:e.length,r=Ps();return e=t?Yt(e,function(e){if("function"!=typeof e[1])throw new it(a);return[r(e[0]),e[1]]}):[],Si(function(r){for(var n=-1;++n<t;){var i=e[n];if(zt(i[0],this,r))return zt(i[1],this,r)}})},pn.conforms=function(e){return function(e){var t=iu(e);return function(r){return Un(r,e,t)}}(Pn(e,f))},pn.constant=xu,pn.countBy=$o,pn.create=function(e,t){var r=_n(e);return null==t?r:Nn(r,t)},pn.curry=function e(t,r,n){var s=Ts(t,w,i,i,i,i,i,r=n?i:r);return s.placeholder=e.placeholder,s},pn.curryRight=function e(t,r,n){var s=Ts(t,y,i,i,i,i,i,r=n?i:r);return s.placeholder=e.placeholder,s},pn.debounce=ia,pn.defaults=Ka,pn.defaultsDeep=Ya,pn.defer=sa,pn.delay=oa,pn.difference=ho,pn.differenceBy=po,pn.differenceWith=_o,pn.drop=function(e,t,r){var n=null==e?0:e.length;return n?Ii(e,(t=r||t===i?1:Ba(t))<0?0:t,n):[]},pn.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?Ii(e,0,(t=n-(t=r||t===i?1:Ba(t)))<0?0:t):[]},pn.dropRightWhile=function(e,t){return e&&e.length?Bi(e,Ps(t,3),!0,!0):[]},pn.dropWhile=function(e,t){return e&&e.length?Bi(e,Ps(t,3),!0):[]},pn.fill=function(e,t,r,n){var s=null==e?0:e.length;return s?(r&&"number"!=typeof r&&Hs(e,t,r)&&(r=0,n=s),function(e,t,r,n){var s=e.length;for((r=Ba(r))<0&&(r=-r>s?0:s+r),(n=n===i||n>s?s:Ba(n))<0&&(n+=s),n=r>n?0:$a(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},pn.filter=function(e,t){return(va(e)?Zt:zn)(e,Ps(t,3))},pn.flatMap=function(e,t){return Vn(Qo(e,t),1)},pn.flatMapDeep=function(e,t){return Vn(Qo(e,t),N)},pn.flatMapDepth=function(e,t,r){return r=r===i?1:Ba(r),Vn(Qo(e,t),r)},pn.flatten=mo,pn.flattenDeep=function(e){return null!=e&&e.length?Vn(e,N):[]},pn.flattenDepth=function(e,t){return null!=e&&e.length?Vn(e,t=t===i?1:Ba(t)):[]},pn.flip=function(e){return Ts(e,T)},pn.flow=Cu,pn.flowRight=Au,pn.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},pn.functions=function(e){return null==e?[]:Qn(e,iu(e))},pn.functionsIn=function(e){return null==e?[]:Qn(e,su(e))},pn.groupBy=Ho,pn.initial=function(e){return null!=e&&e.length?Ii(e,0,-1):[]},pn.intersection=yo,pn.intersectionBy=ko,pn.intersectionWith=Eo,pn.invert=tu,pn.invertBy=ru,pn.invokeMap=Jo,pn.iteratee=Iu,pn.keyBy=Zo,pn.keys=iu,pn.keysIn=su,pn.map=Qo,pn.mapKeys=function(e,t){var r={};return t=Ps(t,3),Jn(e,function(e,n,i){Ln(r,t(e,n,i),e)}),r},pn.mapValues=function(e,t){var r={};return t=Ps(t,3),Jn(e,function(e,n,i){Ln(r,n,t(e,n,i))}),r},pn.matches=function(e){return pi(Pn(e,f))},pn.matchesProperty=function(e,t){return _i(e,Pn(t,f))},pn.memoize=aa,pn.merge=ou,pn.mergeWith=au,pn.method=Nu,pn.methodOf=Lu,pn.mixin=Fu,pn.negate=ua,pn.nthArg=function(e){return e=Ba(e),Si(function(t){return vi(t,e)})},pn.omit=uu,pn.omitBy=function(e,t){return lu(e,ua(Ps(t)))},pn.once=function(e){return ta(2,e)},pn.orderBy=function(e,t,r,n){return null==e?[]:(va(t)||(t=null==t?[]:[t]),va(r=n?i:r)||(r=null==r?[]:[r]),mi(e,t,r))},pn.over=Pu,pn.overArgs=ca,pn.overEvery=Uu,pn.overSome=Wu,pn.partial=la,pn.partialRight=fa,pn.partition=Ko,pn.pick=cu,pn.pickBy=lu,pn.property=qu,pn.propertyOf=function(e){return function(t){return null==e?i:Kn(e,t)}},pn.pull=So,pn.pullAll=To,pn.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?yi(e,t,Ps(r,2)):e},pn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?yi(e,t,i,r):e},pn.pullAt=Ro,pn.range=Du,pn.rangeRight=Bu,pn.rearg=ha,pn.reject=function(e,t){return(va(e)?Zt:zn)(e,ua(Ps(t,3)))},pn.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],s=e.length;for(t=Ps(t,3);++n<s;){var o=e[n];t(o,n,e)&&(r.push(o),i.push(n))}return ki(e,i),r},pn.rest=function(e,t){if("function"!=typeof e)throw new it(a);return Si(e,t=t===i?t:Ba(t))},pn.reverse=xo,pn.sampleSize=function(e,t,r){return t=(r?Hs(e,t,r):t===i)?1:Ba(t),(va(e)?Rn:Ri)(e,t)},pn.set=function(e,t,r){return null==e?e:xi(e,t,r)},pn.setWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:xi(e,t,r,n)},pn.shuffle=function(e){return(va(e)?xn:Oi)(e)},pn.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&Hs(e,t,r)?(t=0,r=n):(t=null==t?0:Ba(t),r=r===i?n:Ba(r)),Ii(e,t,r)):[]},pn.sortBy=Yo,pn.sortedUniq=function(e){return e&&e.length?ji(e):[]},pn.sortedUniqBy=function(e,t){return e&&e.length?ji(e,Ps(t,2)):[]},pn.split=function(e,t,r){return r&&"number"!=typeof r&&Hs(e,t,r)&&(t=r=i),(r=r===i?P:r>>>0)?(e=Va(e))&&("string"==typeof t||null!=t&&!Na(t))&&!(t=Ui(t))&&br(e)?Zi(Ir(e),0,r):e.split(t,r):[]},pn.spread=function(e,t){if("function"!=typeof e)throw new it(a);return t=null==t?0:Vr(Ba(t),0),Si(function(r){var n=r[t],i=Zi(r,0,t);return n&&Xt(i,n),zt(e,this,i)})},pn.tail=function(e){var t=null==e?0:e.length;return t?Ii(e,1,t):[]},pn.take=function(e,t,r){return e&&e.length?Ii(e,0,(t=r||t===i?1:Ba(t))<0?0:t):[]},pn.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?Ii(e,(t=n-(t=r||t===i?1:Ba(t)))<0?0:t,n):[]},pn.takeRightWhile=function(e,t){return e&&e.length?Bi(e,Ps(t,3),!1,!0):[]},pn.takeWhile=function(e,t){return e&&e.length?Bi(e,Ps(t,3)):[]},pn.tap=function(e,t){return t(e),e},pn.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new it(a);return xa(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),ia(e,t,{leading:n,maxWait:t,trailing:i})},pn.thru=Do,pn.toArray=qa,pn.toPairs=fu,pn.toPairsIn=hu,pn.toPath=function(e){return va(e)?Yt(e,co):ja(e)?[e]:ns(uo(Va(e)))},pn.toPlainObject=za,pn.transform=function(e,t,r){var n=va(e),i=n||ka(e)||Pa(e);if(t=Ps(t,4),null==r){var s=e&&e.constructor;r=i?n?new s:[]:xa(e)&&Sa(s)?_n(It(e)):{}}return(i?Gt:Jn)(e,function(e,n,i){return t(r,e,n,i)}),r},pn.unary=function(e){return ea(e,1)},pn.union=Co,pn.unionBy=Ao,pn.unionWith=Oo,pn.uniq=function(e){return e&&e.length?Wi(e):[]},pn.uniqBy=function(e,t){return e&&e.length?Wi(e,Ps(t,2)):[]},pn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?Wi(e,i,t):[]},pn.unset=function(e,t){return null==e||qi(e,t)},pn.unzip=Io,pn.unzipWith=No,pn.update=function(e,t,r){return null==e?e:Di(e,t,Gi(r))},pn.updateWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:Di(e,t,Gi(r),n)},pn.values=du,pn.valuesIn=function(e){return null==e?[]:gr(e,su(e))},pn.without=Lo,pn.words=Su,pn.wrap=function(e,t){return la(Gi(t),e)},pn.xor=Fo,pn.xorBy=jo,pn.xorWith=Po,pn.zip=Uo,pn.zipObject=function(e,t){return zi(e||[],t||[],An)},pn.zipObjectDeep=function(e,t){return zi(e||[],t||[],xi)},pn.zipWith=Wo,pn.entries=fu,pn.entriesIn=hu,pn.extend=Ha,pn.extendWith=Ja,Fu(pn,pn),pn.add=zu,pn.attempt=Tu,pn.camelCase=pu,pn.capitalize=_u,pn.ceil=Vu,pn.clamp=function(e,t,r){return r===i&&(r=t,t=i),r!==i&&(r=(r=Ma(r))==r?r:0),t!==i&&(t=(t=Ma(t))==t?t:0),jn(Ma(e),t,r)},pn.clone=function(e){return Pn(e,d)},pn.cloneDeep=function(e){return Pn(e,f|d)},pn.cloneDeepWith=function(e,t){return Pn(e,f|d,t="function"==typeof t?t:i)},pn.cloneWith=function(e,t){return Pn(e,d,t="function"==typeof t?t:i)},pn.conformsTo=function(e,t){return null==t||Un(e,t,iu(t))},pn.deburr=gu,pn.defaultTo=function(e,t){return null==e||e!=e?t:e},pn.divide=Gu,pn.endsWith=function(e,t,r){e=Va(e),t=Ui(t);var n=e.length,s=r=r===i?n:jn(Ba(r),0,n);return(r-=t.length)>=0&&e.slice(r,s)==t},pn.eq=da,pn.escape=function(e){return(e=Va(e))&&Se.test(e)?e.replace(Ee,kr):e},pn.escapeRegExp=function(e){return(e=Va(e))&&Ne.test(e)?e.replace(Ie,"\\$&"):e},pn.every=function(e,t,r){var n=va(e)?Jt:$n;return r&&Hs(e,t,r)&&(t=i),n(e,Ps(t,3))},pn.find=Mo,pn.findIndex=go,pn.findKey=function(e,t){return ir(e,Ps(t,3),Jn)},pn.findLast=zo,pn.findLastIndex=vo,pn.findLastKey=function(e,t){return ir(e,Ps(t,3),Zn)},pn.floor=Hu,pn.forEach=Vo,pn.forEachRight=Go,pn.forIn=function(e,t){return null==e?e:Gn(e,Ps(t,3),su)},pn.forInRight=function(e,t){return null==e?e:Hn(e,Ps(t,3),su)},pn.forOwn=function(e,t){return e&&Jn(e,Ps(t,3))},pn.forOwnRight=function(e,t){return e&&Zn(e,Ps(t,3))},pn.get=Xa,pn.gt=pa,pn.gte=_a,pn.has=function(e,t){return null!=e&&Ms(e,t,ti)},pn.hasIn=eu,pn.head=wo,pn.identity=Ou,pn.includes=function(e,t,r,n){e=wa(e)?e:du(e),r=r&&!n?Ba(r):0;var i=e.length;return r<0&&(r=Vr(i+r,0)),Fa(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&or(e,t,r)>-1},pn.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:Ba(r);return i<0&&(i=Vr(n+i,0)),or(e,t,i)},pn.inRange=function(e,t,r){return t=Da(t),r===i?(r=t,t=0):r=Da(r),function(e,t,r){return e>=Gr(t,r)&&e<Vr(t,r)}(e=Ma(e),t,r)},pn.invoke=nu,pn.isArguments=ga,pn.isArray=va,pn.isArrayBuffer=ma,pn.isArrayLike=wa,pn.isArrayLikeObject=ya,pn.isBoolean=function(e){return!0===e||!1===e||Ca(e)&&Xn(e)==M},pn.isBuffer=ka,pn.isDate=Ea,pn.isElement=function(e){return Ca(e)&&1===e.nodeType&&!Ia(e)},pn.isEmpty=function(e){if(null==e)return!0;if(wa(e)&&(va(e)||"string"==typeof e||"function"==typeof e.splice||ka(e)||Pa(e)||ga(e)))return!e.length;var t=$s(e);if(t==Z||t==te)return!e.size;if(Ks(e))return!li(e).length;for(var r in e)if(lt.call(e,r))return!1;return!0},pn.isEqual=function(e,t){return oi(e,t)},pn.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:i)?r(e,t):i;return n===i?oi(e,t,i,r):!!n},pn.isError=ba,pn.isFinite=function(e){return"number"==typeof e&&$r(e)},pn.isFunction=Sa,pn.isInteger=Ta,pn.isLength=Ra,pn.isMap=Aa,pn.isMatch=function(e,t){return e===t||ai(e,t,Ws(t))},pn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:i,ai(e,t,Ws(t),r)},pn.isNaN=function(e){return Oa(e)&&e!=+e},pn.isNative=function(e){if(Qs(e))throw new Ye(o);return ui(e)},pn.isNil=function(e){return null==e},pn.isNull=function(e){return null===e},pn.isNumber=Oa,pn.isObject=xa,pn.isObjectLike=Ca,pn.isPlainObject=Ia,pn.isRegExp=Na,pn.isSafeInteger=function(e){return Ta(e)&&e>=-L&&e<=L},pn.isSet=La,pn.isString=Fa,pn.isSymbol=ja,pn.isTypedArray=Pa,pn.isUndefined=function(e){return e===i},pn.isWeakMap=function(e){return Ca(e)&&$s(e)==se},pn.isWeakSet=function(e){return Ca(e)&&Xn(e)==oe},pn.join=function(e,t){return null==e?"":Mr.call(e,t)},pn.kebabCase=vu,pn.last=bo,pn.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=n;return r!==i&&(s=(s=Ba(r))<0?Vr(n+s,0):Gr(s,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,s):sr(e,ur,s,!0)},pn.lowerCase=mu,pn.lowerFirst=wu,pn.lt=Ua,pn.lte=Wa,pn.max=function(e){return e&&e.length?Mn(e,Ou,ei):i},pn.maxBy=function(e,t){return e&&e.length?Mn(e,Ps(t,2),ei):i},pn.mean=function(e){return cr(e,Ou)},pn.meanBy=function(e,t){return cr(e,Ps(t,2))},pn.min=function(e){return e&&e.length?Mn(e,Ou,hi):i},pn.minBy=function(e,t){return e&&e.length?Mn(e,Ps(t,2),hi):i},pn.stubArray=$u,pn.stubFalse=Mu,pn.stubObject=function(){return{}},pn.stubString=function(){return""},pn.stubTrue=function(){return!0},pn.multiply=Zu,pn.nth=function(e,t){return e&&e.length?vi(e,Ba(t)):i},pn.noConflict=function(){return Nt._===this&&(Nt._=_t),this},pn.noop=ju,pn.now=Xo,pn.pad=function(e,t,r){e=Va(e);var n=(t=Ba(t))?Or(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return ms(qr(i),r)+e+ms(Wr(i),r)},pn.padEnd=function(e,t,r){e=Va(e);var n=(t=Ba(t))?Or(e):0;return t&&n<t?e+ms(t-n,r):e},pn.padStart=function(e,t,r){e=Va(e);var n=(t=Ba(t))?Or(e):0;return t&&n<t?ms(t-n,r)+e:e},pn.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),Jr(Va(e).replace(Fe,""),t||0)},pn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&Hs(e,t,r)&&(t=r=i),r===i&&("boolean"==typeof t?(r=t,t=i):"boolean"==typeof e&&(r=e,e=i)),e===i&&t===i?(e=0,t=1):(e=Da(e),t===i?(t=e,e=0):t=Da(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var s=Zr();return Gr(e+s*(t-e+Ct("1e-"+((s+"").length-1))),t)}return Ei(e,t)},pn.reduce=function(e,t,r){var n=va(e)?er:hr,i=arguments.length<3;return n(e,Ps(t,4),r,i,Dn)},pn.reduceRight=function(e,t,r){var n=va(e)?tr:hr,i=arguments.length<3;return n(e,Ps(t,4),r,i,Bn)},pn.repeat=function(e,t,r){return t=(r?Hs(e,t,r):t===i)?1:Ba(t),bi(Va(e),t)},pn.replace=function(){var e=arguments,t=Va(e[0]);return e.length<3?t:t.replace(e[1],e[2])},pn.result=function(e,t,r){var n=-1,s=(t=Hi(t,e)).length;for(s||(s=1,e=i);++n<s;){var o=null==e?i:e[co(t[n])];o===i&&(n=s,o=r),e=Sa(o)?o.call(e):o}return e},pn.round=Qu,pn.runInContext=e,pn.sample=function(e){return(va(e)?Tn:Ti)(e)},pn.size=function(e){if(null==e)return 0;if(wa(e))return Fa(e)?Or(e):e.length;var t=$s(e);return t==Z||t==te?e.size:li(e).length},pn.snakeCase=yu,pn.some=function(e,t,r){var n=va(e)?rr:Ni;return r&&Hs(e,t,r)&&(t=i),n(e,Ps(t,3))},pn.sortedIndex=function(e,t){return Li(e,t)},pn.sortedIndexBy=function(e,t,r){return Fi(e,t,Ps(r,2))},pn.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=Li(e,t);if(n<r&&da(e[n],t))return n}return-1},pn.sortedLastIndex=function(e,t){return Li(e,t,!0)},pn.sortedLastIndexBy=function(e,t,r){return Fi(e,t,Ps(r,2),!0)},pn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=Li(e,t,!0)-1;if(da(e[r],t))return r}return-1},pn.startCase=ku,pn.startsWith=function(e,t,r){return e=Va(e),r=null==r?0:jn(Ba(r),0,e.length),t=Ui(t),e.slice(r,r+t.length)==t},pn.subtract=Ku,pn.sum=function(e){return e&&e.length?dr(e,Ou):0},pn.sumBy=function(e,t){return e&&e.length?dr(e,Ps(t,2)):0},pn.template=function(e,t,r){var n=pn.templateSettings;r&&Hs(e,t,r)&&(t=i),e=Va(e),t=Ja({},t,n,Rs);var s,o,a=Ja({},t.imports,n.imports,Rs),u=iu(a),c=gr(a,u),l=0,f=t.interpolate||Ze,h="__p += '",d=rt((t.escape||Ze).source+"|"+f.source+"|"+(f===xe?Be:Ze).source+"|"+(t.evaluate||Ze).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++St+"]")+"\n";e.replace(d,function(t,r,n,i,a,u){return n||(n=i),h+=e.slice(l,u).replace(Qe,Er),r&&(s=!0,h+="' +\n__e("+r+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),h+="';\n";var _=t.variable;_||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(me,""):h).replace(we,"$1").replace(ye,"$1;"),h="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Tu(function(){return Xe(u,p+"return "+h).apply(i,c)});if(g.source=h,ba(g))throw g;return g},pn.times=function(e,t){if((e=Ba(e))<1||e>L)return[];var r=P,n=Gr(e,P);t=Ps(t),e-=P;for(var i=pr(n,t);++r<e;)t(r);return i},pn.toFinite=Da,pn.toInteger=Ba,pn.toLength=$a,pn.toLower=function(e){return Va(e).toLowerCase()},pn.toNumber=Ma,pn.toSafeInteger=function(e){return e?jn(Ba(e),-L,L):0===e?e:0},pn.toString=Va,pn.toUpper=function(e){return Va(e).toUpperCase()},pn.trim=function(e,t,r){if((e=Va(e))&&(r||t===i))return e.replace(Le,"");if(!e||!(t=Ui(t)))return e;var n=Ir(e),s=Ir(t);return Zi(n,mr(n,s),wr(n,s)+1).join("")},pn.trimEnd=function(e,t,r){if((e=Va(e))&&(r||t===i))return e.replace(je,"");if(!e||!(t=Ui(t)))return e;var n=Ir(e);return Zi(n,0,wr(n,Ir(t))+1).join("")},pn.trimStart=function(e,t,r){if((e=Va(e))&&(r||t===i))return e.replace(Fe,"");if(!e||!(t=Ui(t)))return e;var n=Ir(e);return Zi(n,mr(n,Ir(t))).join("")},pn.truncate=function(e,t){var r=R,n=x;if(xa(t)){var s="separator"in t?t.separator:s;r="length"in t?Ba(t.length):r,n="omission"in t?Ui(t.omission):n}var o=(e=Va(e)).length;if(br(e)){var a=Ir(e);o=a.length}if(r>=o)return e;var u=r-Or(n);if(u<1)return n;var c=a?Zi(a,0,u).join(""):e.slice(0,u);if(s===i)return c+n;if(a&&(u+=c.length-u),Na(s)){if(e.slice(u).search(s)){var l,f=c;for(s.global||(s=rt(s.source,Va($e.exec(s))+"g")),s.lastIndex=0;l=s.exec(f);)var h=l.index;c=c.slice(0,h===i?u:h)}}else if(e.indexOf(Ui(s),u)!=u){var d=c.lastIndexOf(s);d>-1&&(c=c.slice(0,d))}return c+n},pn.unescape=function(e){return(e=Va(e))&&be.test(e)?e.replace(ke,Nr):e},pn.uniqueId=function(e){var t=++ft;return Va(e)+t},pn.upperCase=Eu,pn.upperFirst=bu,pn.each=Vo,pn.eachRight=Go,pn.first=wo,Fu(pn,(Ju={},Jn(pn,function(e,t){lt.call(pn.prototype,t)||(Ju[t]=e)}),Ju),{chain:!1}),pn.VERSION="4.17.5",Gt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){pn[e].placeholder=pn}),Gt(["drop","take"],function(e,t){mn.prototype[e]=function(r){r=r===i?1:Vr(Ba(r),0);var n=this.__filtered__&&!t?new mn(this):this.clone();return n.__filtered__?n.__takeCount__=Gr(r,n.__takeCount__):n.__views__.push({size:Gr(r,P),type:e+(n.__dir__<0?"Right":"")}),n},mn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Gt(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r==O||3==r;mn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ps(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),Gt(["head","last"],function(e,t){var r="take"+(t?"Right":"");mn.prototype[e]=function(){return this[r](1).value()[0]}}),Gt(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");mn.prototype[e]=function(){return this.__filtered__?new mn(this):this[r](1)}}),mn.prototype.compact=function(){return this.filter(Ou)},mn.prototype.find=function(e){return this.filter(e).head()},mn.prototype.findLast=function(e){return this.reverse().find(e)},mn.prototype.invokeMap=Si(function(e,t){return"function"==typeof e?new mn(this):this.map(function(r){return ii(r,e,t)})}),mn.prototype.reject=function(e){return this.filter(ua(Ps(e)))},mn.prototype.slice=function(e,t){e=Ba(e);var r=this;return r.__filtered__&&(e>0||t<0)?new mn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==i&&(r=(t=Ba(t))<0?r.dropRight(-t):r.take(t-e)),r)},mn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},mn.prototype.toArray=function(){return this.take(P)},Jn(mn.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),s=pn[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);s&&(pn.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,u=t instanceof mn,c=a[0],l=u||va(t),f=function(e){var t=s.apply(pn,Xt([e],a));return n&&h?t[0]:t};l&&r&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,_=u&&!d;if(!o&&l){t=_?t:new mn(this);var g=e.apply(t,a);return g.__actions__.push({func:Do,args:[f],thisArg:i}),new vn(g,h)}return p&&_?e.apply(this,a):(g=this.thru(f),p?n?g.value()[0]:g.value():g)})}),Gt(["pop","push","shift","sort","splice","unshift"],function(e){var t=st[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);pn.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(va(i)?i:[],e)}return this[r](function(r){return t.apply(va(r)?r:[],e)})}}),Jn(mn.prototype,function(e,t){var r=pn[t];if(r){var n=r.name+"";(sn[n]||(sn[n]=[])).push({name:t,func:r})}}),sn[ps(i,v).name]=[{name:"wrapper",func:i}],mn.prototype.clone=function(){var e=new mn(this.__wrapped__);return e.__actions__=ns(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ns(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ns(this.__views__),e},mn.prototype.reverse=function(){if(this.__filtered__){var e=new mn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},mn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=va(e),n=t<0,i=r?e.length:0,s=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var s=r[n],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Gr(t,e+o);break;case"takeRight":e=Vr(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=s.start,a=s.end,u=a-o,c=n?a:o-1,l=this.__iteratees__,f=l.length,h=0,d=Gr(u,this.__takeCount__);if(!r||!n&&i==u&&d==u)return $i(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var _=-1,g=e[c+=t];++_<f;){var v=l[_],m=v.iteratee,w=v.type,y=m(g);if(w==I)g=y;else if(!y){if(w==O)continue e;break e}}p[h++]=g}return p},pn.prototype.at=Bo,pn.prototype.chain=function(){return qo(this)},pn.prototype.commit=function(){return new vn(this.value(),this.__chain__)},pn.prototype.next=function(){this.__values__===i&&(this.__values__=qa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},pn.prototype.plant=function(e){for(var t,r=this;r instanceof gn;){var n=fo(r);n.__index__=0,n.__values__=i,t?s.__wrapped__=n:t=n;var s=n;r=r.__wrapped__}return s.__wrapped__=e,t},pn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof mn){var t=e;return this.__actions__.length&&(t=new mn(this)),(t=t.reverse()).__actions__.push({func:Do,args:[xo],thisArg:i}),new vn(t,this.__chain__)}return this.thru(xo)},pn.prototype.toJSON=pn.prototype.valueOf=pn.prototype.value=function(){return $i(this.__wrapped__,this.__actions__)},pn.prototype.first=pn.prototype.head,nr&&(pn.prototype[nr]=function(){return this}),pn}();Nt._=Lr,(n=function(){return Lr}.call(t,r,t,e))===i||(e.exports=n)}).call(this)}).call(this,r(76)(e))},function(e,t,r){"use strict";r.r(t),r.d(t,"RESERVATION_STATUS_ACCEPTED",function(){return n}),r.d(t,"RESERVATION_STATUS_COMPLETED",function(){return i}),r.d(t,"RESERVATION_STATUS_REJECTED",function(){return s}),r.d(t,"RESERVATION_STATUS_WRAPPING",function(){return o}),r.d(t,"RESERVATION_INSTRUCTION_CALL",function(){return a}),r.d(t,"RESERVATION_INSTRUCTION_DEQUEUE",function(){return u}),r.d(t,"RESERVATION_INSTRUCTION_REDIRECT",function(){return c}),r.d(t,"RESERVATION_INSTRUCTION_CONFERENCE",function(){return l}),r.d(t,"TRANSFER_STATUS",function(){return f}),r.d(t,"RESERVATION_REJECT_OPTIONS",function(){return h}),r.d(t,"WORKER_UPDATE_OPTIONS",function(){return d}),r.d(t,"RESERVATION_CALL_OPTIONS",function(){return p}),r.d(t,"RESERVATION_DEQUEUE_OPTIONS",function(){return _}),r.d(t,"RESERVATION_REDIRECT_OPTIONS",function(){return g}),r.d(t,"CREATE_TASK_OPTIONS",function(){return v}),r.d(t,"TASK_STATUS_COMPLETED",function(){return m}),r.d(t,"TASK_STATUS_WRAPPING",function(){return w}),r.d(t,"reservationEventTypes",function(){return y}),r.d(t,"taskEventTypes",function(){return k}),r.d(t,"reservationToSDKEventsMapping",function(){return E}),r.d(t,"transferFields",function(){return b}),r.d(t,"TRANSFER_INITIATED",function(){return S}),r.d(t,"taskTransferEventTypes",function(){return T}),r.d(t,"taskTransferEventEmitterMapping",function(){return R}),r.d(t,"API_V1",function(){return x}),r.d(t,"API_V2",function(){return C}),r.d(t,"DEFAULT_PAGE_SIZE",function(){return A}),r.d(t,"DEFAULT_HTTP_TIMEOUT",function(){return O}),r.d(t,"EB_URL_PARAMS",function(){return I}),r.d(t,"twilioErrors",function(){return L});const n="accepted",i="completed",s="rejected",o="wrapping",a="call",u="dequeue",c="redirect",l="conference",f=Object.freeze({canceled:"canceled",complete:"complete",failed:"failed",initiated:"initiated"}),h={activitySid:"WorkerActivitySid"};Object.freeze(h);const d={rejectPendingReservations:"RejectPendingReservations"};Object.freeze(d);const p={accept:"CallAccept",record:"CallRecord",statusCallbackUrl:"CallStatusCallbackUrl",timeout:"CallTimeout",to:"CallTo"};Object.freeze(p);const _={to:"DequeueTo",from:"DequeueFrom",postWorkActivitySid:"DequeuePostWorkActivitySid",record:"DequeueRecord",timeout:"DequeueTimeout",statusCallbackUrl:"DequeueStatusCallbackUrl",statusCallbackEvents:"DequeueStatusCallbackEvents"};Object.freeze(_);const g={accept:"RedirectAccept"};Object.freeze(g);const v={taskChannelUniqueName:"TaskChannelUniqueName",taskChannelSid:"TaskChannelSid",attributes:"Attributes"},m="completed",w="wrapping",y={accepted:0,rejected:1,timeout:2,canceled:3,rescinded:4,completed:5,wrapup:6};Object.freeze(y);const k={"task.updated":"updated","task.canceled":"canceled","task.completed":"completed","task.wrapup":"wrapup"};Object.freeze(k);const E={"reservation.completed":"completed","reservation.rejected":"rejected","reservation.timeout":"timeout","reservation.canceled":"canceled","reservation.rescinded":"rescinded","reservation.accepted":"accepted","reservation.wrapup":"wrapup"};Object.freeze(E);const b=Object.freeze({taskTransfer:"task_transfer",activeOutgoingTaskTransfer:"active_outgoing_task_transfer"}),S="transfer-initiated",T={"transfer-attempt-failed":"attemptFailed","transfer-completed":"completed","transfer-failed":"failed","transfer-initiated":"transferInitiated","transfer-canceled":"canceled"};Object.freeze(T);const R={"task.transfer-attempt-failed":"transfer-attempt-failed","task.transfer-completed":"transfer-completed","task.transfer-failed":"transfer-failed","task.transfer-initiated":"transfer-initiated","task.transfer-canceled":"transfer-canceled"};Object.freeze(R);const x="v1",C="v2",A=1e3,O=5e3,I={TOKEN:"token",CLOSE_EXISTING_SESSIONS:"closeExistingSessions",CLIENT_VERSION:"clientVersion"},N=r(75),L=[{name:"INVALID_ARGUMENT",message:"One or more arguments passed were invalid."},{name:"INVALID_TOKEN",message:"The token is invalid or malformed."},{name:"TOKEN_EXPIRED",message:"Worker's active token has expired."},{name:"GATEWAY_CONNECTION_FAILED",message:"Could not connect to Twilio's servers."},{name:"GATEWAY_DISCONNECTED",message:"Connection to Twilio's servers was lost."},{name:"INVALID_GATEWAY_MESSAGE",message:"The JSON message received was malformed."},{name:"TASKROUTER_ERROR",message:"TaskRouter failed to complete the request."}].reduce((e,t)=>(e[t.name]=new N(t),e),{})},function(e,t,r){"use strict";function n(e){try{return new Date(e)}catch(e){return null}}function i(e,t){for(const r in e)if(r in t&&!t[r](e[r]))throw new TypeError(`Option key: ${r} does not meet the required type.`);return!0}r.r(t),r.d(t,"parseTime",function(){return n}),r.d(t,"validateOptions",function(){return i})},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("path")},function(e,t,r){"use strict";var n=r(24),i=r(62),s=Object.prototype.toString;function o(e){return"[object Array]"===s.call(e)}function a(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===s.call(e)}function c(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,i=arguments.length;n<i;n++)c(arguments[n],r);return t},extend:function(e,t,r){return c(t,function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return i});const n=r(1).twilioErrors;class i{constructor(e,t,r){if(!e)throw n.INVALID_ARGUMENT.clone("Error instantiating Paginator. <Array>items is a required parameter.");if(!t)throw n.INVALID_ARGUMENT.clone("Error instantiating Paginator. <Function>source is a required parameter.");this._nextToken=r,this._source=t,this.hasNextPage=!!this._nextToken,this.items=e}nextPage(){return this.hasNextPage?this._source(this._nextToken):Promise.reject(n.TASKROUTER_ERROR.clone("Error getting the next page. No next page exists."))}}},function(e,t,r){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t,r){"use strict";const n=r(70),i=r(31),s=r(14),o=r(7),a=Buffer.from([0,0,255,255]),u=Buffer.from([0]),c=Symbol("permessage-deflate"),l=Symbol("write-in-progress"),f=Symbol("pending-close"),h=Symbol("total-length"),d=Symbol("callback"),p=Symbol("buffers"),_=Symbol("error");let g;function v(e){this[p].push(e),this[h]+=e.length}function m(e){this[h]+=e.length,this[c]._maxPayload<1||this[h]<=this[c]._maxPayload?this[p].push(e):(this[_]=new RangeError("Max payload size exceeded"),this[_][o.kStatusCode]=1009,this.removeListener("data",m),this.reset())}function w(e){this[c]._inflate=null,e[o.kStatusCode]=1007,this[d](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!g){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;g=new n({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate[l]?this._inflate[f]=!0:(this._inflate.close(),this._inflate=null)),this._deflate&&(this._deflate[l]?this._deflate[f]=!0:(this._deflate.close(),this._deflate=null))}acceptAsServer(e){const t=this._options,r=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{var r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r})}),e}decompress(e,t,r){g.push(n=>{this._decompress(e,t,(e,t)=>{n(),r(e,t)})})}compress(e,t,r){g.push(n=>{this._compress(e,t,(e,t)=>{n(),r(e,t)})})}_decompress(e,t,r){const n=this._isServer?"client":"server";if(!this._inflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:t})),this._inflate[c]=this,this._inflate[h]=0,this._inflate[p]=[],this._inflate.on("error",w),this._inflate.on("data",m)}this._inflate[d]=r,this._inflate[l]=!0,this._inflate.write(e),t&&this._inflate.write(a),this._inflate.flush(()=>{const e=this._inflate[_];if(e)return this._inflate.close(),this._inflate=null,void r(e);const i=s.concat(this._inflate[p],this._inflate[h]);t&&this.params[`${n}_no_context_takeover`]||this._inflate[f]?(this._inflate.close(),this._inflate=null):(this._inflate[l]=!1,this._inflate[h]=0,this._inflate[p]=[]),r(null,i)})}_compress(e,t,r){if(!e||0===e.length)return void process.nextTick(r,null,u);const n=this._isServer?"server":"client";if(!this._deflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw(Object.assign({memLevel:this._options.memLevel,level:this._options.level},this._options.zlibDeflateOptions,{windowBits:t})),this._deflate[h]=0,this._deflate[p]=[],this._deflate.on("data",v)}this._deflate[l]=!0,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,()=>{var e=s.concat(this._deflate[p],this._deflate[h]);t&&(e=e.slice(0,e.length-4)),t&&this.params[`${n}_no_context_takeover`]||this._deflate[f]?(this._deflate.close(),this._deflate=null):(this._deflate[l]=!1,this._deflate[h]=0,this._deflate[p]=[]),r(null,e)})}}},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("http")},function(e){e.exports={a:"0.5.4"}},function(e,t,r){"use strict";var n=r(22);e.exports=function(e,t,r,i,s){var o=new Error(e);return n(o,t,r,i,s)}},function(e,t,r){"use strict";var n=r(5),i=r(60),s={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,u={adapter:("undefined"!=typeof XMLHttpRequest?a=r(59):"undefined"!=typeof process&&(a=r(54)),a),transformRequest:[function(e,t){return i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){u.headers[e]={}}),n.forEach(["post","put","patch"],function(e){u.headers[e]=n.merge(s)}),e.exports=u},function(e,t,r){"use strict";function n(e,t){const r=Buffer.allocUnsafe(t);for(var n=0,i=0;i<e.length;i++){const t=e[i];t.copy(r,n),n+=t.length}return r}function i(e,t,r,n,i){for(var s=0;s<i;s++)r[n+s]=e[s]^t[3&s]}function s(e,t){const r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]}try{const t=r(!function(){var e=new Error('Cannot find module "bufferutil"');throw e.code="MODULE_NOT_FOUND",e}()),o=t.BufferUtil||t;e.exports={mask(e,t,r,n,s){s<48?i(e,t,r,n,s):o.mask(e,t,r,n,s)},unmask(e,t){e.length<32?s(e,t):o.unmask(e,t)},concat:n}}catch(t){e.exports={concat:n,mask:i,unmask:s}}},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("crypto")},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,i=+new Date,s=i-(r||i);e.diff=s,e.prev=r,e.curr=i,r=i;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var u=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;u++;var i=t.formatters[n];if("function"==typeof i){var s=o[u];r=i.call(e,s),o.splice(u,1),u--}return r}),t.formatArgs.call(e,o),(n.log||t.log||console.log.bind(console)).apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=i,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var s=t.instances[r];s.enabled=t.enabled(s.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(50),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){var n=r(9),i=r(10),s=r(15),o=r(53),a=r(28).Writable,u=r(52)("follow-redirects"),c={GET:!0,HEAD:!0,OPTIONS:!0,TRACE:!0},l=Object.create(null);function f(e,t){a.call(this),e.headers=e.headers||{},this._options=e,this._redirectCount=0,this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;if(this._onNativeResponse=function(e){r._processResponse(e)},!e.pathname&&e.path){var n=e.path.indexOf("?");n<0?e.pathname=e.path:(e.pathname=e.path.substring(0,n),e.search=e.path.substring(n))}this._performRequest()}function h(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach(function(i){var s=i+":",a=r[s]=e[i],c=t[i]=Object.create(a);c.request=function(e,i){return"string"==typeof e?(e=n.parse(e)).maxRedirects=t.maxRedirects:e=Object.assign({protocol:s,maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e),e.nativeProtocols=r,o.equal(e.protocol,s,"protocol mismatch"),u("options",e),new f(e,i)},c.get=function(e,t){var r=c.request(e,t);return r.end(),r}}),t}["abort","aborted","error","socket","timeout"].forEach(function(e){l[e]=function(t){this._redirectable.emit(e,t)}}),f.prototype=Object.create(a.prototype),f.prototype.write=function(e,t,r){this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new Error("Request body larger than maxBodyLength limit")),this.abort())},f.prototype.end=function(e,t,r){var n=this._currentRequest;e?this.write(e,t,function(){n.end(null,null,r)}):n.end(null,null,r)},f.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},f.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive","setTimeout"].forEach(function(e){f.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}}),["aborted","connection","socket"].forEach(function(e){Object.defineProperty(f.prototype,e,{get:function(){return this._currentRequest[e]}})}),f.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var i=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var s in this._currentUrl=n.format(this._options),i._redirectable=this,l)s&&i.on(s,l[s]);if(this._isRedirect){var o=this._requestBodyBuffers;!function e(){if(0!==o.length){var t=o.pop();i.write(t.data,t.encoding,e)}else i.end()}()}},f.prototype._processResponse=function(e){var t=e.headers.location;if(t&&!1!==this._options.followRedirects&&e.statusCode>=300&&e.statusCode<400){if(++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new Error("Max redirects exceeded."));var r,i=this._options.headers;if(307!==e.statusCode&&!(this._options.method in c))for(r in this._options.method="GET",this._requestBodyBuffers=[],i)/^content-/i.test(r)&&delete i[r];if(!this._isRedirect)for(r in i)/^host$/i.test(r)&&delete i[r];var s=n.resolve(this._currentUrl,t);u("redirecting to",s),Object.assign(this._options,n.parse(s)),this._isRedirect=!0,this._performRequest()}else e.responseUrl=this._currentUrl,this.emit("response",e),this._requestBodyBuffers=[]},e.exports=h({http:i,https:s}),e.exports.wrap=h},function(e,t,r){"use strict";var n=r(5);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(n.isURLSearchParams(t))s=t.toString();else{var o=[];n.forEach(t,function(e,t){null!==e&&void 0!==e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))}))}),s=o.join("&")}return s&&(e+=(-1===e.indexOf("?")?"?":"&")+s),e}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e}},function(e,t,r){"use strict";var n=r(12);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";const n=r(16),i=r(8),s=r(14),o=r(27),a=r(7);class u{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=e.length<1024||t.mask&&t.readOnly;var i=t.mask?6:2,o=e.length;e.length>=65536?(i+=8,o=127):e.length>125&&(i+=2,o=126);const a=Buffer.allocUnsafe(r?e.length+i:i);if(a[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(a[0]|=64),126===o?a.writeUInt16BE(e.length,2):127===o&&(a.writeUInt32BE(0,2),a.writeUInt32BE(e.length,6)),!t.mask)return a[1]=o,r?(e.copy(a,i),[a]):[a,e];const u=n.randomBytes(4);return a[1]=128|o,a[i-4]=u[0],a[i-3]=u[1],a[i-2]=u[2],a[i-1]=u[3],r?(s.mask(e,u,a,i,e.length),[a]):(s.mask(e,u,e,0,e.length),[a,e])}close(e,t,r,n){var i;if(void 0===e)i=a.EMPTY_BUFFER;else{if("number"!=typeof e||!o.isValidStatusCode(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(i=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((i=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),i.write(t,2))}this._deflating?this.enqueue([this.doClose,i,r,n]):this.doClose(i,r,n)}doClose(e,t,r){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){var n=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=c(e):(e=Buffer.from(e),n=!1)),this._deflating?this.enqueue([this.doPing,e,t,n,r]):this.doPing(e,t,n,r)}doPing(e,t,r,n){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),n)}pong(e,t,r){var n=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=c(e):(e=Buffer.from(e),n=!1)),this._deflating?this.enqueue([this.doPong,e,t,n,r]):this.doPong(e,t,n,r)}doPong(e,t,r,n){this.sendFrame(u.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),n)}send(e,t,r){var n=t.binary?2:1,s=t.compress,o=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=c(e):(e=Buffer.from(e),o=!1));const a=this._extensions[i.extensionName];if(this._firstFragment?(this._firstFragment=!1,s&&a&&(s=e.length>=a._threshold),this._compress=s):(s=!1,n=0),t.fin&&(this._firstFragment=!0),a){const i={fin:t.fin,rsv1:s,opcode:n,mask:t.mask,readOnly:o};this._deflating?this.enqueue([this.dispatch,e,this._compress,i,r]):this.dispatch(e,this._compress,i,r)}else this.sendFrame(u.frame(e,{fin:t.fin,rsv1:!1,opcode:n,mask:t.mask,readOnly:o}),r)}dispatch(e,t,r,n){if(!t)return void this.sendFrame(u.frame(e,r),n);const s=this._extensions[i.extensionName];this._deflating=!0,s.compress(e,r.fin,(e,t)=>{r.readOnly=!1,this.sendFrame(u.frame(t,r),n),this._deflating=!1,this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.write(e[0]),this._socket.write(e[1],t)):this._socket.write(e[0],t)}}function c(e){const t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}e.exports=u},function(e,t){function r(e){var t=new Error('Cannot find module "'+e+'".');throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=26},function(e,t,r){"use strict";try{const e=r(68);t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=(()=>!0)}t.isValidStatusCode=(e=>e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999)},function(e,t){e.exports=require("stream")},function(e,t,r){"use strict";const n=r(28),i=r(8),s=r(14),o=r(27),a=r(7),u=0,c=1,l=2,f=3,h=4,d=5;function p(e,t,r,n){const i=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,p),i[a.kStatusCode]=n,i}function _(e,t){return 1===e.length?e[0]:e.length>1?s.concat(e,t):a.EMPTY_BUFFER}e.exports=class extends n.Writable{constructor(e,t,r){super(),this._binaryType=e||a.BINARY_TYPES[0],this[a.kWebSocket]=void 0,this._extensions=t||{},this._maxPayload=0|r,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=u,this._loop=!1}_write(e,t,r){if(8===this._opcode)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0];e>=r.length?this._buffers.shift().copy(t,t.length-e):(r.copy(t,t.length-e,0,e),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){var t;this._loop=!0;do{switch(this._state){case u:t=this.getInfo();break;case c:t=this.getPayloadLength16();break;case l:t=this.getPayloadLength64();break;case f:this.getMask();break;case h:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,p(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[i.extensionName])return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,p(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,p(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,p(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength)this._state=c;else{if(127!==this._payloadLength)return this.haveLength();this._state=l}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,p(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,p(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=f:this._state=h}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=h)}getData(e){var t=a.EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&s.unmask(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=d,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(p(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)})}dataMessage(){if(this._fin){const r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var e;e="nodebuffer"===this._binaryType?_(n,r):"arraybuffer"===this._binaryType?0===(t=_(n,r)).byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength):n,this.emit("message",e)}else{const e=_(n,r);if(!o.isValidUTF8(e))return this._loop=!1,p(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",e.toString())}}var t;this._state=u}controlMessage(e){if(8!==this._opcode)9===this._opcode?this.emit("ping",e):this.emit("pong",e),this._state=u;else if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return p(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!o.isValidStatusCode(t))return p(RangeError,`invalid status code ${t}`,!0,1002);const r=e.slice(2);if(!o.isValidUTF8(r))return p(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,r.toString()),this.end()}}}}},function(e,t,r){"use strict";const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function i(e,t,r){Object.prototype.hasOwnProperty.call(e,t)?e[t].push(r):e[t]=[r]}e.exports={format:function(e){return Object.keys(e).map(t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t={};if(void 0===e||""===e)return t;for(var r,s,o={},a=!1,u=!1,c=!1,l=-1,f=-1,h=0;h<e.length;h++){const p=e.charCodeAt(h);if(void 0===r)if(-1===f&&1===n[p])-1===l&&(l=h);else if(32===p||9===p)-1===f&&-1!==l&&(f=h);else{if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${h}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${h}`);-1===f&&(f=h);const n=e.slice(l,f);44===p?(i(t,n,o),o={}):r=n,l=f=-1}}else if(void 0===s)if(-1===f&&1===n[p])-1===l&&(l=h);else if(32===p||9===p)-1===f&&-1!==l&&(f=h);else if(59===p||44===p){if(-1===l)throw new SyntaxError(`Unexpected character at index ${h}`);-1===f&&(f=h),i(o,e.slice(l,f),!0),44===p&&(i(t,r,o),o={},r=void 0),l=f=-1}else{if(61!==p||-1===l||-1!==f)throw new SyntaxError(`Unexpected character at index ${h}`);s=e.slice(l,h),l=f=-1}else if(u){if(1!==n[p])throw new SyntaxError(`Unexpected character at index ${h}`);-1===l?l=h:a||(a=!0),u=!1}else if(c)if(1===n[p])-1===l&&(l=h);else if(34===p&&-1!==l)c=!1,f=h;else{if(92!==p)throw new SyntaxError(`Unexpected character at index ${h}`);u=!0}else if(34===p&&61===e.charCodeAt(h-1))c=!0;else if(-1===f&&1===n[p])-1===l&&(l=h);else if(-1===l||32!==p&&9!==p){if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${h}`);if(-1===l)throw new SyntaxError(`Unexpected character at index ${h}`);-1===f&&(f=h);var d=e.slice(l,f);a&&(d=d.replace(/\\/g,""),a=!1),i(o,s,d),44===p&&(i(t,r,o),o={},r=void 0),s=void 0,l=f=-1}else-1===f&&(f=h)}if(-1===l||c)throw new SyntaxError("Unexpected end of input");-1===f&&(f=h);const p=e.slice(l,f);return void 0===r?i(t,p,{}):(void 0===s?i(o,p,!0):i(o,s,a?p.replace(/\\/g,""):p),i(t,r,o)),t}}},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";const n=r(3),i=r(16),s=r(15),o=r(10),a=r(72),u=r(71),c=r(9),l=r(8),f=r(69),h=r(30),d=r(7),p=r(29),_=r(25),g=["CONNECTING","OPEN","CLOSING","CLOSED"],v=d.kWebSocket,m=[8,13],w=3e4;class y extends n{constructor(e,t,r){super(),this.readyState=y.CONNECTING,this.protocol="",this._binaryType=d.BINARY_TYPES[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._isServer=!0,this._receiver=null,this._sender=null,this._socket=null,null!==e&&(Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(r=t,t=void 0),function(e,t,r){if(r=Object.assign({protocolVersion:m[1],perMessageDeflate:!0},r,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0}),-1===m.indexOf(r.protocolVersion))throw new RangeError(`Unsupported protocol version: ${r.protocolVersion} `+`(supported versions: ${m.join(", ")})`);var n;this._isServer=!1,"object"==typeof e&&void 0!==e.href?(n=e,this.url=e.href):(n=c.parse(e),this.url=e);const a="ws+unix:"===n.protocol;if(!(n.host||a&&n.pathname))throw new Error(`Invalid URL: ${this.url}`);const u="wss:"===n.protocol||"https:"===n.protocol,f=i.randomBytes(16).toString("base64"),p=u?s:o,_=n.search?`${n.pathname||"/"}${n.search}`:n.pathname||"/";var g;r.createConnection=u?E:k,r.port=n.port||(u?443:80),r.host=n.hostname.startsWith("[")?n.hostname.slice(1,-1):n.hostname,r.headers=Object.assign({"Sec-WebSocket-Version":r.protocolVersion,"Sec-WebSocket-Key":f,Connection:"Upgrade",Upgrade:"websocket"},r.headers),r.path=_,r.perMessageDeflate&&(g=new l(!0!==r.perMessageDeflate?r.perMessageDeflate:{},!1),r.headers["Sec-WebSocket-Extensions"]=h.format({[l.extensionName]:g.offer()}));t&&(r.headers["Sec-WebSocket-Protocol"]=t);r.origin&&(r.protocolVersion<13?r.headers["Sec-WebSocket-Origin"]=r.origin:r.headers.Origin=r.origin);n.auth?r.auth=n.auth:(n.username||n.password)&&(r.auth=`${n.username}:${n.password}`);if(a){const e=_.split(":");null==r.agent&&process.versions.modules<57?r._socketPath=e[0]:r.socketPath=e[0],r.path=e[1]}var v=this._req=p.get(r);r.handshakeTimeout&&v.setTimeout(r.handshakeTimeout,b.bind(null,this,v,"Opening handshake has timed out"));v.on("error",e=>{this._req.aborted||(v=this._req=null,this.readyState=y.CLOSING,this.emit("error",e),this.emitClose())}),v.on("response",e=>{this.emit("unexpected-response",v,e)||b(this,v,`Unexpected server response: ${e.statusCode}`)}),v.on("upgrade",(e,r,n)=>{if(this.emit("upgrade",e),this.readyState!==y.CONNECTING)return;v=this._req=null;const s=i.createHash("sha1").update(f+d.GUID,"binary").digest("base64");if(e.headers["sec-websocket-accept"]!==s)return void b(this,r,"Invalid Sec-WebSocket-Accept header");const o=e.headers["sec-websocket-protocol"],a=(t||"").split(/, */);var u;if(!t&&o?u="Server sent a subprotocol but none was requested":t&&!o?u="Server sent no subprotocol":o&&-1===a.indexOf(o)&&(u="Server sent an invalid subprotocol"),u)b(this,r,u);else{if(o&&(this.protocol=o),g)try{const t=h.parse(e.headers["sec-websocket-extensions"]);t[l.extensionName]&&(g.accept(t[l.extensionName]),this._extensions[l.extensionName]=g)}catch(e){return void b(this,r,"Invalid Sec-WebSocket-Extensions header")}this.setSocket(r,n,0)}})}.call(this,e,t,r))}get CONNECTING(){return y.CONNECTING}get CLOSING(){return y.CLOSING}get CLOSED(){return y.CLOSED}get OPEN(){return y.OPEN}get binaryType(){return this._binaryType}set binaryType(e){d.BINARY_TYPES.indexOf(e)<0||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,r){const n=new p(this._binaryType,this._extensions,r);this._sender=new _(e,this._extensions),this._receiver=n,this._socket=e,n[v]=this,e[v]=this,n.on("conclude",S),n.on("drain",T),n.on("error",R),n.on("message",C),n.on("ping",A),n.on("pong",O),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",I),e.on("data",N),e.on("end",L),e.on("error",F),this.readyState=y.OPEN,this.emit("open")}emitClose(){this.readyState=y.CLOSED,this._socket?(this._extensions[l.extensionName]&&this._extensions[l.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==y.CLOSED){if(this.readyState===y.CONNECTING){const e="WebSocket was closed before the connection was established";return b(this,this._req,e)}this.readyState!==y.CLOSING?(this.readyState=y.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._socket.writable&&(this._closeFrameReceived&&this._socket.end(),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),w)))})):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,r){if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),this.readyState!==y.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${g[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||d.EMPTY_BUFFER,t,r)}pong(e,t,r){if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),this.readyState!==y.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${g[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||d.EMPTY_BUFFER,t,r)}send(e,t,r){if("function"==typeof t&&(r=t,t={}),this.readyState!==y.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${g[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString());const n=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[l.extensionName]||(n.compress=!1),this._sender.send(e||d.EMPTY_BUFFER,n,r)}terminate(){if(this.readyState!==y.CLOSED){if(this.readyState===y.CONNECTING){const e="WebSocket was closed before the connection was established";return b(this,this._req,e)}this._socket&&(this.readyState=y.CLOSING,this._socket.destroy())}}}function k(e){return e.path=e.socketPath||e._socketPath||void 0,a.connect(e)}function E(e){return e.path=e.socketPath||e._socketPath||void 0,e.servername=e.servername||e.host,u.connect(e)}function b(e,t,r){e.readyState=y.CLOSING;const n=new Error(r);Error.captureStackTrace(n,b),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function S(e,t){const r=this[v];r._socket.removeListener("data",N),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,1005===e?r.close():r.close(e,t)}function T(){this[v]._socket.resume()}function R(e){const t=this[v];t.readyState=y.CLOSING,t._closeCode=e[d.kStatusCode],t.emit("error",e),t._socket.destroy()}function x(){this[v].emitClose()}function C(e){this[v].emit("message",e)}function A(e){const t=this[v];t.pong(e,!t._isServer,d.NOOP),t.emit("ping",e)}function O(e){this[v].emit("pong",e)}function I(){const e=this[v];this.removeListener("close",I),this.removeListener("data",N),this.removeListener("end",L),this[v]=void 0,e.readyState=y.CLOSING,e._socket.read(),e._receiver.end(),clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",x),e._receiver.on("finish",x))}function N(e){this[v]._receiver.write(e)||this.pause()}function L(){const e=this[v];e.readyState=y.CLOSING,e._receiver.end(),this.end()}function F(){const e=this[v];this.removeListener("error",F),this.on("error",d.NOOP),e&&(e.readyState=y.CLOSING,this.destroy())}g.forEach((e,t)=>{y[g[t]]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(y.prototype,`on${e}`,{get(){const t=this.listeners(e);for(var r=0;r<t.length;r++)if(t[r]._listener)return t[r]._listener},set(t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]._listener&&this.removeListener(e,r[n]);this.addEventListener(e,t)}})}),y.prototype.addEventListener=f.addEventListener,y.prototype.removeEventListener=f.removeEventListener,e.exports=y},function(e,t){e.exports=require("util")},function(e,t,r){e.exports=r(63)},function(e,t){function r(e){if(!(this instanceof r))return new r(e);e=e||{};const t=function(){},n={interval:10,now:function(){return(new Date).getTime()},repeat:function(e,t){return setInterval(e,t)},stop:function(e,t){return clearInterval(e,t)},onsleep:t,onwakeup:t};for(let t in n)t in e||(e[t]=n[t]);this.interval=e.interval,this.lastbeat=0,this.pintvl=null,this.onsleep=e.onsleep,this.onwakeup=e.onwakeup,this.repeat=e.repeat,this.stop=e.stop,this.now=e.now}r.toString=function(){return"[Twilio.Heartbeat class]"},r.prototype.toString=function(){return"[Twilio.Heartbeat instance]"},r.prototype.beat=function(){if(this.lastbeat=this.now(),this.sleeping()){this.onwakeup&&this.onwakeup();var e=this;this.pintvl=this.repeat.call(null,function(){e.check()},1e3*this.interval)}},r.prototype.check=function(){const e=this.now()-this.lastbeat;!this.sleeping()&&e>=1e3*this.interval&&(this.onsleep&&this.onsleep(),this.stop.call(null,this.pintvl),this.pintvl=null)},r.prototype.sleeping=function(){return null===this.pintvl},t.Heartbeat=r},function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n);const s=r(1).twilioErrors,o=r(74),a=["trace","debug","info","warn","error","silent"];class u{constructor(e,t){if(!e)throw s.INVALID_ARGUMENT.clone("Error instantiating Logger. <string>moduleName is a required parameter.");this._log=o.getLogger(e),a.forEach(function(e){this[e]=((...t)=>this._log[e](...t))}.bind(this)),t&&this.setLevel(t)}setLevel(e){if(-1===a.indexOf(e))throw s.INVALID_ARGUMENT.clone("Error setting Logger level. <string>level must be one of ['trace', 'debug', 'info', 'warn', 'error', 'silent']");this._log.setLevel(e,!1),this._log.setDefaultLevel(e)}getLevel(){return a[this._log.getLevel()]}}class c{constructor(e,t={}){if(!i.a.isString(e))throw new TypeError("Failed to initialize Configuration. <string>token is a required parameter.");if(this.logIdentifier=t.logIdentifier||+new Date,this._logLevel=t.logLevel||"error",this._log=new u(`Configuration-${this.logIdentifier}`,this._logLevel),this.token=e,this.EB_SERVER=t.ebServer||"https://event-bridge.twilio.com/v1/wschannels",this.WS_SERVER=t.wsServer||"wss://event-bridge.twilio.com/v1/wschannels",t.region){const e=t.region+".us1.",r=this.EB_SERVER.indexOf("twilio.com"),n=this.WS_SERVER.indexOf("twilio.com");this.EB_SERVER=this.EB_SERVER.slice(0,r)+e+this.EB_SERVER.slice(r),this.WS_SERVER=this.WS_SERVER.slice(0,n)+e+this.WS_SERVER.slice(n)}}updateToken(e){if(!i.a.isString(e))throw new TypeError("To update the Twilio token, a new Twilio token must be passed in. <string>newToken is a required parameter.");this.token=e}getLogIdentifier(){return this.logIdentifier}}var l=r(1),f=r(3),h=r(35),d=r(11);const p=global.window||global,_=p.WebSocket?p.WebSocket:r(73),g=5e3,v=d.a;class m extends f.EventEmitter{constructor(e,t={}){if(super(),!(e&&e instanceof be))throw l.twilioErrors.INVALID_ARGUMENT.clone("<Worker>worker is a required parameter to construct EventBridgeSignaling.");const r=e.getLogger(`EventBridgeSignaling-${e.sid}`);if(!i.a.isNil(t.closeExistingSessions)&&!i.a.isBoolean(t.closeExistingSessions))throw new TypeError("Invalid type passed for <boolean>closeExistingSessions");this._heartbeat=null,this.webSocket=null,this._log=r,this._worker=e,this.closeExistingSessions=t.closeExistingSessions||!1,this._config=e._config,this.reconnect=!1,this.tokenTimer=null,this.setUpWebSocket()}updateToken(e){if(!e)throw l.twilioErrors.INVALID_ARGUMENT.clone("To update the Twilio token, a new Twilio token must be passed in. <string>newToken is a required parameter.");this.setTokenExpirationEvent(),this._log.info("Updated token for Worker "+this._worker.sid),this.reconnect=!0,this.webSocket.readyState!==this.webSocket.CLOSING&&this.webSocket.readyState!==this.webSocket.CLOSED||this.createWebSocket()}setTokenExpirationEvent(){clearTimeout(this.tokenTimer),this.tokenTimer=setTimeout(()=>{this.reconnect=!1,this.emit("tokenExpired")},this.tokenLifetime-g)}setUpWebSocket(){this._heartbeat&&(this._heartbeat.onsleep=(()=>{})),this._heartbeat=new h.Heartbeat({interval:60}),this.createWebSocket()}setLifetime(e){this.tokenLifetime=e,this.setTokenExpirationEvent()}createWebSocket(){this.numAttempts=1,this.reconnect=!0;const e=`?${l.EB_URL_PARAMS.TOKEN}=${this._config.token}&${l.EB_URL_PARAMS.CLOSE_EXISTING_SESSIONS}=${this.closeExistingSessions}&${l.EB_URL_PARAMS.CLIENT_VERSION}=${v}`;this.webSocket=new _(this._config.WS_SERVER+e),this.webSocket.onopen=(()=>{this.numAttempts=1,this.emit("connected"),this._heartbeat.onsleep=(()=>{this._log.info("Heartbeat not received in the past 60 seconds. Proceeding to disconnect websocket."),this.webSocket.close()}),this._heartbeat.beat()}),this.webSocket.onmessage=(e=>{if(this._log.debug("Received event",e.data),this._heartbeat.beat(),0===e.data.trim().length)return;let t;try{t=JSON.parse(e.data)}catch(t){return this._log.error("Received data is not valid JSON: "+e.data),void this.emit("error",l.twilioErrors.INVALID_GATEWAY_MESSAGE)}this._log.debug("Emitting event: %s with %s",t.event_type,JSON.stringify(t.payload)),this.emit(t.event_type,t.payload||null,t.event_type)}),this.webSocket.onerror=(e=>{this._log.error("WebSocket error occurred: ",e),this.emit("error",l.twilioErrors.GATEWAY_CONNECTION_FAILED)}),this.webSocket.onclose=(e=>{this.reconnect?this._log.info("WebSocket connection has closed. Trying to reconnect."):this._log.info("WebSocket connection has closed. Not reconnecting due to token expiration.");let t=e.reason;const r=e.code;if(i.a.isEmpty(t)&&(t=`Websocket closed with errorCode=${r}`),this.emit("disconnected",{message:t}),this._heartbeat.onsleep=(()=>{}),this.reconnect){const e=this.generateBackOffInterval(this.numAttempts);setTimeout(()=>{this.numAttempts++,this.createWebSocket()},e)}})}generateBackOffInterval(e){const t=Math.ceil(800),r=Math.floor(1e3*Math.min(30,Math.pow(2,e)-1));return Math.round(Math.floor(Math.random()*(r-t+1))+t)}disconnect(){this._log.info("Disconnecting websocket"),null!==this.webSocket&&(["onmessage","onclose","onopen","onerror"].forEach(e=>{this.webSocket[e]=null}),this.webSocket.close()),this.emit("disconnected",{message:"SDK Disconnect"})}}var w=r(34);const y={GET:"GET",POST:"POST"};Object.freeze(y);const k=d.a;class E{constructor(e){if(!(e instanceof c))throw new TypeError("Failed to initialize Request. <Configuration>config is a required parameter.");this._config=e,this._postClient=w.create({method:y.POST,timeout:l.DEFAULT_HTTP_TIMEOUT,headers:{clientVersion:k}})}post(e,t,r){if(!e)throw new Error("Failed to make POST request. <string>url is a required parameter.");if(!i.a.isObject(t))throw new Error("Failed to make POST request. <object>paramsJSON is a required parameter.");if(!r)throw new Error("Failed to make POST request. <string>apiVersion is a required parameter.");const n=this.buildRequest(y.POST,e,t);return this._postClient.post(this._config.EB_SERVER,n,{headers:{apiVersion:r}}).then(e=>Promise.resolve(e.data.payload))}get(e,t,r){if(!e)throw new Error("Failed to make GET request. <string>url is a required parameter.");if(!t)throw new Error("Failed to make GET request. <string>apiVersion is a required parameter.");if(r=r||{},!i.a.isObject(r))throw new Error("Failed to make GET request. <object>paramsJSON is a required parameter.");const n=this.buildRequest(y.GET,e,r);return this._postClient.post(this._config.EB_SERVER,n,{headers:{apiVersion:t}}).then(e=>Promise.resolve(e.data.payload))}buildRequest(e,t,r){return JSON.stringify({url:t,method:e,params:r,token:this._config.token})}}var b=r(4),S=r.n(b);const T=r(1).twilioErrors,R="reservationList",x="reservationInstance",C="workerInstance",A="workerList",O="taskReservationInstance",I="taskList",N="taskInstance",L="taskTransferList",F="taskTransferInstance",j="taskQueueList",P="workerChannels",U="activitiesList",W="customerParticipantInstance",q="workerParticipantInstance",D="holdWorkerParticipantInstance",B="kickWorkerParticipant";class ${constructor(e,t){if(!e||!t)throw T.INVALID_ARGUMENT.clone("Error instantiating Routes class. <string>workspaceSid and <string>workerSid are required parameters.");this.workspaceSid=e,this.workerSid=t,this.routes={[U]:{path:S.a.join("Workspaces",this.workspaceSid,"Activities")},[C]:{path:S.a.join("Workspaces",this.workspaceSid,"Workers",this.workerSid)},[A]:{path:S.a.join("Workspaces",this.workspaceSid,"Workers")},[x]:{path:S.a.join("Workspaces",this.workspaceSid,"Workers",this.workerSid,"Reservations","%s")},[R]:{path:S.a.join("Workspaces",this.workspaceSid,"Workers",this.workerSid,"Reservations")},[I]:{path:S.a.join("Workspaces",this.workspaceSid,"Tasks")},[N]:{path:S.a.join("Workspaces",this.workspaceSid,"Tasks","%s")},[L]:{path:S.a.join("Workspaces",this.workspaceSid,"Workers",this.workerSid,"Transfers")},[F]:{path:S.a.join("Workspaces",this.workspaceSid,"Workers",this.workerSid,"Transfers","%s")},[O]:{path:S.a.join("Workspaces",this.workspaceSid,"Tasks","%s","Reservations","%s")},[j]:{path:S.a.join("Workspaces",this.workspaceSid,"TaskQueues")},[P]:{path:S.a.join("Workspaces",this.workspaceSid,"Workers",this.workerSid,"WorkerChannels")},[W]:{path:S.a.join("Workspaces",this.workspaceSid,"Workers",this.workerSid,"CustomerParticipant")},[q]:{path:S.a.join("Workspaces",this.workspaceSid,"Workers",this.workerSid,"WorkerParticipant")},[D]:{path:S.a.join("Workspaces",this.workspaceSid,"Workers",this.workerSid,"HoldWorkerParticipant")},[B]:{path:S.a.join("Workspaces",this.workspaceSid,"Workers",this.workerSid,"KickWorkerParticipant")}}}getRoute(e,...t){if(!this.routes[e])throw T.INVALID_ARGUMENT.clone(`Invalid route fetched <string>route "${e}" does not exist.`);if(t.length){let r=Object.assign({},this.routes[e]);if(t.length!==(r.path.match(/%s/g)||[]).length)throw T.INVALID_ARGUMENT.clone(`Invalid number of positional arguments supplied for route ${e}`);for(let e of t)r.path=r.path.replace(/%s/,e);return r}return this.routes[e]}}var M=r(2);class z{constructor(e,t){if(!i.a.isObject(e))throw new TypeError("Failed to create a WorkerDescriptor. <Descriptor>descriptor is a required parameter.");if(!i.a.isObject(t))throw new TypeError("Failed to create a WorkerDescriptor. <Configuration>config is a required parameter.");if(!Ee.every(t=>t in e))throw new TypeError("Failed to create a WorkerDescriptor. The provided <Descriptor>descriptor does not contain all properties of a Worker.");this.accountSid=e.account_sid,this.activityName=e.activity_name,this.activitySid=e.activity_sid,this.attributes=JSON.parse(e.attributes),this.available=e.available,this.dateCreated=Object(M.parseTime)(1e3*e.date_created),this.dateStatusChanged=Object(M.parseTime)(1e3*e.date_status_changed),this.dateUpdated=Object(M.parseTime)(1e3*e.date_updated),this.name=e.friendly_name,this.sid=e.sid,this.workspaceSid=e.workspace_sid}}class V{constructor(e){if(!i.a.isObject(e))throw new TypeError("Failed to instantiate ActivityDescriptor. <Descriptor>descriptor is required.");if(!H.every(t=>t in e))throw new TypeError("Failed to instantiate ActivityDescriptor. <Descriptor>descriptor does not contain all properties of an Activity.");this.accountSid=e.account_sid,this.available=e.available,this.dateCreated=Object(M.parseTime)(1e3*e.date_created),this.dateUpdated=Object(M.parseTime)(1e3*e.date_updated),this.name=e.friendly_name,this.sid=e.sid,this.workspaceSid=e.workspace_sid}}const G=r(2).validateOptions;const H=["account_sid","available","date_created","date_updated","friendly_name","sid","workspace_sid"];var J=class{constructor(e,t){if(!i.a.isObject(e))throw new TypeError("Failed to create an Activity. <Worker>worker is a required parameter.");if(!(t instanceof V))throw new TypeError("Failed to create an Activity. <ActivityDescriptor>descriptor is a required parameter.");Object.assign(this,t),this._worker=e,this._isCurrent=!1}get isCurrent(){return this._isCurrent}setAsCurrent(e={}){if(!G(e,{rejectPendingReservations:e=>i.a.isBoolean(e)}))throw new TypeError(`Failed to set activity=${this.sid}. The options passed in did not match the required types.`);if(e.rejectPendingReservations&&this.available)throw new Error("Unable to reject pending reservations when updating to an Available activity state.");return this._worker._updateWorkerActivity(this.sid,e).then(()=>this)}},Z=r(6);class Q{constructor(e,t,r={}){if(!i.a.isObject(e))throw new TypeError("Failed to initialize ActivitiesEntity. <Worker>worker is a required parameter.");this._activities=new Map,this._log=e.getLogger(`ActivitiesEntity-${e.sid}`),this._request=t,this._worker=e,this._pageSize=r.pageSize||l.DEFAULT_PAGE_SIZE,i.a.inRange(this._pageSize,1,l.DEFAULT_PAGE_SIZE+1)||(this._log.warn("PageSize range for ActivitiesEntity must be between 1 and %d. Setting pageSize to default size=%d",l.DEFAULT_PAGE_SIZE,l.DEFAULT_PAGE_SIZE),this._pageSize=1e3)}get activities(){return this._activities}fetchActivities(){const e=this._getPage();return this._getAllActivities(e)}_getAllActivities(e){return e.then(e=>(e.items.forEach(e=>{this._insertActivity(e)}),e.hasNextPage?this._getAllActivities(e.nextPage()):Promise.resolve()))}_getPage(e){e=e||{};const t=this._worker.getRoutes().getRoute(U).path,r={PageSize:this._pageSize};return e.AfterSid&&(r.AfterSid=e.AfterSid),this._request.get(t,l.API_V1,r).then(e=>new Z.default(e.contents.map(e=>new V(e)),e=>this._getPage({AfterSid:e}),e.after_sid))}_insertActivity(e){const t=e.sid;this._log.trace(`_insertActivity(sid=${t}, data=${JSON.stringify(e)}`);try{const r=new J(this._worker,e);this._activities.set(t,r)}catch(e){this._log.error(`Unable to create an Activity for sid=${t}. Skipping insert into Activities map. Error: ${e}`)}}}class K{constructor(e){if(!i.a.isObject(e))throw new TypeError("Failed to instantiate WorkerChannelDescriptor. <Descriptor>descriptor is required.");if(!X.every(t=>t in e))throw new TypeError("Failed to create a WorkerChannelDescriptor. <Descriptor>descriptor does not contain all properties of a Channel.");this.accountSid=e.account_sid,this.assignedTasks=e.assigned_tasks,this.available=!!e.available,this.availableCapacityPercentage=e.available_capacity_percentage,this.capacity=e.configured_capacity,this.dateCreated=Object(M.parseTime)(1e3*e.date_created),this.dateUpdated=Object(M.parseTime)(1e3*e.date_updated),this.lastReservedTime=Object(M.parseTime)(e.last_reserved_time),this.sid=e.sid,this.taskChannelSid=e.task_channel_sid,this.taskChannelUniqueName=e.task_channel_unique_name,this.workerSid=e.worker_sid,this.workspaceSid=e.workspace_sid}}const Y=["capacity","available","assignedTasks","availableCapacityPercentage","dateUpdated","lastReservedTime"];const X=["account_sid","assigned_tasks","available","available_capacity_percentage","configured_capacity","date_created","date_updated","last_reserved_time","sid","task_channel_sid","task_channel_unique_name","worker_sid","workspace_sid"];var ee=class extends f.EventEmitter{constructor(e,t,r){if(super(),!(e instanceof be))throw new TypeError("Failed to instantiate Worker. <Worker>worker is a required parameter.");if(!(r instanceof K))throw new TypeError("Failed to instantiate Channel. <WorkerChannelDescriptor>descriptor is a required parameter.");this._request=t,this._log=e.getLogger(`Channel-${r.sid}`),Object.assign(this,r)}_emitEvent(e,t){if(!i.a.isString(e))throw new TypeError("Error calling _emitEvent(). <string>eventType is a required parameter.");if(!i.a.isObject(t))throw new TypeError("Error calling method _emitEvent(). <object>rawEventData is a required parameter.");this._update(t),this.emit(e,this)}_update(e){try{const t=new K(e);Y.forEach(e=>{this[e]=t[e]})}catch(t){this._log.warn("Failed to update Channel sid=%s. Update aborted. Error: %s.",e.sid,t)}return this}};class te{constructor(e,t,r={}){if(!(e instanceof be))throw new TypeError("Failed to initialize ChannelsEntity. <Worker>worker is a required parameter.");this._channels=new Map,this._log=e.getLogger("ChannelsEntity"),this._request=t,this._pageSize=r.pageSize||l.DEFAULT_PAGE_SIZE,this._worker=e,i.a.inRange(this._pageSize,1,l.DEFAULT_PAGE_SIZE+1)||(this._log.warn("PageSize range for ChannelsEntity must be between 1 and %d. Setting pageSize to default size=%d",l.DEFAULT_PAGE_SIZE,l.DEFAULT_PAGE_SIZE),this._pageSize=1e3)}get channels(){return this._channels}fetchChannels(){const e=this._getPage();return this._getAllChannels(e)}_getAllChannels(e){return e.then(e=>(e.items.forEach(e=>{this._insertChannel(e)}),e.hasNextPage?this._getAllChannels(e.nextPage()):Promise.resolve()))}_getPage(e){e=e||{};const t=this._worker.getRoutes().getRoute(P).path,r={PageSize:this._pageSize};return e.AfterSid&&(r.AfterSid=e.AfterSid),this._request.get(t,l.API_V1,r).then(e=>new Z.default(e.contents.map(e=>new K(e)),e=>this._getPage({AfterSid:e}),e.after_sid))}_insertChannel(e){const t=e.sid;this._log.trace(`_insertChannel(sid=${t}, data=${JSON.stringify(e)}`);try{const r=new ee(this._worker,this._request,e);this._channels.set(t,r)}catch(e){this._log.error(`Unable to create a Channel for sid=${t}. Skipping insert into Channels map. Error: ${e}`)}}}class re{constructor(e){if(!i.a.isObject(e))throw new TypeError("Failed to instantiate TransferDescriptor. <Descriptor>descriptor is required.");if(!ie.every(t=>t in e))throw new TypeError("Failed to instantiate TransferDescriptor. <Descriptor>descriptor does not contain all properties of a Transfer.");this.dateCreated=Object(M.parseTime)(1e3*e.date_created),this.dateUpdated=Object(M.parseTime)(1e3*e.date_updated),this.mode=e.transfer_mode,this.queueSid=e.initiating_queue_sid,this.reservationSid=e.initiating_reservation_sid,this.to=e.transfer_to,this.transferFailedReason=e.transfer_failed_reason,this.type=e.transfer_type,this.sid=e.sid,this.status=e.transfer_status,this.workerSid=e.initiating_worker_sid,this.workflowSid=e.initiating_workflow_sid}}const ne=["dateUpdated","status","transferFailedReason"];const ie=["date_created","date_updated","initiating_reservation_sid","initiating_worker_sid","initiating_queue_sid","initiating_workflow_sid","sid","transfer_mode","transfer_to","transfer_type","transfer_status"];var se=class extends f.EventEmitter{constructor(e,t){if(super(),!(t instanceof re))throw new TypeError("Failed to instantiate Transfer. <TransferDescriptor>descriptor is a required parameter.");this._log=e.getLogger(`Transfer-${t.sid}`),Object.assign(this,t)}_update(e){try{const t=new re(e);ne.forEach(e=>{this[e]=t[e]})}catch(t){throw this._log.error(`Failed to update Transfer sid=${e.sid}. Update aborted.`,t),new Error(`Failed to update Transfer sid=${e.sid}. Update aborted. Error: ${t}.`)}return this}};var oe=class extends se{constructor(e,t){super(e,t)}};var ae=class extends se{constructor(e,t,r,n){if(super(e,n),"string"!=typeof r)throw new TypeError("Failed to instantiate OutgoingTransfer. <string>taskSid is a required parameter.");this._worker=e,this._request=t,this.taskSid=r}_emitEvent(e,t){if(this._log.trace(`_emitEvent(${e}, ${JSON.stringify(t)})`),!i.a.isString(e))throw new TypeError("Error calling _emitEvent(). <string>eventType is a required parameter.");if(!i.a.isObject(t))throw new TypeError("Error calling method _emitEvent(). <object>payload is a required parameter.");this.emit(e,this)}async cancel(){const e=this._worker.getRoutes().getRoute(F,this.sid).path,t={TaskSid:this.taskSid,TransferStatus:l.TRANSFER_STATUS.canceled},r=await this._request.post(e,t,l.API_V2);return this._update(r)}};var ue=class extends f.EventEmitter{constructor(e,t,r){if(super(),!(r instanceof he))throw new TypeError("Failed to instantiate Transfers. <TaskDescriptor>taskDescriptor is a required parameter.");this._log=e.getLogger(`Transfers-${r.sid}`),this._worker=e,this._request=t,this.incoming=r.incomingTransferDescriptor?new oe(e,r.incomingTransferDescriptor):null,this.outgoing=r.outgoingTransferDescriptor?new ae(e,t,r.sid,r.outgoingTransferDescriptor):null}_emitEvent(e,t){if(this._log.trace(`_emitEvent(${e}, ${JSON.stringify(t)})`),!i.a.isString(e))throw new TypeError("Error calling _emitEvent(). <string>eventType is a required parameter.");if(!i.a.isObject(t))throw new TypeError("Error calling method _emitEvent(). <object>payload is a required parameter.");const r=l.taskTransferEventTypes[e];this.outgoing?this.outgoing.sid===t.sid?Object.keys(i.a.pick(l.taskTransferEventTypes,["transfer-attempt-failed","transfer-completed","transfer-failed","transfer-canceled"])).indexOf(e)>-1&&(this._updateOutgoing(t),this.outgoing._emitEvent(r,t)):this._log.warn("The transfer %s specified by Event: transfer.%s does not match the current active outgoing transfer for Worker %s. Skipping event.",t.sid,r,this._worker.sid):this._log.warn("An active outgoing transfer does currently exist in Worker %s transfers map for Event: transfer.%s. Skipping event.",this._worker.sid,r)}_updateOutgoing(e,t=!1){!this.outgoing||t?this.outgoing=new ae(this._worker,this._request,e.task_sid,new re(e)):this.outgoing._update(e)}_update(e){if(e.incoming)if(this.incoming)this.incoming._update(e.incoming);else{const t=new re(e.incoming);this.incoming=new oe(this._worker,this._request,e.incoming.task_sid,t)}if(e.outgoing)if(this.outgoing)this.outgoing._update(e.outgoing);else{const t=new re(e.outgoing);this.outgoing=new ae(this._worker,this._request,e.outgoing.task_sid,t)}}};const ce=["attributes","status","workflowSid","workflowName","queueSid","queueName","priority","reason","routingTarget","timeout","taskChannelSid","taskChannelUniqueName","age","addOns","dateUpdated","transfers"];const le=["addons","age","attributes","date_created","date_updated","priority","queue_name","queue_sid","reason","routing_target","sid","assignment_status","task_channel_unique_name","task_channel_sid","timeout","workflow_name","workflow_sid"];var fe=class extends f.EventEmitter{constructor(e,t,r,n){if(super(),!(e instanceof be))throw new TypeError("Failed to instantiate Task. <Worker>worker is a required parameter.");if(!n)throw new TypeError("Failed to instantiate Task. <TaskDescriptor>descriptor is a required parameter.");if(!(n instanceof he))throw new TypeError("descriptor should be of type <TaskDescriptor>");if("string"!=typeof r)throw new TypeError("Failed to instantiate Task. <string>reservationSid is a required parameter.");this._worker=e,this._log=e.getLogger(`Task-${n.sid}`),this._request=t,this.transfers=new ue(e,t,n),Object.assign(this,n),this.reservationSid=r}complete(e){if(!i.a.isString(e))throw new TypeError("Error calling method complete(). <string>reason is a required parameter.");const t=this._worker.getRoutes().getRoute(N,this.sid).path,r={AssignmentStatus:l.TASK_STATUS_COMPLETED,Reason:e};return this._request.post(t,r,l.API_V1).then(e=>this._update(e))}async transfer(e,t={}){if(!i.a.isString(e))throw new TypeError("Error calling method transfer(). <string>to is a required parameter.");const r=this._worker.getRoutes().getRoute(L).path,n={ReservationSid:this.reservationSid,TaskSid:this.sid,To:e};t.attributes&&(n.Attributes=t.attributes),t.mode&&(n.Mode=t.mode),t.priority&&(n.Priority=t.priority);const s=await this._request.post(r,n,l.API_V2);return this._log.info(`Completed transfer to Worker/TaskQueue=${e}`),this.transfers._updateOutgoing(s,!0),this}wrapUp(e={}){const t=this._worker.getRoutes().getRoute(N,this.sid).path,r={AssignmentStatus:l.TASK_STATUS_WRAPPING};if(e.reason){if(!i.a.isString(e.reason))throw new Error(`Failed to call wrapUp() on Task sid=${this.sid}. A <string>reason is required.`);r.Reason=e.reason}return this._request.post(t,r,l.API_V1).then(e=>this._update(e))}setAttributes(e){if(!i.a.isObject(e))throw new TypeError("Unable to set attributes on Task. <object>attributes is a required parameter.");const t=this._worker.getRoutes().getRoute(N,this.sid).path,r={Attributes:e};return this._request.post(t,r,l.API_V1).then(e=>this._update(e))}updateParticipant(e){const t={hold:e=>i.a.isBoolean(e),holdUrl:e=>i.a.isString(e),holdMethod:e=>i.a.isString(e)};if(!Object(M.validateOptions)(e,t))throw new TypeError(`Failed to update Participant tied to Task sid=${this.sid}. The options passed in did not match the required types.`);const r=this._worker.getRoutes().getRoute(W).path,n={TaskSid:this.sid};for(const t in e)n[i.a.upperFirst(t)]=e[t];return this._request.post(r,n,l.API_V2).then(e=>this._update(e))}kick(e){if(!i.a.isString(e))throw new TypeError("Error calling method kick(). <string>workerSid is a required parameter.");const t=this._worker.getRoutes().getRoute(B).path,r={TaskSid:this.sid,TargetWorkerSid:e};return this._request.post(t,r,l.API_V2).then(e=>this._update(e))}hold(e,t,r){const n={holdUrl:e=>i.a.isString(e),holdMethod:e=>i.a.isString(e)};if(!i.a.isString(e))throw new TypeError("Error calling method hold(). <string>targetWorkerSid is a required parameter.");if(!i.a.isBoolean(t))throw new TypeError("Error calling method hold(). <boolean>onHold is a required parameter that is either true or false.");if(!Object(M.validateOptions)(r,n))throw new TypeError(`Failed to update Participant tied to Task sid=${this.sid}. The options passed in did not match the required types.`);const s=this._worker.getRoutes().getRoute(D).path,o={TaskSid:this.sid,TargetWorkerSid:e,Hold:t};for(const e in r)o[i.a.upperFirst(e)]=r[e];return this._request.post(s,o,l.API_V2).then(e=>this._update(e))}_emitEvent(e,t){if(this._log.trace(`_emitEvent(${e}, ${JSON.stringify(t)})`),!i.a.isString(e))throw new TypeError("Error calling _emitEvent(). <string>eventType is a required parameter.");if(!i.a.isObject(t))throw new TypeError("Error calling method _emitEvent(). <object>payload is a required parameter.");this.emit(e,this,e)}_emitEventForOutgoingTransfer(e,t){if(this._log.trace(`_emitEventForOutgoingTransfer(${e}, ${JSON.stringify(t)})`),!i.a.isString(e))throw new TypeError("Error calling _emitEventForOutgoingTransfer(). <string>eventType is a required parameter.");if(!i.a.isObject(t))throw new TypeError("Error calling method _emitEventForOutgoingTransfer(). <object>payload is a required parameter.");this.transfers.outgoing&&this.transfers.outgoing.sid===t.sid?Object.keys(i.a.pick(l.taskTransferEventTypes,[l.TRANSFER_INITIATED])).indexOf(e)>-1?(this.transfers._updateOutgoing(t),this.emit(l.taskTransferEventTypes[l.TRANSFER_INITIATED],this.transfers.outgoing)):this.transfers._emitEvent(e,t):this._log.debug(`The transfers.outgoing object is either not present or does not match the transfer sid in the event. ${JSON.stringify(t)}`)}_update(e,t={}){try{const r=new he(e,this._config);ce.forEach(e=>{"transfers"===e?(t.incoming||t.outgoing)&&this.transfers._update(t):this[e]=r[e]})}catch(t){throw this._log.error(`Failed to update Task sid=${e.sid}. Update aborted.`,t),new Error(`Failed to update Task sid=${e.sid}. Update aborted. Error: ${t}.`)}return this}};class he{constructor(e){if(!i.a.isObject(e))throw new TypeError("Failed to instantiate TaskDescriptor. <Descriptor>descriptor is required.");if(!le.every(t=>t in e))throw new TypeError("Failed to instantiate TaskDescriptor. <Descriptor>descriptor does not contain all properties of a Task.");this.addOns=JSON.parse(e.addons),this.age=e.age,this.attributes=JSON.parse(e.attributes),this.dateCreated=Object(M.parseTime)(1e3*e.date_created),this.dateUpdated=Object(M.parseTime)(1e3*e.date_updated),this.priority=e.priority,this.queueName=e.queue_name,this.queueSid=e.queue_sid,this.reason=e.reason,this.routingTarget=e.routing_target,this.sid=e.sid,this.status=e.assignment_status,this.taskChannelUniqueName=e.task_channel_unique_name,this.taskChannelSid=e.task_channel_sid,this.timeout=e.timeout,this.workflowName=e.workflow_name,this.workflowSid=e.workflow_sid,this.incomingTransferDescriptor=null,this.outgoingTransferDescriptor=null}}class de{constructor(e,t,r=[]){if(!i.a.isObject(e))throw new TypeError("Failed to instantiate ReservationDescriptor. <Descriptor>descriptor is required.");if(!i.a.isObject(t))throw new TypeError("Failed to instantiate ReservationDescriptor. <Worker>worker is required.");const n=i.a.filter(ve,e=>-1===r.indexOf(e));if(!i.a.every(n,t=>t in e)){const t=i.a.difference(n,Object.keys(e)).join(", ");throw new TypeError(`Failed to instantiate ReservationDescriptor. <Descriptor>descriptor does not contain all properties of a Reservation. Missing: ${t}`)}this.accountSid=e.account_sid,this.dateCreated=Object(M.parseTime)(1e3*e.date_created),this.dateUpdated=Object(M.parseTime)(1e3*e.date_updated),this.sid=e.sid,this.status=e.reservation_status,this.timeout=e.reservation_timeout,this.workerSid=e.worker_sid,this.workspaceSid=e.workspace_sid,this.taskDescriptor=null,e.canceled_reason_code&&(this.canceledReasonCode=e.canceled_reason_code);const s=t.getLogger(`ReservationDescriptor-${this.sid}`);if(-1===r.indexOf("task"))try{this.taskDescriptor=new he(e.task)}catch(e){throw s.error("Failed to create a ReservationDescriptor. The 'task' property is malformed."),e}if(-1===r.indexOf(l.transferFields.taskTransfer)&&"object"==typeof e.task_transfer)try{this.taskDescriptor.incomingTransferDescriptor=new re(e.task_transfer),this.transferDescriptor=new re(e.task_transfer)}catch(e){throw s.error("Failed to create a ReservationDescriptor. The 'task_transfer' property is malformed."),e}if(-1===r.indexOf(l.transferFields.activeOutgoingTaskTransfer)&&"object"==typeof e.active_outgoing_task_transfer)try{this.taskDescriptor.outgoingTransferDescriptor=new re(e.active_outgoing_task_transfer)}catch(e){throw s.error("Failed to create a ReservationDescriptor. The 'active_outgoing_task_transfer' property is malformed."),e}}}const pe=r(2).validateOptions,_e=["dateUpdated","canceledReasonCode","status","timeout","task","task_transfer"],ge=["reservation_timeout","task","canceled_reason_code"];const ve=["account_sid","date_created","date_updated","reservation_status","sid","task","reservation_timeout","worker_sid","workspace_sid"];var me=class extends f.EventEmitter{constructor(e,t,r){if(super(),!(e instanceof be))throw new TypeError("Failed to instantiate Reservation. <Worker>worker is a required parameter.");if(!(r instanceof de))throw new TypeError("Failed to instantiate Reservation. <ReservationDescriptor>descriptor is a required parameter.");this._worker=e,this._log=e.getLogger(`Reservation-${r.sid}`),this._request=t,this.task=this._createTask(r),r.transferDescriptor&&(this.transfer=this._createTransfer(r)),Object.assign(this,r),delete this.taskDescriptor,delete this.transferDescriptor}accept(){const e=this._worker.getRoutes().getRoute(x,this.sid).path,t={ReservationStatus:l.RESERVATION_STATUS_ACCEPTED};return this._request.post(e,t,l.API_V1).then(e=>this._update(e,ge))}complete(){const e=this._worker.getRoutes().getRoute(x,this.sid).path,t={ReservationStatus:l.RESERVATION_STATUS_COMPLETED};return this._request.post(e,t,l.API_V1).then(e=>this._update(e,ge))}reject(e={}){const t=this._worker.getRoutes().getRoute(x,this.sid).path,r={ReservationStatus:l.RESERVATION_STATUS_REJECTED};if(!pe(e,{activitySid:e=>i.a.isString(e)}))throw new TypeError(`Failed to issue Instruction:reject on Reservation sid=${this.sid}. The options passed in did not match the required types.`);for(const t in e)r[l.RESERVATION_REJECT_OPTIONS[t]]=e[t];return this._request.post(t,r,l.API_V1).then(e=>this._update(e,ge))}wrap(){const e=this._worker.getRoutes().getRoute(x,this.sid).path,t={ReservationStatus:l.RESERVATION_STATUS_WRAPPING};return this._request.post(e,t,l.API_V1).then(e=>this._update(e,ge))}call(e,t,r={}){if(!i.a.isString(e))throw new TypeError("Error calling method call(). <string>from is a required parameter.");if(!i.a.isString(t))throw new TypeError("Error calling method call(). <string>url is a required parameter.");const n=this._worker.getRoutes().getRoute(x,this.sid).path,s={Instruction:l.RESERVATION_INSTRUCTION_CALL,CallFrom:e,CallUrl:t};if(!pe(r,{accept:e=>i.a.isBoolean(e),record:e=>i.a.isString(e),statusCallbackUrl:e=>i.a.isString(e),timeout:e=>i.a.isInteger(e),to:e=>i.a.isString(e)}))throw new TypeError(`Failed to issue Instruction:call on Reservation sid=${this.sid}. The options passed in did not match the required types.`);for(const e in r)s[l.RESERVATION_CALL_OPTIONS[e]]=r[e];return this._request.post(n,s,l.API_V1).then(e=>this._update(e,ge))}dequeue(e={}){const t=this._worker.getRoutes().getRoute(x,this.sid).path,r={Instruction:l.RESERVATION_INSTRUCTION_DEQUEUE};if(!pe(e,{from:e=>i.a.isString(e),to:e=>i.a.isString(e),postWorkActivitySid:e=>i.a.isString(e),record:e=>i.a.isString(e),timeout:e=>i.a.isInteger(e),statusCallbackUrl:e=>i.a.isString(e),statusCallbackEvents:e=>i.a.isString(e)}))throw new TypeError(`Failed to issue Instruction:dequeue on Reservation sid=${this.sid}. The options passed in did not match the required types.`);for(const t in e)r[l.RESERVATION_DEQUEUE_OPTIONS[t]]=e[t];return this._request.post(t,r,l.API_V1).then(e=>this._update(e,ge))}redirect(e,t,r={}){if(!i.a.isString(e))throw new TypeError("Error calling method redirect(). <string>callSid is a required parameter.");if(!i.a.isString(t))throw new TypeError("Error calling method redirect(). <string>url is a required parameter.");const n=this._worker.getRoutes().getRoute(x,this.sid).path,s={accept:e=>i.a.isBoolean(e)},o={Instruction:l.RESERVATION_INSTRUCTION_REDIRECT,RedirectCallSid:e,RedirectUrl:t};if(!pe(r,s))throw new TypeError(`Failed to issue Instruction:redirect on Reservation sid=${this.sid}. The options passed in did not match the required types.`);for(const e in r)o[l.RESERVATION_REDIRECT_OPTIONS[e]]=r[e];return this._request.post(n,o,l.API_V1).then(e=>this._update(e,ge))}conference(e={}){if(!pe(e,{to:e=>i.a.isString(e),from:e=>i.a.isString(e),timeout:e=>i.a.isInteger(e),statusCallback:e=>i.a.isString(e),statusCallbackMethod:e=>i.a.isString(e),statusCallbackEvent:e=>i.a.isString(e),record:e=>i.a.isString(e),muted:e=>i.a.isBoolean(e),beep:e=>i.a.isBoolean(e)||i.a.isString(e),startConferenceOnEnter:e=>i.a.isBoolean(e),endConferenceOnExit:e=>i.a.isBoolean(e),endConferenceOnCustomerExit:e=>i.a.isBoolean(e),waitUrl:e=>i.a.isString(e),waitMethod:e=>i.a.isString(e),earlyMedia:e=>i.a.isBoolean(e),maxParticipants:e=>i.a.isInteger(e),conferenceStatusCallback:e=>i.a.isString(e),conferenceStatusCallbackMethod:e=>i.a.isString(e),conferenceStatusCallbackEvent:e=>i.a.isString(e),conferenceRecord:e=>i.a.isBoolean(e)||i.a.isString(e),conferenceTrim:e=>i.a.isString(e),recordingChannels:e=>i.a.isString(e),recordingStatusCallback:e=>i.a.isString(e),recordingStatusCallbackMethod:e=>i.a.isString(e),conferenceRecordingStatusCallback:e=>i.a.isString(e),conferenceRecordingStatusCallbackMethod:e=>i.a.isString(e),region:e=>i.a.isString(e),sipAuthUsername:e=>i.a.isString(e),sipAuthPassword:e=>i.a.isString(e)}))throw new TypeError(`Failed to issue Instruction:conference on Reservation sid=${this.sid}. The options passed in did not match the required types.`);const t=this._worker.getRoutes().getRoute(x,this.sid).path,r={Instruction:l.RESERVATION_INSTRUCTION_CONFERENCE};for(const t in e)r[i.a.upperFirst(t)]=e[t];return this._request.post(t,r,l.API_V1).then(()=>this)}updateParticipant(e){if(!pe(e,{endConferenceOnExit:e=>i.a.isBoolean(e),mute:e=>i.a.isBoolean(e),beepOnExit:e=>i.a.isBoolean(e)}))throw new TypeError(`Failed to update Worker Participant tied to Reservation sid=${this.sid}. The options passed in did not match the required types.`);const t=this._worker.getRoutes().getRoute(q).path,r={ReservationSid:this.sid};for(const t in e)r[i.a.upperFirst(t)]=e[t];return this._request.post(t,r,l.API_V2).then(()=>this)}_createTask(e){if(!(e instanceof de))return this._log.error(`Error calling method _createTask() for Reservation                              sid=${this.sid}. <ReservationDescriptor>reservationDescriptor                              is a required parameter.`),{};const t=e.taskDescriptor;try{return new fe(this._worker,this._request,e.sid,t)}catch(e){return this._log.error(`Failed to create a Task for Reservation sid=${this.sid}. Error: ${e}`),{}}}_createTransfer(e){if(!(e instanceof de))return this._log.error(`Error calling method _createTransfer() for Reservation                              sid=${this.sid}. <ReservationDescriptor>reservationDescriptor                              is a required parameter.`),{};const t=e.transferDescriptor;try{return new oe(this._worker,t)}catch(e){return this._log.error(`Failed to create a Transfer for Reservation sid=${this.sid}. Error: ${e}`),{}}}_update(e,t=[]){try{const r=new de(e,this._worker,t);_e.forEach(n=>{if("task"===n){if(-1===t.indexOf("task")){const t=e.task_transfer,r=e.active_outgoing_task_transfer;this.task._update(e.task,{incoming:t,outgoing:r})}}else"canceledReasonCode"===n?-1===t.indexOf("canceled_reason_code")&&e.canceled_reason_code&&(this[n]=r[n]):"task_transfer"===n&&e.task_transfer?this.transfer._update(e.task_transfer):this[n]=r[n]})}catch(t){throw this._log.error(`Failed to update Reservation sid=${e.sid}. Update aborted. Error: ${t}.`),t}return this}_emitEvent(e,t){if(!i.a.isString(e))throw new TypeError("Error calling _emitEvent(). <string>eventType is a required parameter.");if(!i.a.isObject(t))throw new TypeError("Error calling method _emitEvent(). <object>rawEventData is a required parameter.");this._update(t),this.emit(e,this)}};class we extends f.EventEmitter{constructor(e,t,r={}){if(super(),!(e instanceof be))throw new TypeError("Failed to initialize ReservationsEntity. <Worker>worker is a required parameter.");this._worker=e,this._log=e.getLogger("ReservationsEntity"),this._request=t,this._reservations=new Map,this._reservationSidsByTask=new Map,this._pageSize=r.pageSize||l.DEFAULT_PAGE_SIZE,i.a.inRange(this._pageSize,1,l.DEFAULT_PAGE_SIZE+1)||(this._log.warn("PageSize range for ReservationsEntity must be between 1 and %d. Setting pageSize to default size=%d",l.DEFAULT_PAGE_SIZE,l.DEFAULT_PAGE_SIZE),this._pageSize=1e3)}get reservations(){return new Map(Array.from(this._reservations).filter(e=>!e[1][1]).map(e=>[e[0],e[1][0]]))}fetchReservations(){const e=this._getPage();return this._reservations.clear(),this._getAllReservations(e)}_getAllReservations(e){return e.then(e=>{e.items.forEach(e=>{this._insertReservation(e)}),e.hasNextPage&&this._getAllReservations(e.nextPage())})}_getPage(e){e=e||{};const t=this._worker.getRoutes().getRoute(R).path,r={Active:"true",PageSize:this._pageSize};return e.AfterSid&&(r.AfterSid=e.AfterSid),this._request.get(t,l.API_V2,r).then(e=>new Z.default(e.contents.map(e=>new de(e,this._worker)),e=>this._getPage({AfterSid:e}),e.after_sid))}_insertReservation(e){const t=e.sid;this._log.trace("_insertReservation(sid=%s, data=%s)",t,JSON.stringify(e)),this._reservations.has(t)&&this._log.debug("Reservation %s already exists for Worker %s. Attempting to overwrite it.",t,this._worker.sid);try{const r=new me(this._worker,this._request,e);return this._reservations.set(t,[r,!1]),this._reservationSidsByTask.has(r.task.sid)?this._reservationSidsByTask.get(r.task.sid).add(r.sid):this._reservationSidsByTask.set(r.task.sid,new Set([r.sid])),this._log.debug("Successfully created and inserted %s for %s to Task-Reservation lookup. Contents: %s",r.sid,r.task.sid,this._reservationSidsByTask.get(r.task.sid)),r}catch(e){throw this._log.error("Unable to create a Reservation for sid=%s. Skipping insert into Reservations map. Error: %s",t,e),e}}insert(e){this._log.trace("_insertReservation(sid=%s, data=%s)",e.sid,JSON.stringify(e));const t=new de(e,this._worker);return this._insertReservation(t)}getTasks(e){if(!this._reservationSidsByTask.has(e))return null;const t=[];return this._reservationSidsByTask.get(e).forEach(e=>{const r=this._reservations.get(e);r&&r[0].task&&t.push(r[0].task)}),t}_deleteByReservationSid(e){this._log.trace("_deleteByReservationSid(sid=%s)",e);const t=this.reservations.get(e);t?(this._log.info("Found Reservation sid=%s for Worker %s. Removing reservation and task.",e,this._worker.sid),this._cleanUpReservationAndTask(t)):this._log.info("Reservation with sid=%s not found. Unable to remove Reservation.",e)}_cleanUpReservationAndTask(e){this._log.debug("Soft deleting Reservation sid=%s for Worker %s",e.sid,this._worker.sid),this._reservations.set(e.sid,[e,!0]),setTimeout(()=>{this._log.debug("Hard deleting of Reservation sid=%s for Worker %s",e.sid,this._worker.sid),this._reservations.delete(e.sid)||this._log.warn("Failed to hard delete Reservation sid=%s for Worker %s",e.sid,this._worker.sid)},5e3)}}class ye{constructor(e,t={}){this._worker=e,this._logLevel=t.logLevel||"error",this._log=new u("WorkerEventHandler",this._logLevel)}getTREventsToHandlerMapping(){return{"worker.activity.update":"_workerActivityUpdateHandler","worker.attributes.update":"_workerAttributesUpdateHandler","worker.capacity.update":"_workerCapacityUpdateHandler","worker.channel.availability.update":"_workerChannelAvailabilityUpdateHandler","reservation.created":"_reservationCreatedHandler","reservation.failed":"_reservationFailedHandler","reservation.accepted":"_reservationUpdateHandler","reservation.wrapup":"_reservationUpdateHandler","reservation.completed":"_reservationCleanupEventsHandler","reservation.rejected":"_reservationCleanupEventsHandler","reservation.timeout":"_reservationCleanupEventsHandler","reservation.canceled":"_reservationCleanupEventsHandler","reservation.rescinded":"_reservationCleanupEventsHandler","task.updated":"_taskTypeEventHandler","task.canceled":"_taskTypeEventHandler","task.completed":"_taskTypeEventHandler","task.wrapup":"_taskTypeEventHandler","task.transfer-attempt-failed":"_transferTaskEventHandler","task.transfer-completed":"_transferTaskEventHandler","task.transfer-failed":"_transferTaskEventHandler","task.transfer-initiated":"_transferTaskEventHandler","task.transfer-canceled":"_transferTaskEventHandler"}}_workerActivityUpdateHandler(e){if(this._log.info("Worker %s received Event: worker.activity.update. Proceeding to update ...",this._worker.sid),!e.activity_sid)throw this._log.error("Event: worker.activity.update did not contain an activity_sid. Unable to update Worker %s.",this._worker.sid),new Error(`Failed to update Worker ${this._worker.sid} activity.`);{const t=this._worker.activities.get(e.activity_sid);if(!t)throw this._log.error("The Activity sid=%s specified in Event: worker.activity.update does not exist in the Worker's map of Activities. Unable to update Worker %s activity.",e.activity_sid,this._worker.sid),new Error(`Failed to update Worker ${this._worker.sid} activity.`);this._worker.activity._isCurrent=!1,this._worker.activity=t,t._isCurrent=!0,this._worker.emit("activityUpdated",this._worker._update(e))}}_workerAttributesUpdateHandler(e){this._log.info(`Worker ${this._worker.sid} received Event: worker.attributes.update. Proceeding to update ...`),this._worker.emit("attributesUpdated",this._worker._update(e))}_workerCapacityUpdateHandler(e){if(this._log.info(`Worker ${this._worker.sid} received Event: worker.capacity.update.`),!e.sid)throw this._log.error("Event: worker.capacity.update did not contain a Channel sid. Unable to update Channel for Worker %s.",this._worker.sid),new Error(`Failed to update Worker ${this._worker.sid} channel.`);{const t=this._worker.channels.get(e.sid);if(!t)throw this._log.error("The Channel sid=%s specified in Event: worker.capacity.update does not  exist in the Worker's map of Channels. Unable to update Worker %s channel.",e.sid,this._worker.sid),new Error(`Failed to update Worker ${this._worker.sid} channel.`);t._emitEvent("capacityUpdated",e)}}_workerChannelAvailabilityUpdateHandler(e){if(this._log.info("Worker %s received Event: worker.channel.availability.update.",this._worker.sid),!e.sid)throw this._log.error("Event: worker.capacity.update did not contain a Channel sid. Unable to update Channel for Worker %s.",this._worker.sid),new Error(`Failed to update Worker ${this._worker.sid} channel.`);{const t=this._worker.channels.get(e.sid);if(!t)throw this._log.error("The Channel sid=%s specified in Event: worker.channel.availability.update does not  exist in the Worker's map of Channels. Unable to update Worker %s channel.",e.sid,this._worker.sid),new Error(`Failed to update Worker ${this._worker.sid} channel.`);t._emitEvent("availabilityUpdated",e)}}_reservationCreatedHandler(e){if(this._log.info("Worker %s received Event: reservation.created.",this._worker.sid),!e.sid)throw this._log.error("Event: reservationCreated did not contain a Reservation sid. Unable to create a Reservation for Worker %s.",this._worker.sid),new Error(`Failed to create Reservation for Worker ${this._worker.sid}.`);try{this._log.info("Attempting to create and insert Reservation into Worker %s reservations map.",this._worker.sid);const t=this._worker._dataServices.reservationsEntity.insert(e);this._worker.emit("reservationCreated",t)}catch(e){throw this._log.info("Failed to create and insert Reservation into Worker %s reservations map.",this._worker.sid),new Error(`Failed to create a Reservation for Worker ${this._worker.sid} on Event: reservationCreated. Error: ${e}`)}}_reservationFailedHandler(e){this._log.info("Worker %s received Event: reservation.failed.",this._worker.sid),this._worker.emit("reservationFailed",e)}_reservationUpdateHandler(e,t){const r=l.reservationToSDKEventsMapping[t];if(this._log.info("Worker %s received Event: %s mapped to %s.",this._worker.sid,t,r),!e.sid)throw this._log.error(`Event: reservation.${r} did not contain a Reservation sid. Unable to update Reservation for Worker ${this._worker.sid}`),new Error(`Failed to update Reservation for Worker ${this._worker.sid}.`);{const t=this._worker.reservations.get(e.sid);if(!t)throw this._log.error(`The Resevation sid=${e.sid} specified in Event: reservation.${r} does not                                         exist in the Worker's map of Reservations. Unable to update Worker ${this._worker.sid} reservation.`),new Error(`Failed to update Worker ${this._worker.sid} reservation.`);t._emitEvent(r,e)}}_reservationCleanupEventsHandler(e,t){const r=l.reservationToSDKEventsMapping[t];if(this._log.info("Worker %s received Event: %s mapped to %s.",this._worker.sid,t,r),!e.sid)throw this._log.error("Event: reservation.%s did not contain a Reservation sid. Unable to update Reservation for Worker %s.",r,this._worker.sid),new Error(`Failed to update Reservation for Worker ${this._worker.sid}.`);{const t=this._worker.reservations.get(e.sid);t?(this._worker._dataServices.reservationsEntity._deleteByReservationSid(e.sid),t._emitEvent(r,e)):this._log.warn("The reservation specified by Event: reservation.%s does not exist in Worker %s Reservations map. Skipping event.",r,this._worker.sid)}}_taskTypeEventHandler(e,t){const r=l.taskEventTypes[t];if(this._log.info("Worker %s received Event: %s mapped to %s.",this._worker.sid,t,r),!e.sid)throw this._log.error("Event: task.%s did not contain a Task sid. Unable to emit event for Worker %s.",r,this._worker.sid),new Error(`Failed to emit event for Worker ${this._worker.sid}.`);{const t=this._worker._dataServices.reservationsEntity.getTasks(e.sid);t&&t.length>0?t.forEach(t=>{t._update(e),t._emitEvent(r,e)}):this._log.warn("The task specified by Event: task.%s does not exist in Worker %s Reservations map. Skipping event.",r,this._worker.sid)}}_transferTaskEventHandler(e,t){const r=l.taskTransferEventEmitterMapping[t];if(this._log.info("Worker %s received Event: % mapped to %s.",this._worker.sid,t,r),!e.initiating_reservation_sid||!e.task_sid)throw this._log.error("Event: task.%s did not contain a Reservation sid or Task sid. Unable to emit event for Worker %s.",r,this._worker.sid),new Error(`Failed to emit event for Worker ${this._worker.sid}.`);{const t=this._worker.reservations.get(e.initiating_reservation_sid);t?t.task.sid===e.task_sid?t.task._emitEventForOutgoingTransfer(r,e):this._log.warn("The task %s related to Event: task.%s does not match the expected owning Reservation %s for Worker %s. Skipping event.",e.task_sid,r,t.sid,this._worker.sid):this._log.warn("The reservation %s related to Event: task.%s does not exist in Worker %s Reservations map. Skipping event.",e.initiating_reservation_sid,r,this._worker.sid)}}}const ke=["dateUpdated","dateStatusChanged","attributes","name","available"];const Ee=["account_sid","activity_name","activity_sid","attributes","available","date_created","date_status_changed","date_updated","friendly_name","sid","workspace_sid"];var be=class extends f.EventEmitter{constructor(e,t={},r={Request:E,EventBridgeSignaling:m}){if(super(),!i.a.isString(e))throw new TypeError("Failed to instantiate Worker. <string>token is a required parameter.");const n={connectActivitySid:e=>i.a.isString(e),closeExistingSessions:e=>i.a.isBoolean(e),logLevel:e=>i.a.isString(e),ebServer:e=>i.a.isString(e),wsServer:e=>i.a.isString(e),region:e=>i.a.isString(e)};Object(M.validateOptions)(t,n),this._connectActivitySid=t.connectActivitySid,this._closeExistingSessions=t.closeExistingSessions,this._logLevel=t.logLevel||"error",this._config=new c(e,t),this._log=new u(`Worker-${this._config.getLogIdentifier()}`,this._logLevel),this._request=new r.Request(this._config),this._dataServices={activitiesEntity:new Q(this,this._request),channelsEntity:new te(this,this._request),reservationsEntity:new we(this,this._request)},this._signaling=new r.EventBridgeSignaling(this,{closeExistingSessions:t.closeExistingSessions}),this._subscribeToSignalingEvents(),this.taskRouterEventHandler=new ye(this)}createTask(e,t,r,n,s={}){if(!i.a.isString(e))throw new TypeError("Error calling method createTask(). <string>to is a required parameter.");if(!i.a.isString(t))throw new TypeError("Error calling method createTask(). <string>from is a required parameter.");if(!i.a.isString(r))throw new TypeError("Error calling method createTask(). <string>workflowSid is a required parameter.");if(!i.a.isString(n))throw new TypeError("Error calling method createTask(). <string>taskQueueSid is a required parameter.");const o={attributes:e=>i.a.isObject(e),taskChannelUniqueName:e=>i.a.isString(e),taskChannelSid:e=>i.a.isString(e)};if(!Object(M.validateOptions)(s,o))throw new TypeError(`Failed to create a Task for Worker ${this.sid}. The options passed in did not match the required types.`);const a=this.getRoutes().getRoute(I).path,u={WorkflowSid:r,TaskQueueSid:n,RoutingTarget:this.sid};for(const e in s)"attributes"===e||(u[l.CREATE_TASK_OPTIONS[e]]=s[e]);const c={outbound_to:e,from:t};return u.Attributes=Object.assign({},s.attributes,c),this._request.post(a,u,l.API_V1).then(e=>e.sid)}getLogger(e){return new u(`${e}-${this.sid}`,this._config._logLevel)}setAttributes(e){if(!i.a.isObject(e))throw new TypeError("Unable to set attributes on Worker. <object>attributes is a required parameter.");const t=this.getRoutes().getRoute(C).path,r={Attributes:e};return this._request.post(t,r,l.API_V1).then(e=>this._update(e))}updateToken(e){if(!i.a.isString(e))throw new TypeError("To update the Twilio token, a new Twilio token must be passed in. <string>newToken is a required parameter.");this._log.info("Proceeding to update the Worker's current active token with a new token."),this._log.debug("New token: "+e);try{this._config.updateToken(e),this._signaling.updateToken(e),this.emit("tokenUpdated")}catch(e){this.emit("error",e)}}_subscribeToSignalingEvents(){this._log.info("Subscribing to Signaling events .... "),this._signaling.on("connected",()=>{this._log.info("Received Event: 'connected' from Signaling layer. Pending initialization.",this.sid)}),this._signaling.on("disconnected",e=>{this._log.info("Received Event: 'disconnected' from Signaling layer for Worker %s. %s",this.sid,e),this._unSubscribeFromTaskRouterEvents(),this.emit("disconnected",e)}),this._signaling.on("init",e=>{this._log.info("Received Event: 'init' from Signaling layer. Proceeding to initialize Worker %s.",e.channel_id),this.sid=e.channel_id,this.accountSid=e.account_sid,this.workspaceSid=e.workspace_sid,this._signaling.setLifetime(e.token_lifetime),this._initialize()}),this._signaling.on("error",e=>{this._log.info("Received Event: 'error' from Signaling layer for Worker %s.",this.sid),this.emit("error",e)}),this._signaling.on("tokenExpired",()=>{this._log.info("Received Event: 'tokenExpired' for for Worker %s. Please update the token. Websocket will not reconnect automatically until token is updated.",this.sid),this.emit("tokenExpired")})}_subscribeToTaskRouterEvents(){this._log.info("Subscribing to TaskRouter events ... ");for(let[e,t]of Object.entries(this.taskRouterEventHandler.getTREventsToHandlerMapping()))this._signaling.on(e,this.taskRouterEventHandler[t])}_unSubscribeFromTaskRouterEvents(){this._log.info("Unsubscribing from TaskRouter events ... ");for(let[e,t]of Object.entries(this.taskRouterEventHandler.getTREventsToHandlerMapping()))this._signaling.removeListener(e,this.taskRouterEventHandler[t])}_initialize(){this._routes=new $(this.workspaceSid,this.sid),this._log.info("Initializing Worker %s...",this.sid);const e=this.getRoutes().getRoute(C).path;let t;this._request.get(e,l.API_V1).then(e=>{const r=new z(e,this._config);return t=r.activitySid,delete r.activityName,delete r.activitySid,delete r.available,Object.assign(this,r),Promise.all([this._dataServices.activitiesEntity.fetchActivities(),this._dataServices.channelsEntity.fetchChannels(),this._dataServices.reservationsEntity.fetchReservations()])}).then(()=>{this._log.info("Worker %s activities, channels and pending reservations initialized",this.sid),this._setCurrentActivity(t),this._connectActivitySid?this._setWorkerConnectActivity().then(()=>{this._log.info("Successfully updated Worker on connect to Activity=%s",this._connectActivitySid),this._log.info("Worker %s successfully initialized",this.sid)}):this._log.info("Worker %s successfully initialized",this.sid),this._subscribeToTaskRouterEvents(),this.emit("ready",this)}).catch(e=>{this._log.error("Failed to initialize Worker %s. Error: %s",this.sid,e),this.emit("error",`Failed to initialize Worker ${this.sid}`)})}get channels(){return this._dataServices.channelsEntity.channels}get activities(){return this._dataServices.activitiesEntity.activities}get reservations(){return this._dataServices.reservationsEntity.reservations}_setCurrentActivity(e){const t=this.activities.get(e);if(!t)throw new Error(`Unable to set the current Activity sid=${e} on the Worker.`);t._isCurrent=!0,this.activity=t,this.activity._isCurrent=!0}_setWorkerConnectActivity(){if(!i.a.isString(this._connectActivitySid))throw new TypeError("Failed to set the Worker's activity to the provided optional connectActivitySid. <string>connectActivitySid must be a string.");return this._updateWorkerActivity(this._connectActivitySid).then(()=>(this._log.info("Successfully set the Worker's activity to the provided connectActivitySid=%s on connection.",this._connectActivitySid),this._connectRetry=0,this)).catch(e=>{if(this._connectRetry>=3)throw this._log.error("Unable to set Worker %s activity to the provided %s on successful connection. %s",this.sid,this._connectActivitySid,e),e;return this._connectRetry=this._connectRetry>0?this._connectRetry+1:1,new Promise(e=>setTimeout(e,500)).then(this._setWorkerConnectActivity.bind(this))})}_updateWorkerActivity(e,t={}){if(!i.a.isString(e))throw new TypeError("Error updating Worker Activity: <string>activitySid is a required parameter");const r=this.getRoutes().getRoute(C).path,n={ActivitySid:e};for(const e in t)n[l.WORKER_UPDATE_OPTIONS[e]]=t[e];return this._request.post(r,n,l.API_V1).then(t=>{try{this._update(t),this.activity._isCurrent=!1;const r=this.activities.get(t.activity_sid);this.activity=r,this.activity._isCurrent=!0}catch(t){throw this._log.error("Failed to update the Worker's activity to sid=%s. Error: %s",e,t),t}return this})}_update(e){this._log.trace("Attempting to update Worker %s with latest Worker data=%s",this.sid,JSON.stringify(e));try{const t=new z(e,this._config);ke.forEach(e=>{this[e]=t[e]})}catch(t){this._log.error("Failed to update Worker sid=%s. Update aborted. Error: %s.",e.sid,t)}return this}disconnect(){this._signaling.disconnect()}getRoutes(){return this._routes}};var Se=class extends be{monitor(e,t,r){if(!i.a.isString(e))throw new TypeError("Error monitoring reservation: <string>taskSid is a required parameter");if(!i.a.isString(t))throw new TypeError("Error monitoring reservation: <string>reservationSid is a required parameter");if(r&&!i.a.isObject(r))throw new TypeError("Error monitoring reservation: <string>extraParams must be an object");return this._supervise("monitor",e,t,r)}_supervise(e,t,r,n){const i=this.getRoutes().getRoute(O,t,r).path,s=Object.assign({},n,{Instruction:"supervise",Supervisor:this.sid,SupervisorMode:e});return this._request.post(i,s,l.API_V1).then(()=>{})}};const Te=r(2);class Re{constructor(e,t={}){if(new.target===Re)throw new TypeError("You cannot instantiate TaskRouterBase directly");this._config=new c(e,t),this._request=new E(this._config),e=Te.verifyJWT(e),this.jwt=e,this.accountSid=e.sub,this.workspaceSid=e.grants.task_router.workspace_sid,this.workerSid=e.grants.task_router.worker_sid,this.role=e.grants.task_router.role}}const xe=["friendly_name","reservation_activity_name","assignment_activity_name","target_workers","max_reserved_workers","task_order","reservation_activity_sid","assignment_activity_sid","workspace_sid","account_sid","sid","date_created","date_updated","lifo_queue"];var Ce=class{constructor(e){if(!(e instanceof Ae))throw new TypeError("Failed to create a TaskQueue. <TaskQueueDescriptor>descriptor is a required parameter.");Object.assign(this,e)}};class Ae{constructor(e){if(!i.a.isObject(e))throw new TypeError("Failed to instantiate TaskQueueDescriptor. <Descriptor>descriptor is required.");if(!xe.every(t=>t in e))throw new TypeError("Failed to instantiate TaskQueueDescriptor. <Descriptor>descriptor does not contain all properties of a TaskQueue.");this.sid=e.sid,this.accountSid=e.account_sid,this.workspaceSid=e.workspace_sid,this.name=e.friendly_name,this.assignmentActivityName=e.assignment_activity_name,this.reservationActivityName=e.reservation_activity_name,this.assignmentActivitySid=e.assignment_activity_sid,this.reservationActivitySid=e.reservation_activity_sid,this.targetWorkers=e.target_workers,this.maxReservedWorkers=e.max_reserved_workers,this.taskOrder=e.task_order,this.dateCreated=Object(M.parseTime)(1e3*e.date_created),this.dateUpdated=Object(M.parseTime)(1e3*e.date_updated)}}var Oe=class{constructor(e){if(!(e instanceof z))throw new TypeError("Failed to create a WorkerContainer. <WorkerDescriptor>descriptor is a required parameter.");Object.assign(this,e)}};const Ie=r(6);class Ne{constructor(e,t,r={}){if(!(e instanceof be))throw new TypeError("Failed to initialize WorkspacesEntity. <Worker>worker is a required parameter.");this._Workers=new Map,this._TaskQueues=new Map,this._worker=e,this._request=t,this._log=e.getLogger(`WorkspaceEntity-${this._worker.workspaceSid}`),this._pageSize=r.pageSize||l.DEFAULT_PAGE_SIZE,i.a.inRange(this._pageSize,1,l.DEFAULT_PAGE_SIZE+1)||(this._log.warn("PageSize range for WorkspaceEntity must be between 1 and %d. Setting pageSize to default size=%d",l.DEFAULT_PAGE_SIZE,l.DEFAULT_PAGE_SIZE),this._pageSize=l.DEFAULT_PAGE_SIZE)}get Workers(){return this._Workers}get TaskQueues(){return this._TaskQueues}fetchWorkers(){return this._getAllWorkers(this._getWorkerPage())}fetchTaskQueues(){return this._getAllTaskQueues(this._getTaskQueuePage())}_getAllWorkers(e){return e.then(e=>{e.items.forEach(e=>this._insertWorker(e)),e.hasNextPage&&this._getAllWorkers(e.nextPage())})}_getWorkerPage(e){e=e||{};const t=this._worker.getRoutes().getRoute(A).path,r={PageSize:this._pageSize};return e.AfterSid&&(r.AfterSid=e.AfterSid),this._request.get(t,l.API_V1,r).then(e=>new Ie(e.contents.map(e=>new z(e)),e=>this._getPage({AfterSid:e}),e.after_sid))}_insertWorker(e){const t=e.sid;this._log.trace("_insertWorker(sid=%s, data=%s)",t,JSON.stringify(e));try{this._Workers.set(t,new Oe(e))}catch(e){this._log.error("Unable to create a Worker for sid=%s. Skipping insert into Worker map. Error: %s",t,e)}}_getAllTaskQueues(e){return e.then(e=>{e.items.forEach(e=>this._insertTaskQueue(e)),e.hasNextPage&&this._getAllTaskQueues(e.nextPage())})}_getTaskQueuePage(e){e=e||{};const t=this._worker.getRoute(j).path,r={PageSize:this._pageSize};return e.AfterSid&&(r.AfterSid=e.AfterSid),this._request.get(t,l.API_V1,r).then(e=>new Ie(e.contents.map(e=>new Ae(e)),e=>this._getPage({AfterSid:e}),e.after_sid))}_insertTaskQueue(e){const t=e.sid;this._log.trace("_insertTaskQueue(sid=%s, data=%s",t,JSON.stringify(e));try{this._TaskQueues.set(t,new Ce(e))}catch(e){this._log.error("Unable to create a TaskQueue for sid=%s. Skipping insert into TaskQueue map. Error: %s",t,e)}}}var Le=class extends Re{constructor(e,t={}){if(super(e,t),"admin"!==this.role.toLowerCase())throw new TypeError('A token with the "admin" role is required to use this functionality.');this.workspaceEntity=new Ne(this._config,this._request,t)}fetchWorkers(){return this.workspaceEntity.fetchWorkers().then(()=>this.workspaceEntity.Workers)}fetchTaskQueues(){return this.workspaceEntity.fetchTaskQueues().then(()=>this.workspaceEntity.TaskQueues)}};r.d(t,"Supervisor",function(){return Se}),r.d(t,"Worker",function(){return be}),r.d(t,"Workspace",function(){return Le})},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";var n=r(17);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";var n=r(5);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){"use strict";var n=r(5),i=r(41),s=r(18),o=r(13),a=r(40),u=r(39);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!a(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||o.adapter)(e).then(function(t){return c(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(5);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},function(e){e.exports={name:"axios",version:"0.18.0",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test && bundlesize",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://github.com/axios/axios",devDependencies:{bundlesize:"^0.5.7",coveralls:"^2.11.9","es6-promise":"^4.0.5",grunt:"^1.0.1","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.0.0","grunt-contrib-nodeunit":"^1.0.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^19.0.0","grunt-karma":"^2.0.0","grunt-ts":"^6.0.0-beta.3","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^1.3.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.0.0","karma-firefox-launcher":"^1.0.0","karma-jasmine":"^1.0.2","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.1.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",sinon:"^1.17.4",webpack:"^1.13.1","webpack-dev-server":"^1.14.1","url-search-params":"^0.6.1",typescript:"^2.0.3"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.3.0","is-buffer":"^1.1.5"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}},function(e,t,r){"use strict";e.exports=((e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return-1!==n&&(-1===i||n<i)})},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";const n=r(46),i=r(45),s=process.env;let o;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===o)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==o)return s.VSCODE_PID?1:0;const t=o?1:0;if("win32"===process.platform){const e=n.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in s)||"codeship"===s.CI_NAME?1:t;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){const e=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)?1:"COLORTERM"in s?1:(s.TERM,t)}(e))}i("no-color")||i("no-colors")||i("color=false")?o=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(o=!0),"FORCE_COLOR"in s&&(o=0===s.FORCE_COLOR.length||0!==parseInt(s.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t){e.exports=require("tty")},function(e,t,r){var n=r(48),i=r(33);(t=e.exports=r(19)).init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function(e){var r=this.namespace;if(this.useColors){var n=this.color,i="[3"+(n<8?n:"8;5;"+n),s="  "+i+";1m"+r+" [0m";e[0]=s+e[0].split("\n").join("\n"+s),e.push(i+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=o,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var s=r(47);s&&s.level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}function o(){return process.env.DEBUG}t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map(function(e){return e.trim()}).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)},t.enable(o())},function(e,t){var r=1e3,n=60*r,i=60*n,s=24*i,o=365.25*s;function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var u,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*o;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?a(u=e,s,"day")||a(u,i,"hour")||a(u,n,"minute")||a(u,r,"second")||u+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=r(19)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(s=++i)}),e.splice(s,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())},function(e,t,r){"undefined"==typeof process||"renderer"===process.type?e.exports=r(51):e.exports=r(49)},function(e,t){e.exports=require("assert")},function(e,t,r){"use strict";var n=r(5),i=r(23),s=r(21),o=r(10),a=r(15),u=r(20).http,c=r(20).https,l=r(9),f=r(31),h=r(44),d=r(12),p=r(22);e.exports=function(e){return new Promise(function(t,r){var _,g=e.data,v=e.headers;if(v["User-Agent"]||v["user-agent"]||(v["User-Agent"]="axios/"+h.version),g&&!n.isStream(g)){if(Buffer.isBuffer(g));else if(n.isArrayBuffer(g))g=new Buffer(new Uint8Array(g));else{if(!n.isString(g))return r(d("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));g=new Buffer(g,"utf-8")}v["Content-Length"]=g.length}var m=void 0;e.auth&&(m=(e.auth.username||"")+":"+(e.auth.password||""));var w=l.parse(e.url),y=w.protocol||"http:";if(!m&&w.auth){var k=w.auth.split(":");m=(k[0]||"")+":"+(k[1]||"")}m&&delete v.Authorization;var E="https:"===y,b=E?e.httpsAgent:e.httpAgent,S={path:s(w.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method,headers:v,agent:b,auth:m};e.socketPath?S.socketPath=e.socketPath:(S.hostname=w.hostname,S.port=w.port);var T,R=e.proxy;if(!R&&!1!==R){var x=y.slice(0,-1)+"_proxy",C=process.env[x]||process.env[x.toUpperCase()];if(C){var A=l.parse(C);if(R={host:A.hostname,port:A.port},A.auth){var O=A.auth.split(":");R.auth={username:O[0],password:O[1]}}}}if(R&&(S.hostname=R.host,S.host=R.host,S.headers.host=w.hostname+(w.port?":"+w.port:""),S.port=R.port,S.path=y+"//"+w.hostname+(w.port?":"+w.port:"")+S.path,R.auth)){var I=new Buffer(R.auth.username+":"+R.auth.password,"utf8").toString("base64");S.headers["Proxy-Authorization"]="Basic "+I}e.transport?T=e.transport:0===e.maxRedirects?T=E?a:o:(e.maxRedirects&&(S.maxRedirects=e.maxRedirects),T=E?c:u),e.maxContentLength&&e.maxContentLength>-1&&(S.maxBodyLength=e.maxContentLength);var N=T.request(S,function(n){if(!N.aborted){clearTimeout(_),_=null;var s=n;switch(n.headers["content-encoding"]){case"gzip":case"compress":case"deflate":s=s.pipe(f.createUnzip()),delete n.headers["content-encoding"]}var o=n.req||N,a={status:n.statusCode,statusText:n.statusMessage,headers:n.headers,config:e,request:o};if("stream"===e.responseType)a.data=s,i(t,r,a);else{var u=[];s.on("data",function(t){u.push(t),e.maxContentLength>-1&&Buffer.concat(u).length>e.maxContentLength&&r(d("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,o))}),s.on("error",function(t){N.aborted||r(p(t,e,null,o))}),s.on("end",function(){var n=Buffer.concat(u);"arraybuffer"!==e.responseType&&(n=n.toString("utf8")),a.data=n,i(t,r,a)})}}});N.on("error",function(t){N.aborted||r(p(t,e,null,N))}),e.timeout&&!_&&(_=setTimeout(function(){N.abort(),r(d("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",N))},e.timeout)),e.cancelToken&&e.cancelToken.promise.then(function(e){N.aborted||(N.abort(),r(e))}),n.isStream(g)?g.pipe(N):N.end(g)})}},function(e,t,r){"use strict";var n=r(5);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(){this.message="String contains an invalid character"}i.prototype=new Error,i.prototype.code=5,i.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,s=String(e),o="",a=0,u=n;s.charAt(0|a)||(u="=",a%1);o+=u.charAt(63&t>>8-a%1*8)){if((r=s.charCodeAt(a+=.75))>255)throw new i;t=t<<8|r}return o}},function(e,t,r){"use strict";var n=r(5);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(5),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,o={};return e?(n.forEach(e.split("\n"),function(e){if(s=e.indexOf(":"),t=n.trim(e.substr(0,s)).toLowerCase(),r=n.trim(e.substr(s+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}}),o):o}},function(e,t,r){"use strict";var n=r(5),i=r(23),s=r(21),o=r(58),a=r(57),u=r(12),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(56);e.exports=function(e){return new Promise(function(t,l){var f=e.data,h=e.headers;n.isFormData(f)&&delete h["Content-Type"];var d=new XMLHttpRequest,p="onreadystatechange",_=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||a(e.url)||(d=new window.XDomainRequest,p="onload",_=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var g=e.auth.username||"",v=e.auth.password||"";h.Authorization="Basic "+c(g+":"+v)}if(d.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[p]=function(){if(d&&(4===d.readyState||_)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in d?o(d.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:r,config:e,request:d};i(t,l,n),d=null}},d.onerror=function(){l(u("Network Error",e,null,d)),d=null},d.ontimeout=function(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},n.isStandardBrowserEnv()){var m=r(55),w=(e.withCredentials||a(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;w&&(h[e.xsrfHeaderName]=w)}if("setRequestHeader"in d&&n.forEach(h,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete h[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),l(e),d=null)}),void 0===f&&(f=null),d.send(f)})}},function(e,t,r){"use strict";var n=r(5);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(13),i=r(5),s=r(43),o=r(42);function a(e){this.defaults=e,this.interceptors={request:new s,response:new s}}a.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[o,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head","options"],function(e){a.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){a.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=a},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";var n=r(5),i=r(24),s=r(61),o=r(13);function a(e){var t=new s(e),r=i(s.prototype.request,t);return n.extend(r,s.prototype,t),n.extend(r,t),r}var u=a(o);u.Axios=s,u.create=function(e){return a(n.merge(o,e))},u.Cancel=r(17),u.CancelToken=r(38),u.isCancel=r(18),u.all=function(e){return Promise.all(e)},u.spread=r(37),e.exports=u,e.exports.default=u},function(e,t,r){"use strict";const n=r(3),i=r(16),s=r(10),o=r(9),a=r(8),u=r(30),c=r(7),l=r(32);function f(){this.destroy()}function h(e,t,r){e.writable&&(r=r||s.STATUS_CODES[t],e.write(`HTTP/1.1 ${t} ${s.STATUS_CODES[t]}\r\n`+"Connection: close\r\nContent-type: text/html\r\n"+`Content-Length: ${Buffer.byteLength(r)}\r\n`+"\r\n"+r)),e.removeListener("error",f),e.destroy()}e.exports=class extends n{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=e.port?(this._server=s.createServer((e,t)=>{const r=s.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,r)=>{this.handleUpgrade(e,t,r,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this.clients)for(const e of this.clients)e.terminate();const t=this._server;if(t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port))return t.close(e);e&&e()}shouldHandle(e){return!this.options.path||o.parse(e.url).pathname===this.options.path}handleUpgrade(e,t,r,n){t.on("error",f);const i=+e.headers["sec-websocket-version"],s={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!e.headers["sec-websocket-key"]||8!==i&&13!==i||!this.shouldHandle(e))return h(t,400);if(this.options.perMessageDeflate){const r=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const n=u.parse(e.headers["sec-websocket-extensions"]);n[a.extensionName]&&(r.accept(n[a.extensionName]),s[a.extensionName]=r)}catch(e){return h(t,400)}}if(this.options.verifyClient){const o={origin:e.headers[`${8===i?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,(i,o,a)=>{if(!i)return h(t,o||401,a);this.completeUpgrade(s,e,t,r,n)});if(!this.options.verifyClient(o))return h(t,401)}this.completeUpgrade(s,e,t,r,n)}completeUpgrade(e,t,r,n,s){if(!r.readable||!r.writable)return r.destroy();const o=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i.createHash("sha1").update(t.headers["sec-websocket-key"]+c.GUID,"binary").digest("base64")}`],h=new l(null);var d=t.headers["sec-websocket-protocol"];if(d&&(d=d.trim().split(/ *, */),(d=this.options.handleProtocols?this.options.handleProtocols(d,t):d[0])&&(o.push(`Sec-WebSocket-Protocol: ${d}`),h.protocol=d)),e[a.extensionName]){const t=e[a.extensionName].params,r=u.format({[a.extensionName]:[t]});o.push(`Sec-WebSocket-Extensions: ${r}`),h._extensions=e}this.emit("headers",o,t),r.write(o.concat("\r\n").join("\r\n")),r.removeListener("error",f),h.setSocket(r,n,this.options.maxPayload),this.clients&&(this.clients.add(h),h.on("close",()=>this.clients.delete(h))),s(h)}}},function(e,t,r){"use strict";
/*!
 * UTF-8 validate: UTF-8 validation for WebSockets.
 * Copyright(c) 2015 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */e.exports=(e=>{for(var t=e.length,r=0;r<t;)if(e[r]<128)r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0})},function(e,t){e.exports=require("fs")},function(e,t,r){(function(n){var i=r(66),s=r(4),o=s.join,a=s.dirname,u=i.accessSync&&function(e){try{i.accessSync(e)}catch(e){return!1}return!0}||i.existsSync||s.existsSync,c={arrow:process.env.NODE_BINDINGS_ARROW||" → ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"]]};e.exports=t=function(e){"string"==typeof e?e={bindings:e}:e||(e={}),Object.keys(c).map(function(t){t in e||(e[t]=c[t])}),e.module_root||(e.module_root=t.getRoot(t.getFileName())),".node"!=s.extname(e.bindings)&&(e.bindings+=".node");for(var n,i,a,u=[],l=0,f=e.try.length;l<f;l++){n=o.apply(null,e.try[l].map(function(t){return e[t]||t})),u.push(n);try{return i=e.path?r(26).resolve(n):r(26)(n),e.path||(i.path=n),i}catch(e){if(!/not find/i.test(e.message))throw e}}throw(a=new Error("Could not locate the bindings file. Tried:\n"+u.map(function(t){return e.arrow+t}).join("\n"))).tries=u,a},t.getFileName=function(e){var t,r=Error.prepareStackTrace,i=Error.stackTraceLimit,s={};return Error.stackTraceLimit=10,Error.prepareStackTrace=function(r,i){for(var s=0,o=i.length;s<o;s++)if((t=i[s].getFileName())!==n){if(!e)return;if(t!==e)return}},Error.captureStackTrace(s),Error.prepareStackTrace=r,Error.stackTraceLimit=i,t},t.getRoot=function(e){for(var t,r=a(e);;){if("."===r&&(r=process.cwd()),u(o(r,"package.json"))||u(o(r,"node_modules")))return r;if(t===r)throw new Error('Could not find module root given file: "'+e+'". Do you have a `package.json` file? ');t=r,r=o(r,"..")}}}).call(this,"/index.js")},function(e,t,r){"use strict";try{e.exports=r(67)("validation")}catch(t){e.exports=r(65)}},function(e,t,r){"use strict";class n{constructor(e,t){this.target=t,this.type=e}}class i extends n{constructor(e,t){super("message",t),this.data=e}}class s extends n{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class o extends n{constructor(e){super("open",e)}}class a extends n{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const u={addEventListener(e,t){function r(e){t.call(this,new i(e,this))}function n(e,r){t.call(this,new s(e,r,this))}function u(e){t.call(this,new a(e,this))}function c(){t.call(this,new o(this))}"function"==typeof t&&("message"===e?(r._listener=t,this.on(e,r)):"close"===e?(n._listener=t,this.on(e,n)):"error"===e?(u._listener=t,this.on(e,u)):"open"===e?(c._listener=t,this.on(e,c)):this.on(e,t))},removeEventListener(e,t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]!==t&&r[n]._listener!==t||this.removeListener(e,r[n])}};e.exports=u},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);e=e||{},this.concurrency=e.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=function(){this.pending--,this._run()}.bind(this)}["push","unshift","splice"].forEach(function(e){n.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this._run(),t}}),Object.defineProperty(n.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),n.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var e=this.jobs.shift();this.pending++,e(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var t=this.cbs.pop();process.nextTick(t)}}},n.prototype.onDone=function(e){"function"==typeof e&&(this.cbs.push(e),this._run())},e.exports=n},function(e,t){e.exports=require("tls")},function(e,t){e.exports=require("net")},function(e,t,r){"use strict";const n=r(32);n.Server=r(64),n.Receiver=r(29),n.Sender=r(25),e.exports=n},function(e,t,r){var n,i;!function(s,o){"use strict";void 0===(i="function"==typeof(n=function(){var e=function(){},t="undefined",r=["trace","debug","info","warn","error"];function n(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function i(t,n){for(var i=0;i<r.length;i++){var s=r[i];this[s]=i<t?e:this.methodFactory(s,t,n)}this.log=this.debug}function s(r,s,o){return function(r){"debug"===r&&(r="log");return typeof console!==t&&(void 0!==console[r]?n(console,r):void 0!==console.log?n(console,"log"):e)}(r)||function(e,r,n){return function(){typeof console!==t&&(i.call(this,r,n),this[e].apply(this,arguments))}}.apply(this,arguments)}function o(e,n,o){var a,u=this,c="loglevel";function l(){var e;if(typeof window!==t){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(c)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}e&&(c+=":"+e),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=o||s,u.getLevel=function(){return a},u.setLevel=function(n,s){if("string"==typeof n&&void 0!==u.levels[n.toUpperCase()]&&(n=u.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(a=n,!1!==s&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window===t)return;try{return void(window.localStorage[c]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(e){}}(n),i.call(u,n,e),typeof console===t&&n<u.levels.SILENT)return"No console available for logging"},u.setDefaultLevel=function(e){l()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var f=l();null==f&&(f=null==n?"WARN":n),u.setLevel(f,!1)}var a=new o,u={};a.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new o(e,a.getLevel(),a.methodFactory)),t};var c=typeof window!==t?window.log:void 0;return a.noConflict=function(){return typeof window!==t&&window.log===a&&(window.log=c),a},a.getLoggers=function(){return u},a})?n.call(t,r,t,e):n)||(e.exports=i)}()},function(e,t,r){function n(e,t){Object.defineProperties(this,{_errorData:{value:e},name:{value:e.name},message:{value:t||e.message}})}(0,r(33).inherits)(n,Error),n.prototype.clone=function(e){return new n(this._errorData,e)},e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}]); 