!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/Users/sunilsinha/Work/twilio-salesforce/flexdev/flex-hvs/public",__webpack_require__(__webpack_require__.s=4)}([function(e,t,n){e.exports=n(9)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadCSS=t.loadJS=t.getRuntimeUrl=t.getAssetsUrl=t.FlexPlugin=t.loadPlugin=void 0;var r=n(5);Object.defineProperty(t,"loadPlugin",{enumerable:!0,get:function(){return r.loadPlugin}}),Object.defineProperty(t,"FlexPlugin",{enumerable:!0,get:function(){return r.FlexPlugin}});var o=n(6);Object.defineProperty(t,"getAssetsUrl",{enumerable:!0,get:function(){return o.getAssetsUrl}}),Object.defineProperty(t,"getRuntimeUrl",{enumerable:!0,get:function(){return o.getRuntimeUrl}});var i=n(7);Object.defineProperty(t,"loadJS",{enumerable:!0,get:function(){return i.loadJS}});var a=n(8);Object.defineProperty(t,"loadCSS",{enumerable:!0,get:function(){return a.loadCSS}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Math.random().toString(26).slice(2)}},function(e,t,n){var r,o;!function(i,a){"use strict";void 0===(o="function"===typeof(r=function(){var noop=function(){},e="undefined"!==typeof window&&"undefined"!==typeof window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),t=["trace","debug","info","warn","error"];function bindMethod(e,t){var n=e[t];if("function"===typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function traceForIE(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function realMethod(t){return"debug"===t&&(t="log"),"undefined"!==typeof console&&("trace"===t&&e?traceForIE:void 0!==console[t]?bindMethod(console,t):void 0!==console.log?bindMethod(console,"log"):noop)}function replaceLoggingMethods(e,n){for(var r=0;r<t.length;r++){var o=t[r];this[o]=r<e?noop:this.methodFactory(o,e,n)}this.log=this.debug}function enableLoggingWhenConsoleArrives(e,t,n){return function(){"undefined"!==typeof console&&(replaceLoggingMethods.call(this,t,n),this[e].apply(this,arguments))}}function defaultMethodFactory(e,t,n){return realMethod(e)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(e,n,r){var o,i=this,a="loglevel";function getPersistedLevel(){var e;if("undefined"!==typeof window&&a){try{e=window.localStorage[a]}catch(r){}if("undefined"===typeof e)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(a)+"=");-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(r){}return void 0===i.levels[e]&&(e=void 0),e}}"string"===typeof e?a+=":"+e:"symbol"===typeof e&&(a=void 0),i.name=e,i.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},i.methodFactory=r||defaultMethodFactory,i.getLevel=function(){return o},i.setLevel=function(n,r){if("string"===typeof n&&void 0!==i.levels[n.toUpperCase()]&&(n=i.levels[n.toUpperCase()]),!("number"===typeof n&&n>=0&&n<=i.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(o=n,!1!==r&&function persistLevelIfPossible(e){var n=(t[e]||"silent").toUpperCase();if("undefined"!==typeof window&&a){try{return void(window.localStorage[a]=n)}catch(r){}try{window.document.cookie=encodeURIComponent(a)+"="+n+";"}catch(r){}}}(n),replaceLoggingMethods.call(i,n,e),"undefined"===typeof console&&n<i.levels.SILENT)return"No console available for logging"},i.setDefaultLevel=function(e){getPersistedLevel()||i.setLevel(e,!1)},i.enableAll=function(e){i.setLevel(i.levels.TRACE,e)},i.disableAll=function(e){i.setLevel(i.levels.SILENT,e)};var c=getPersistedLevel();null==c&&(c=null==n?"WARN":n),i.setLevel(c,!1)}var n=new Logger,r={};n.getLogger=function getLogger(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new Logger(e,n.getLevel(),n.methodFactory)),t};var o="undefined"!==typeof window?window.log:void 0;return n.noConflict=function(){return"undefined"!==typeof window&&window.log===n&&(window.log=o),n},n.getLoggers=function getLoggers(){return r},n.default=n,n})?r.call(t,n,t,e):r)||(e.exports=o)}()},function(e,t,n){e.exports=n(10)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPlugin=t.FlexPlugin=void 0;var r=function r(e){this.uniqueName="flex-hvs",this.version="45.0.0",this.dependencies={"flex-plugin-scripts":"4.2.0","flex-plugin":"4.2.0","flex-ui":"1.28.1",react:"16.14.0","react-dom":"16.14.0"},this.name=e,console.log("loading "+this.name+"@"+this.version+" plugin")};t.FlexPlugin=r;t.loadPlugin=function(e){Twilio&&Twilio.Flex&&Twilio.Flex.Plugins?Twilio.Flex.Plugins.init(e):console.warn("This version of Flex does not appear to support plugins.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAssetsUrl=t.getRuntimeUrl=void 0;t.getRuntimeUrl=function(){if(document&&document.currentScript){var e=document.currentScript;if("string"===typeof e.src){var t=e.src;return t.substr(0,t.lastIndexOf("/"))}}return""};t.getAssetsUrl=function(){return t.getRuntimeUrl()+"/assets"}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadJS=void 0;var o=r(n(2));t.loadJS=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach((function(e){var t=document.createElement("script");t.id="external-js-"+o.default(),t.type="text/javascript",t.src=e,document.body.appendChild(t)}))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadCSS=void 0;var o=r(n(2));t.loadCSS=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach((function(e){var t=document.createElement("link");t.id="external-css-"+o.default(),t.rel="stylesheet",t.type="text/css",t.media="all",t.href=e,document.head.appendChild(t)}))}},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(p){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,r){var o=t&&t.prototype instanceof Generator?t:Generator,i=Object.create(o.prototype),a=new Context(r||[]);return i._invoke=function makeInvokeMethod(e,t,n){var r="suspendedStart";return function invoke(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return doneResult()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=maybeInvokeDelegate(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=tryCatch(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),i}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(p){return{type:"throw",arg:p}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var s={};define(s,o,(function(){return this}));var l=Object.getPrototypeOf,u=l&&l(l(values([])));u&&u!==t&&n.call(u,o)&&(s=u);var f=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(s);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){var r;this._invoke=function enqueue(o,i){function callInvokeWithMethodAndArg(){return new t((function(r,a){!function invoke(r,o,i,a){var c=tryCatch(e[r],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"===typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){invoke("next",e,i,a)}),(function(e){invoke("throw",e,i,a)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return invoke("throw",e,i,a)}))}a(c.arg)}(o,i,r,a)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=tryCatch(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[o];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function next(){for(;++r<e.length;)if(n.call(e,r))return next.value=e[r],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(f,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,i,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},defineIteratorMethods(f),define(f,a,"Generator"),define(f,o,(function(){return this})),define(f,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function next(){for(;t.length;){var n=t.pop();if(n in e)return next.value=n,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;resetTryEntry(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=r}catch(o){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0),i=n.n(o);function asyncGeneratorStep(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void n(l)}c.done?t(s):Promise.resolve(s).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function _next(e){asyncGeneratorStep(i,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,r,o,_next,_throw,"throw",e)}_next(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _typeof(e){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!==typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}var a=function isSalesForce(e){return!!e&&window.self!==window.top&&e.includes("orce.com")},c=function(){var e=_asyncToGenerator(i.a.mark((function _callee(e){return i.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=document.createElement("script"),o=document.getElementsByTagName("script")[0];r.src=e,r.type="text/javascript",r.async=!0,r.onerror=n,r.onload=r.onreadystatechange=function(e){return(!e.readyState||"complete"===e.readyState)&&t(e)},o.parentNode.insertBefore(r,o)})));case 1:case"end":return t.stop()}}),_callee)})));return function loadScript(t){return e.apply(this,arguments)}}(),s=n(3).getLogger("Flex Salesforce Integration"),l=function getOpenCTIScript(e){return function isSalesforceLightning(e){return!!e&&e.includes(".lightning.force.com")}(e)?"lightning/opencti_min.js":"interaction.js"},u=function(){function SalesForceIntegration(e,t,n){_classCallCheck(this,SalesForceIntegration),this.flex=e,this.manager=t,this.sfdcBaseUrl=n,this.hvsWorkerId="",this.completeWorkWhen="",this.toVal=""}return _createClass(SalesForceIntegration,[{key:"sfApi",get:function get(){return window.sforce.opencti}},{key:"init",value:function(){var e=_asyncToGenerator(i.a.mark((function _callee(){var e;return i.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return e=l(this.sfdcBaseUrl),this.sfApiUrl="".concat(this.sfdcBaseUrl,"/support/api/52.0/").concat(e),t.next=4,c(this.sfApiUrl);case 4:if(window.sforce){t.next=7;break}return s.error("Saleforce cannot be found"),t.abrupt("return");case 7:this.enableHvsOnWorkStart(),this.attachListeners();case 9:case"end":return t.stop()}}),_callee,this)})));return function init(){return e.apply(this,arguments)}}()},{key:"enableHvsOnWorkStart",value:function enableHvsOnWorkStart(){this.sfApi.hvs.onWorkStart({listener:function listener(e){s.info("onWorkStart Payload ".concat(JSON.stringify(e))),localStorage.setItem("hvsWorkerId",e.workId),localStorage.setItem("completeWorkWhen",e.completeWorkWhen),localStorage.setItem("toVal",e.attributes.to)}})}},{key:"attachListeners",value:function attachListeners(){console.log("SFDC Plug in  attachListeners"),this.flex.Actions.addListener("beforeAcceptTask",this.beforeAcceptTask.bind(this)),this.flex.Actions.addListener("afterCompleteTask",this.afterCompleteTask.bind(this))}},{key:"beforeAcceptTask",value:function beforeAcceptTask(e){var t=this;s.info("beforeAcceptTask ==>>>>>>>>>>>>>>>>>>"),s.info("beforeAcceptTask--\x3e payload.sid ".concat(e.sid)),s.info("beforeAcceptTask--\x3e payload.task.attributes.outbound_to ".concat(e.task.attributes.outbound_to)),s.info("beforeAcceptTask--\x3e payload.task.attributes.direction ".concat(e.task.attributes.direction)),s.info("beforeAcceptTask--\x3e payload.task.attributes.sobjectId ".concat(e.task.attributes.sfdcObjectId)),s.info("beforeAcceptTask--\x3e payload.task.taskChannelUniqueName ".concat(e.task.taskChannelUniqueName));var n={apexClass:"TaskHelper",methodName:"createTask",methodParams:"phoneNumber=".concat(e.task.attributes.outbound_to,"&direction=").concat(e.task.attributes.direction,"&channel=voice&sid=").concat(e.sid),callback:function(e){var n=e.returnValue.runApex.Id;s.info("beforeAcceptTask--\x3e ".concat(n)),localStorage.setItem("taskId",n),t.screenPop(e.returnValue.runApex.Id)}};this.sfApi.runApex(n)}},{key:"afterCompleteTask",value:function afterCompleteTask(e){var t=this;s.info("afterCompleteTask ==>>>>>>>>>>>>>>>>>>");var n=localStorage.getItem("hvsWorkerId"),r=localStorage.getItem("completeWorkWhen"),o=localStorage.getItem("taskId");s.info("afterCompleteTask--\x3e hvsWorkId ".concat(n)),s.info("afterCompleteTask--\x3e completeWorkWhen ".concat(r)),s.info("afterCompleteTask--\x3e taskId ".concat(o));var i={apexClass:"TaskHelper",methodName:"fatchDesposition",methodParams:"taskId=".concat(o),callback:function(e){s.info("despositionCode payload--\x3e ".concat(JSON.stringify(e.returnValue)));var r=e.returnValue.runApex.Call_Result__c;s.info("despositionCode--\x3e ".concat(r)),""!=n&&""!=o&&(s.info("despositionCode--\x3e ".concat(r)),s.info("afterCompleteTask--\x3e taskId ".concat(o)),s.info("afterCompleteTask--\x3e hvsWorkId ".concat(n)),t.sfApi.hvs.completeWork({workId:n,attributes:{disposition:r,taskId:o},callback:function callback(){s.info("Updated HVS Cadence"),localStorage.setItem("hvsWorkerId",""),localStorage.setItem("taskId","")}}))}};this.sfApi.runApex(i)}},{key:"screenPop",value:function screenPop(e){this.sfApi.screenPop({type:this.sfApi.SCREENPOP_TYPE.SOBJECT,params:{recordId:e}})}},{key:"logTask",value:function logTask(e){var t=this.cases[identifier],n=Math.round((new Date).getTime()/1e3);t[event]={startTime:n};var r=t.caseId;if(pastEvent){var o={entityApiName:"TwilioCallLog__c",Id:t[pastEvent].logId,Duration__c:n-t[pastEvent].startTime};this.sfApi.saveLog({value:o})}var i={entityApiName:"TwilioCallLog__c",Name:"".concat(identifier," - ").concat(event),Case__c:r,Status__c:event};this.sfApi.saveLog({value:i,callback:function callback(e){return t[event].logId=e.returnValue.recordId}})}}]),SalesForceIntegration}(),f=function(e){!function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FlexHvsPlugin,e);var t=_createSuper(FlexHvsPlugin);function FlexHvsPlugin(){var e;return _classCallCheck(this,FlexHvsPlugin),(e=t.call(this,"FlexHvsPlugin")).cases={},e}return _createClass(FlexHvsPlugin,[{key:"sfApi",get:function get(){return window.sforce.opencti}},{key:"initRecords",value:function initRecords(e){var t=this,n={apexClass:"TwilioCaseController",methodName:"fatchContact",methodParams:"phone=".concat(e),callback:function(e){t.screenPop(e.returnValue.runApex.Id)}};this.sfApi.runApex(n)}},{key:"screenPop",value:function screenPop(e){this.sfApi.screenPop({type:this.sfApi.SCREENPOP_TYPE.SOBJECT,params:{recordId:e}})}},{key:"init",value:function(){var e=_asyncToGenerator(i.a.mark((function _callee(e,t){var n,r;return i.a.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:if(s.setLevel(t.store.getState().flex.config.logLevel||"INFO"),s.info("Initialising ".concat("FlexHvsPlugin")),n=window.location.ancestorOrigins[0],a(n)){o.next=6;break}return s.warn("Not initializing Salesforce since this instance has been launched independently."),o.abrupt("return");case 6:return r="".concat(n,"/support/api/52.0/lightning/opencti_min.js"),o.next=9,c(r);case 9:if(window.sforce){o.next=12;break}return console.log("Saleforce cannot be found"),o.abrupt("return");case 12:new u(e,t,n).init();case 14:case"end":return o.stop()}}),_callee)})));return function init(t,n){return e.apply(this,arguments)}}()}]),FlexHvsPlugin}(r.FlexPlugin);r.loadPlugin(f)}]);
//# sourceMappingURL=bundle.js.map